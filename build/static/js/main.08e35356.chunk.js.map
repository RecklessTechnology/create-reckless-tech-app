{"version":3,"sources":["@RecklessCore/managers/ToolsMenuManager.js","@RecklessCore/contexts/useToolsMenuContext.js","@RecklessCore/managers/EditorMenuManager.js","@RecklessCore/contexts/useEditorMenuContext.js","@RecklessCore/components/@menus/Tools/index.js","@RecklessCore/managers/InspectorMenuManager.js","@RecklessCore/contexts/useInspectorMenuContext.js","@RecklessCore/managers/EventsManager.js","@RecklessCore/utils/userCheck.js","@RecklessCore/managers/AppManager.js","@RecklessCore/contexts/useAppContext.js","@RecklessCore/managers/PeersManager.js","@RecklessCore/contexts/usePeersContext.js","@RecklessCore/utils/generateRoomId.js","@RecklessCore/PersistantStorage.js","@RecklessCore/managers/ConnectionsManager.js","@RecklessCore/contexts/useConnectionsContext.js","@RecklessCore/components/RoomName/view.js","@RecklessCore/components/RoomName/index.js","@RecklessCore/components/RoomQR/view.js","@RecklessCore/components/RoomQR/index.js","@RecklessCore/components/RoomRefreshIdButton/view.js","@RecklessCore/components/RoomRefreshIdButton/index.js","@RecklessCore/components/RoomCopyUrlButton/view.js","@RecklessCore/components/RoomCopyUrlButton/index.js","@RecklessCore/components/RoomOpenUrlButton/view.js","@RecklessCore/components/RoomOpenUrlButton/index.js","@RecklessCore/components/RoomInfo/index.js","@RecklessCore/components/RoomMenu/index.js","@RecklessCore/components/PeerAvatar/index.js","@RecklessCore/components/PeerName/view.js","@RecklessCore/components/PeerName/edit.js","@RecklessCore/components/PeerName/index.js","@RecklessCore/components/PeerToolbar/index.js","@RecklessCore/components/EditPeerNameButton/view.js","@RecklessCore/components/EditPeerNameButton/index.js","@RecklessCore/components/HostInfo/index.js","@RecklessCore/components/MeInfo/index.js","@RecklessCore/components/ShareScenePeerButton/view.js","@RecklessCore/components/ShareScenePeerButton/index.js","@RecklessCore/components/PeerInfo/index.js","@RecklessCore/components/PeersList/index.js","@RecklessCore/components/PeersInfo/index.js","@RecklessCore/components/PeersMenu/index.js","@RecklessCore/components/InspectorCloseButton/view.js","@RecklessCore/components/InspectorCloseButton/index.js","@RecklessCore/components/InspectorToolbar/view.js","@RecklessCore/components/InspectorToolbar/index.js","@RecklessCore/components/@menus/Inspector/view.js","@RecklessCore/components/@menus/Inspector/index.js","@RecklessCore/utils/toFlow.js","@RecklessCore/components/@patches/shared/PatchDetails/index.js","@RecklessCore/components/@patches/shared/OutputHandle/index.js","@RecklessCore/components/@patches/shared/InputHandle/index.js","@RecklessCore/components/@patches/shared/ParentChildPro/index.js","@RecklessCore/components/@patches/shared/PatchRoot/index.js","@RecklessCore/components/@patches/Scene/index.js","@RecklessCore/components/@patches/shared/PropListItem/view.js","@RecklessCore/components/@patches/shared/PropListItem/index.js","@RecklessCore/managers/ThreeObjectsManager.js","@RecklessCore/contexts/useThreeObjectsContext.js","@RecklessCore/components/@patches/shared/PatchValue/view.js","@RecklessCore/components/@patches/ThreeObject/PatchValue/index.js","@RecklessCore/components/@patches/shared/PatchToolbar/view.js","@RecklessCore/components/@patches/ThreeObject/PatchToolbar/index.js","@RecklessCore/components/@patches/ThreeObject/index.js","@RecklessCore/components/@patches/Device/PatchToolbar/index.js","@RecklessCore/managers/DevicesManager.js","@RecklessCore/contexts/useDevicesContext.js","@RecklessCore/components/@patches/Device/PatchValue/index.js","@RecklessCore/components/@patches/Device/Mouse/index.js","@RecklessCore/components/@patches/Device/index.js","@RecklessCore/managers/TransformsManager.js","@RecklessCore/contexts/useTransformsContext.js","@RecklessCore/components/@patches/Transform/PatchValue/index.js","@RecklessCore/components/@patches/Transform/PatchToolbar/index.js","@RecklessCore/components/@patches/Transform/index.js","@RecklessCore/managers/GeneratorsManager.js","@RecklessCore/contexts/useGeneratorsContext.js","@RecklessCore/components/@patches/Generator/PatchValue/index.js","@RecklessCore/shapes/drawSine.js","@RecklessCore/shapes/drawCircle.js","@RecklessCore/components/@patches/Generator/ShapePreview/background.js","@RecklessCore/components/@patches/Generator/ShapePreview/indicator.js","@RecklessCore/components/@patches/Generator/ShapePreview/index.js","@RecklessCore/components/@patches/Generator/PatchToolbar/index.js","@RecklessCore/components/@patches/Generator/index.js","@RecklessCore/components/@patches/Peer/PatchValue/index.js","@RecklessCore/components/@patches/Peer/PatchToolbar/index.js","@RecklessCore/components/@patches/Peer/index.js","@RecklessCore/components/@patches/edges/CustomEdge.js","@RecklessCore/components/@patches/edges/CustomLineageEdge.js","@RecklessCore/components/NodeEditor/view.js","@RecklessCore/components/NodeEditor/index.js","@RecklessCore/components/EditorCloseButton/view.js","@RecklessCore/components/EditorCloseButton/index.js","@RecklessCore/components/SceneDownloadButton/view.js","@RecklessCore/components/SceneDownloadButton/index.js","@RecklessCore/components/AddToEditorCloseButton/view.js","@RecklessCore/components/AddToEditorCloseButton/index.js","@RecklessCore/components/AddToEditorToolbar/view.js","@RecklessCore/components/AddToEditorToolbar/index.js","@RecklessCore/components/AddPeersToScene/index.js","@RecklessCore/components/AddToEditorMenu/index.js","@RecklessCore/components/EditorToolbar/view.js","@RecklessCore/components/EditorToolbar/index.js","@RecklessCore/components/@menus/Editor/view.js","@RecklessCore/components/@menus/Editor/index.js","AppView.js","@RecklessCore/utils/threeParams.js","@RecklessCore/managers/WorldManager.js","@RecklessCore/contexts/useUserMedia.js","@RecklessCore/components/@views/CameraView/index.js","@RecklessCore/useForceUpdate.js","@RecklessCore/managers/GeneratorManager.js","@RecklessCore/contexts/useGeneratorContext.js","@RecklessCore/inputs/generators/Orbit/index.js","@RecklessCore/inputs/generators/Sinewave/index.js","@RecklessCore/inputs/generators/view.js","@RecklessCore/inputs/generators/index.js","@RecklessCore/managers/PeerManager.js","@RecklessCore/inputs/peers/view.js","@RecklessCore/inputs/peers/index.js","@RecklessCore/managers/DeviceManager.js","@RecklessCore/inputs/devices/Mouse/index.js","@RecklessCore/contexts/useDeviceContext.js","@RecklessCore/inputs/devices/Keyboard/index.js","@RecklessCore/inputs/devices/view.js","@RecklessCore/inputs/devices/index.js","@RecklessCore/managers/TransformManager.js","@RecklessCore/inputs/transforms/Multiply/index.js","@RecklessCore/contexts/useTransformContext.js","@RecklessCore/inputs/transforms/view.js","@RecklessCore/inputs/transforms/index.js","@RecklessCore/world/index.js","@RecklessCore/components/@objects/RenderThreeChildren/view.js","@RecklessCore/managers/ThreeObjectManager.js","@RecklessCore/contexts/useSceneManagerContext.js","@RecklessCore/utils/waitForMs.js","@RecklessCore/useThreeObjectStore.js","@RecklessCore/managers/SceneManager.js","@RecklessCore/Scene.js","@RecklessCore/components/@objects/RenderThreeChildren/index.js","@RecklessCore/scenes/Dynamic/index.js","App.js","index.js"],"names":["ToolsMenuContext","createContext","ToolsMenuManager","children","useState","toolsMenuWidth","setToolsMenuWidth","toolsMenuOpen","setToolsMenuOpen","toolsMenuTab","setToolsMenuTab","toolsMenuContextValue","useMemo","Provider","value","useToolsMenuContext","useContext","EditorMenuContext","EditorMenuManager","editorMenuHeight","setEditorMenuHeight","editorMenuOpen","setEditorMenuOpen","editorMenuTab","setEditorMenuTab","editorMenuContextValue","useEditorMenuContext","useStyles","makeStyles","theme","drawer","transition","transitions","create","easing","easeOut","duration","enteringScreen","height","props","width","position","left","top","drawerPaper","drawerHeader","display","alignItems","padding","spacing","mixins","toolbar","justifyContent","ToolsDrawer","classes","useTheme","Drawer","className","variant","anchor","open","paper","IconButton","onClick","direction","Divider","List","map","text","index","ListItem","button","ListItemIcon","ListItemText","primary","InspectorMenuContext","InspectorMenuManager","inspectorMenuWidth","setInspectorMenuWidth","inspectorMenuOpen","setInspectorMenuOpen","inspectorMenuTab","setInspectorMenuTab","inspectorMenuContextValue","useInspectorMenuContext","EventsManager","events","name","data","a","handlers","Promise","all","slice","handler","unsubscribe","indexOf","splice","publish","subscribe","push","hasSubscriptions","length","isHost","window","location","hash","substr","AppContext","appContextValue","AppManager","DefaultSceneJSON","DefaultSceneJSONClient","sceneJSON","setSceneJSON","paused","setPaused","getDefaultGeo","geoUUID","type","uuid","depth","widthSegments","heightSegments","depthSegments","getDefaultMat","materialUUID","color","roughness","metalness","emissive","envMapIntensity","refractionRatio","depthFunc","depthTest","depthWrite","colorWrite","stencilWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","removeChild","useCallback","childs","callback","forEach","child","idx","undefined","sceneUtils","removeTransform","transforms","filter","t","connections","c","from","to","addTransform","uuidv4","amount","removeDevice","devices","d","addDevice","removeGenerator","generators","g","addGenerator","resolution","rpm","loop","removeThreeObj","filterdChildren","object","addThreeObj","geometries","materials","layers","matrix","geometry","material","updatePeer","ref","peers","removePeer","p","addPeer","addConnection","edge","source","fromProp","sourceHandle","replace","split","toLowerCase","target","toProp","targetHandle","updateConnection","oldEdge","newConnection","con","id","settings","useAppContext","PeersContext","peersContextValue","PeersManager","Map","PeerRegistry","findPeer","get","registerPeer","identifier","oldRef","delete","newRef","set","unregisterPeer","getPeersArray","Array","keys","useEffect","moment","diff","lastSeen","peerRegistryUtils","useConnectionsContext","GenerateRoomId","niceware","generatePassphrase","reduce","accumulator","currentValue","persistData","key","localStorage","setItem","JSON","stringify","sessionStorage","restoreData","parse","getItem","ConnectionsContext","connectionsContextValue","ConnectionsManager","usePeersContext","connectionType","room","setRoom","roomInfo","setRoomInfo","me","ConnectionRegistry","isMounted","useRef","getMe","isMe","getHost","getByUUID","updateConnectionInfo","oldRefs","has","connectionId","findConnection","registerConnection","unregisterConnection","getConnectionsArray","getRoomInfo","connectionRegistryUtils","info","generateRoomId","url","href","joinRoom","appId","meRef","status","selfId","mode","Date","now","pingMe","makeAction","sendAnnounce","getAnnounce","sendData","getData","onPeerJoin","connectionRef","ping","connectionJoin","onPeerLeave","peer","setData","payload","host","announceMeChanges","connection","current","roomName","marginRight","marginLeft","RoomNameView","roomId","Tooltip","title","Typography","whyDidYouRender","memo","RoomName","qrCode","QRView","size","qrContainer","RoomQR","qrRef","qrSize","setQrSize","offsetWidth","r","updateRoom","iconButton","margin","RoomRefreshIdButtonView","RoomRefreshIdButton","RoomCopyUrlButtonView","navigator","clipboard","writeText","then","RoomCopyUrlButton","RoomOpenUrlButtonView","Link","rel","RoomOpenUrlButton","RoomInfo","ListSubheader","Grid","container","item","xs","root","RoomMenu","role","PeerAvatar","peerInfo","ListItemAvatar","Avatar","alt","src","multiline","whiteSpace","overflow","PeerNameView","secondary","onNameUpdate","TextField","label","onChange","PeerName","toolbarButtons","right","background","palette","PeerToolbar","ListItemSecondaryAction","EditPeerNameButtonView","EditPeerNameButton","listItem","list","sectionTitle","marginTop","HostInfo","hostName","setHostName","setHost","h","updateHost","updateName","e","currentTarget","updateHostInfo","val","MeInfo","meName","setMeName","setMe","m","updateMe","updateMeInfo","sceneMenu","ShareScenePeerButtonView","buttonRef","anchorEl","setAnchorEl","menuOpen","setMenuOpen","handleClose","json","dataset","menuValue","testJSON","posenetJSON","timestamp","style","Menu","keepMounted","onClose","MenuItem","ShareScenePeerButton","buttons","PeerInfo","peerName","setPeerName","updateInfo","PeersList","setConnections","updateConnections","paddingTop","PeersInfo","PeersMenu","InspectorCloseButtonView","InspectorCloseButton","InspectorToolbarView","InspectorToolbar","zIndex","InspectorView","Tabs","indicatorColor","textColor","event","newValue","Tab","Inspector","dimensionsLookup","typeLookup","makeFlowProps","parents","hidden","hideChildren","isChildHidden","isHidden","sceneGraphToFlow","level","nextLevel","flat","rtSceneToFlow","rtScene","peersToFlow","devicesToFlow","generatorsToFlow","transformsToFlow","animated","connectionsToFlow","propItem","propIcon","minWidth","typeIcon","includes","PatchDetails","handle","handleLeft","float","borderLeft","borderTopLeftRadius","borderBottomLeftRadius","handleRight","borderRight","borderTopRightRadius","borderBottomRightRadius","OutputHandle","propName","clsx","InputHandle","propGrid","borderBottom","propText","fontSize","textAlign","ParentChildProp","backgroundColor","border","borderRadius","paddingBottom","boxShadow","PatchRoot","ScenePatch","ParentChildPro","oveflow","textTransform","PropListItemView","disableInput","disableOutput","PropListItem","ThreeObjectsContext","threeObjectsContextValue","ThreeObjectsManager","ThreeObjectRegistry","ThreeObjectRegistryByName","ThreeObjectRegistryByPos","ThreeObjectRegistryByType","exitScene","clear","threeObjectsRegistryUtils","registerThreeObject","pos","x","y","z","posList","unregisterThreeObject","findThreeObject","findThreeObjectByName","findThreeObjectsByPos","obj","disabled","findThreeObjectsByLayer","threeObjectNamesArray","useThreeObjectsContext","PatchValueView","v","toFixed","PatchValue","threeObj","propVal","setPropVal","updateProp","flexGrow","minHeight","appbar","group","PatchToolbarView","removeObj","AppBar","Toolbar","ButtonGroup","Button","PatchToolbar","bottom","ThreeObjectPatch","DevicesContext","devicesContextValue","DevicesManager","DeviceRegistry","deviceRegistryUtils","findDevice","registerDevice","unregisterDevice","getDevicesArray","useDevicesContext","deviceObj","MousePatch","DevicePatch","TransformsContext","transformsContextValue","TransformsManager","TransformRegistry","findTransform","transformRegistryUtils","registerTransform","unregisterTransform","getTransformsArray","useTransformsContext","transformObj","TransformPatch","transform","setTransform","GeneratorsContext","generatorsContextValue","GeneratorsManager","GeneratorRegistry","generatorRegistryUtils","findGenerator","registerGenerator","unregisterGenerator","getGeneratorsArray","useGeneratorsContext","generatorObj","DrawSine","points","i","Math","sin","PI","DrawCircle","cos","canvasContainer","parentSize","ShapePreviewBackground","shape","shapeDimensions","setShapeDimensions","context","setContext","canvasRef","finalShape","setFinalShape","min","max","getContext","s","ctx","lineWidth","strokeStyle","moveTo","lineTo","stroke","ind","finalVal","ShapePreviewIndicator","setFinalVal","shapeContainer","ShapePreview","generator","setGenerator","updateGenerator","setShape","shapeRef","containerSize","setContainerSize","offsetHeight","Generator","peerObj","PeerPatch","setPeer","setProps","CustomEdge","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","edgePath","getSmoothStepPath","markerWidth","markerHeight","viewBox","orient","refX","refY","strokeLinecap","strokeLinejoin","strokeWidth","fill","cx","cy","markerEnd","CustomLineageEdge","getBezierPath","onLoad","NodeEditorView","elements","nodeTypes","edgeTypes","dagreGraph","dagre","graphlib","Graph","setDefaultEdgeLabel","elems","layoutedElements","el","setGraph","rankdir","align","nodesep","edgesep","ranksep","marginx","marginy","isNode","setNode","setEdge","layout","nodeWithPosition","node","nodeWidth","random","nodeHeight","snapToGrid","onEdgeUpdate","onConnect","onElementsRemove","NodeEditor","setElements","Scene","ThreeObject","device","Device","Transform","Peer","custom","customLineage","menuButton","EditorCloseButtonView","EditorCloseButton","SceneDownloadButttonView","link","document","createElement","download","encodeURIComponent","click","SceneDownloadButtton","AddToEditorCloseButtonView","AddToEditorCloseButton","AddToEditorToolbarView","forwardRef","AddToEditorToolbar","AddPeersToScene","closeMenu","heading","typography","pxToRem","fontWeight","fontWeightRegular","itemList","AddToEditorMenu","Boolean","addObject","transformOrigin","vertical","horizontal","Accordion","AccordionSummary","expandIcon","AccordionDetails","spacer","EditorToolbarView","EditorToolbar","EditorView","Editor","rootShiftBottom","appBar","sharp","leavingScreen","appBarShiftLeft","appBarShiftRight","renderArea","renderAreaShiftLeft","renderAreaShiftRight","bottomAppBar","bottomToolbar","inspectorButton","AppView","Tools","ThreeParamsToArgs","filteredProps","propKeys","Object","prop","THREE","ThreeUsedProps","params","parameters","param","getHexString","WorldContext","worldContextValue","WorldManager","useUserMedia","requestedMedia","mediaStream","setMediaStream","mediaDevices","getUserMedia","stream","getTracks","track","stop","enableStream","propTypes","PropTypes","string","isRequired","CAPTURE_OPTIONS","audio","video","facingMode","CameraView","videoRef","srcObject","onCanPlay","play","autoPlay","playsInline","muted","useForceUpdate","setState","GeneratorContext","DefaultProps","GeneratorManager","Symbol","setType","setResolution","setRpm","setLoop","setPosition","forceUpdate","generatorRef","getRef","contextValue","nodeRef","useGeneratorContext","OrbitGenerator","setGenPosition","animMili","toPoints","handleChange","result","config","pause","friction","useSpring","api","start","SinewaveGenerator","GeneratorsView","Orbit","Sinewave","Generators","gen","PeerContext","PeerManager","setConnection","updateFromInput","peerRef","PeerView","Peers","DeviceContext","DeviceManager","displayName","deviceRef","MouseDevice","updateMousePosition","ev","clientX","clientY","addEventListener","removeEventListener","KeyboardDevice","DevicesView","Devices","dev","TransformContext","TransformManager","useDevicesConext","setAmount","setValue","MultiplyTransform","setTransValue","TransformsView","Multiply","Transforms","userSelect","World","camera","fog","shadows","dpr","devicePixelRatio","attach","args","OrbitControls","enablePan","enableZoom","enableRotate","RenderThreeChildrenView","rotation","scale","ThreeObjectContext","ThreeObjectPositionContext","ThreeObjectRotationContext","ThreeObjectScaleContext","ThreeObjectManager","useTransformsConext","setDisabled","debug","setDebug","setRotation","setScale","threeObjectRef","positionContextValue","rotationContextValue","scaleContextValue","useSceneManager","SceneManagerContext","waitForMs","ms","resolve","setTimeout","StoreContext","SceneStoreProvider","getState","getSceneState","setSceneState","SceneManager","defaultScene","initialScene","initialLevel","currentScene","setScene","prevLevel","currentLevel","Number","sceneStore","nextScene","targetScene","targetLevel","setLevel","resetScene","prevScene","formerCurrentLevel","formerPrevLevel","SceneContext","LevelContext","instances","setInstances","initEvents","instantiate","newElement","portalNode","instance","createPortal","React","cloneElement","elem","levelContextValue","enterPrevLevel","enterNextLevel","startsWith","RenderThreeChildren","childRef","objProps","usedProps","shadow","matrixAutoUpdate","geo","geoProps","mat","matProps","matGeoChildren","useFrame","state","uniforms","time","clock","elapsedTime","childProps","DynamicScene","App","updateScene","Dynamic","createMuiTheme","default","Palette","ReactDOM","render","StrictMode","ThemeProvider","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.08e35356.chunk.js","sourcesContent":["/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nexport const ToolsMenuContext = createContext(null);\n\nconst ToolsMenuManager = ({\n  children,\n}) => {\n  const [toolsMenuWidth, setToolsMenuWidth] = useState(500);\n  const [toolsMenuOpen, setToolsMenuOpen] = useState(false);\n  const [toolsMenuTab, setToolsMenuTab] = useState(0);\n\n  const toolsMenuContextValue = useMemo(() => ({\n    toolsMenuWidth,\n    setToolsMenuWidth,\n    toolsMenuOpen,\n    setToolsMenuOpen,\n    toolsMenuTab,\n    setToolsMenuTab,\n  }), [\n    toolsMenuWidth, setToolsMenuWidth,\n    toolsMenuOpen, setToolsMenuOpen,\n    toolsMenuTab, setToolsMenuTab,\n  ]);\n\n  return (\n    <ToolsMenuContext.Provider value={toolsMenuContextValue}>\n      {children}\n    </ToolsMenuContext.Provider>\n  );\n};\n\nToolsMenuManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default ToolsMenuManager;\n","import { useContext } from 'react';\nimport { ToolsMenuContext } from '../managers/ToolsMenuManager';\n\nexport default function useToolsMenuContext() {\n  return useContext(ToolsMenuContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nexport const EditorMenuContext = createContext(null);\n\nconst EditorMenuManager = ({\n  children,\n}) => {\n  const [editorMenuHeight, setEditorMenuHeight] = useState(500);\n  const [editorMenuOpen, setEditorMenuOpen] = useState(false);\n  const [editorMenuTab, setEditorMenuTab] = useState(0);\n\n  const editorMenuContextValue = useMemo(() => ({\n    editorMenuHeight,\n    setEditorMenuHeight,\n    editorMenuOpen,\n    setEditorMenuOpen,\n    editorMenuTab,\n    setEditorMenuTab,\n  }), [\n    editorMenuHeight, setEditorMenuHeight,\n    editorMenuOpen, setEditorMenuOpen,\n    editorMenuTab, setEditorMenuTab,\n  ]);\n\n  return (\n    <EditorMenuContext.Provider value={editorMenuContextValue}>\n      {children}\n    </EditorMenuContext.Provider>\n  );\n};\n\nEditorMenuManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default EditorMenuManager;\n","import { useContext } from 'react';\nimport { EditorMenuContext } from '../managers/EditorMenuManager';\n\nexport default function useEditorMenuContext() {\n  return useContext(EditorMenuContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nimport {\n  Drawer, List, ListItem, ListItemIcon, ListItemText, Divider, IconButton,\n} from '@material-ui/core';\n\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport InboxIcon from '@material-ui/icons/Inbox';\nimport MailIcon from '@material-ui/icons/Mail';\n\nimport useToolsMenuContext from '../../../contexts/useToolsMenuContext';\nimport useEditorMenuContext from '../../../contexts/useEditorMenuContext';\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    transition: theme.transitions.create('height', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    height: (props) => (`calc(100% - ${(props.editorMenuOpen ? props.editorMenuHeight : 0)}px)`),\n    width: (props) => (props.toolsMenuWidth),\n    position: 'fixed',\n    left: 0,\n    top: 0,\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n}));\n\nconst ToolsDrawer = () => {\n  const { toolsMenuWidth, toolsMenuOpen, setToolsMenuOpen } = useToolsMenuContext();\n  const { editorMenuOpen, editorMenuHeight } = useEditorMenuContext();\n\n  const classes = useStyles({ toolsMenuWidth, editorMenuOpen, editorMenuHeight });\n  const theme = useTheme();\n\n  const handleDrawerClose = () => {\n    setToolsMenuOpen(false);\n  };\n\n  if (!toolsMenuOpen) return null;\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"persistent\"\n      anchor=\"left\"\n      open={toolsMenuOpen}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <div className={classes.drawerHeader}>\n        <IconButton onClick={handleDrawerClose}>\n          {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n        </IconButton>\n      </div>\n      <Divider />\n      <List>\n        {['Inbox', 'Starred', 'Send email', 'Drafts'].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n      <Divider />\n      <List>\n        {['All mail', 'Trash', 'Spam'].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n      <Divider />\n      <List>\n        {['Inbox', 'Starred', 'Send email', 'Drafts'].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n    </Drawer>\n  );\n};\n\nexport default ToolsDrawer;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nexport const InspectorMenuContext = createContext(null);\n\nconst InspectorMenuManager = ({\n  children,\n}) => {\n  const [inspectorMenuWidth, setInspectorMenuWidth] = useState(375);\n  const [inspectorMenuOpen, setInspectorMenuOpen] = useState(false);\n  const [inspectorMenuTab, setInspectorMenuTab] = useState(0);\n\n  const inspectorMenuContextValue = useMemo(() => ({\n    inspectorMenuWidth,\n    setInspectorMenuWidth,\n    inspectorMenuOpen,\n    setInspectorMenuOpen,\n    inspectorMenuTab,\n    setInspectorMenuTab,\n  }), [\n    inspectorMenuWidth, setInspectorMenuWidth,\n    inspectorMenuOpen, setInspectorMenuOpen,\n    inspectorMenuTab, setInspectorMenuTab,\n  ]);\n\n  return (\n    <InspectorMenuContext.Provider value={inspectorMenuContextValue}>\n      {children}\n    </InspectorMenuContext.Provider>\n  );\n};\n\nInspectorMenuManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default InspectorMenuManager;\n","import { useContext } from 'react';\nimport { InspectorMenuContext } from '../managers/InspectorMenuManager';\n\nexport default function useInspectorMenuContext() {\n  return useContext(InspectorMenuContext);\n}\n","const EventsManager = () => {\n  const events = {};\n  async function publish(name, data) {\n    const handlers = events[name];\n    if (handlers == null) return false;\n\n    // make snapshot of handlers, to prevent inbetween unsubscribe calls\n    // from mutating this array.\n    await Promise.all(handlers.slice().map((handler) => handler(data), 1000));\n    return true;\n  }\n\n  function unsubscribe(\n    name,\n    handler,\n  ) {\n    const handlers = events[name];\n    if (handlers == null) return;\n\n    const index = handlers.indexOf(handler);\n    handlers.splice(index, 1);\n  }\n\n  function subscribe(\n    name,\n    handler,\n  ) {\n    if (events[name] == null) {\n      events[name] = [];\n    }\n    events[name].push(handler);\n\n    return () => unsubscribe(name, handler);\n  }\n\n  function hasSubscriptions(name) {\n    if (events[name] == null) {\n      return 0;\n    }\n    return events[name].length;\n  }\n\n  return {\n    publish,\n    subscribe,\n    unsubscribe,\n    hasSubscriptions,\n  };\n};\n\nexport default EventsManager;\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-undef */\n\nconst isHost = () => (window.location.hash.substr(1) === '');\n\nexport {\n  isHost,\n};\n","/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable no-undef */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  createContext,\n  useMemo,\n  useState,\n  useCallback,\n} from 'react';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport EventsManager from './EventsManager';\nimport DefaultSceneJSON from '../sceneDefinitions/LogoScene.json';\nimport DefaultSceneJSONClient from '../sceneDefinitions/TestScene.json';\nimport { isHost } from '../utils/userCheck';\n\nexport const AppContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let appContextValue = {};\n\nconst AppManager = ({\n  children,\n}) => {\n  const [sceneJSON, setSceneJSON] = useState(() => {\n    if (isHost()) {\n      return DefaultSceneJSON;\n    }\n    return DefaultSceneJSONClient;\n  });\n\n  const [paused, setPaused] = useState(false);\n\n  const [events] = useState(() => EventsManager());\n\n  const getDefaultGeo = (geoUUID, type) => ({\n    uuid: geoUUID,\n    type: `${type}Geometry`,\n    width: 1,\n    height: 1,\n    depth: 1,\n    widthSegments: 1,\n    heightSegments: 1,\n    depthSegments: 1,\n  });\n\n  const getDefaultMat = (materialUUID) => ({\n    uuid: materialUUID,\n    type: 'MeshStandardMaterial',\n    color: 16777215,\n    roughness: 1,\n    metalness: 0,\n    emissive: 0,\n    envMapIntensity: 1,\n    refractionRatio: 0.98,\n    depthFunc: 3,\n    depthTest: true,\n    depthWrite: true,\n    colorWrite: true,\n    stencilWrite: false,\n    stencilWriteMask: 255,\n    stencilFunc: 519,\n    stencilRef: 0,\n    stencilFuncMask: 255,\n    stencilFail: 7680,\n    stencilZFail: 7680,\n    stencilZPass: 7680,\n  });\n\n  const removeChild = useCallback((childs, uuid, callback) => {\n    childs.forEach((child, idx) => {\n      if (child.uuid === uuid) {\n        childs.splice(idx, 1);\n        callback();\n      } else if (child.children !== undefined) {\n        removeChild(child.children, uuid, callback);\n      }\n    });\n  }, []);\n\n  // Add, remove, and update objects from the scene json\n  const sceneUtils = useMemo(() => ({\n    removeTransform(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        transforms: [\n          ...sceneJSON.transforms.filter((t) => (t.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addTransform(type) {\n      setSceneJSON({\n        ...sceneJSON,\n        transforms: [\n          ...sceneJSON.transforms,\n          {\n            uuid: uuidv4(),\n            type,\n            name: `new ${type}`,\n            amount: 2,\n          },\n        ],\n      });\n    },\n    removeDevice(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        devices: [\n          ...sceneJSON.devices.filter((d) => (d.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addDevice(type) {\n      setSceneJSON({\n        ...sceneJSON,\n        devices: [\n          ...sceneJSON.devices,\n          {\n            uuid: uuidv4(),\n            type,\n            name: `new ${type}`,\n          },\n        ],\n      });\n    },\n    removeGenerator(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        generators: [\n          ...sceneJSON.generators.filter((g) => (g.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addGenerator(type) {\n      setSceneJSON({\n        ...sceneJSON,\n        generators: [\n          ...sceneJSON.generators,\n          {\n            uuid: uuidv4(),\n            type,\n            name: `new ${type}`,\n            resolution: 32,\n            rpm: 30,\n            loop: true,\n            paused: false,\n          },\n        ],\n      });\n    },\n    removeThreeObj(uuid) {\n      const filterdChildren = sceneJSON.object.children;\n      removeChild(filterdChildren, uuid, () => {\n        setSceneJSON({\n          ...sceneJSON,\n          object: {\n            ...sceneJSON.object,\n            children: filterdChildren,\n          },\n        });\n      });\n    },\n    addThreeObj(type) {\n      const geoUUID = uuidv4();\n      const materialUUID = uuidv4();\n      setSceneJSON({\n        ...sceneJSON,\n        geometries: [\n          ...sceneJSON.geometries,\n          getDefaultGeo(geoUUID, type),\n        ],\n        materials: [\n          ...sceneJSON.materials,\n          getDefaultMat(materialUUID),\n        ],\n        object: {\n          ...sceneJSON.object,\n          children: [\n            ...sceneJSON.object.children,\n            {\n              uuid: uuidv4(),\n              type: 'Mesh',\n              name: type,\n              layers: 1,\n              matrix: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n              geometry: geoUUID,\n              material: materialUUID,\n            },\n          ],\n        },\n      });\n    },\n    // Peers\n    updatePeer(uuid, ref) {\n      setSceneJSON({\n        ...sceneJSON,\n        peers: [\n          ...sceneJSON.peers,\n          ...ref,\n        ],\n      });\n    },\n    removePeer(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        peers: [\n          ...sceneJSON.peers.filter((p) => (p.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addPeer(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        peers: [\n          ...sceneJSON.peers,\n          {\n            type: 'peer',\n            name: uuid,\n            uuid,\n          },\n        ],\n      });\n    },\n    // Connections\n    addConnection(edge) {\n      setSceneJSON({\n        ...sceneJSON,\n        connections: [\n          ...sceneJSON.connections,\n          {\n            uuid: uuidv4(),\n            from: edge.source,\n            fromProp: edge.sourceHandle.replace(edge.source, '').split('-')[1].toLowerCase(),\n            to: edge.target,\n            toProp: edge.targetHandle.replace(edge.target, '').split('-')[2].toLowerCase(),\n          },\n        ],\n      });\n    },\n    updateConnection(oldEdge, newConnection) {\n      setSceneJSON({\n        ...sceneJSON,\n        connections: [\n          ...(sceneJSON.connections.filter((con) => (con.uuid !== oldEdge.id))\n            ? sceneJSON.connections.filter((con) => (con.uuid !== oldEdge.id)) : []),\n          {\n            uuid: oldEdge.id,\n            from: newConnection.source,\n            fromProp: newConnection.sourceHandle.replace(newConnection.source, '').split('-')[1],\n            to: newConnection.target,\n            toProp: newConnection.targetHandle.replace(newConnection.target, '').split('-')[2],\n          },\n        ],\n      });\n    },\n  }), [sceneJSON, setSceneJSON, removeChild]);\n\n  appContextValue = useMemo(() => ({\n    settings: {\n    },\n    paused,\n    setPaused,\n    sceneJSON,\n    setSceneJSON,\n    ...events,\n    ...sceneUtils,\n  }), [\n    paused, setPaused,\n    sceneJSON, setSceneJSON,\n    events,\n    sceneUtils,\n  ]);\n\n  return (<AppContext.Provider value={appContextValue}>{children}</AppContext.Provider>);\n};\n\nAppManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default AppManager;\n","import { useContext } from 'react';\nimport { AppContext } from '../managers/AppManager';\n\nexport default function useAppContext() {\n  return useContext(AppContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  createContext, useCallback, useEffect, useMemo, useState,\n} from 'react';\n\nimport moment from 'moment';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const PeersContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let peersContextValue = {};\n\nconst PeersManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n\n  // Peer Connections\n  const [PeerRegistry] = useState(() => new Map());\n\n  const findPeer = useCallback((id) => PeerRegistry.get(id), [PeerRegistry]);\n\n  const registerPeer = useCallback((identifier, ref) => {\n    let oldRef = {};\n    if (oldRef !== undefined) {\n      oldRef = findPeer(identifier);\n      PeerRegistry.delete(identifier);\n    }\n\n    const newRef = {\n      ...oldRef,\n      ...ref,\n    };\n\n    // register by id\n    PeerRegistry.set(identifier, newRef);\n\n    publish('peer-modified', newRef);\n    publish('peers-list-changed', 'add');\n  }, [PeerRegistry, findPeer, publish]);\n\n  const unregisterPeer = useCallback((identifier) => {\n    // unregister by id\n    PeerRegistry.delete(identifier);\n    publish('peers-list-changed', 'remove');\n  }, [PeerRegistry, publish]);\n\n  const getPeersArray = useCallback(\n    () => Array.from(PeerRegistry.keys()).map((id) => PeerRegistry.get(id)),\n    [PeerRegistry],\n  );\n\n  // prune old connections\n  useEffect(() => {\n    Array.from(PeerRegistry).forEach((p) => {\n      const [id, ref] = p;\n      const freshness = moment().diff(ref.lastSeen, 'seconds');\n      if (freshness > 0) {\n        unregisterPeer(id, ref);\n      }\n    });\n  }, [PeerRegistry, unregisterPeer]);\n\n  const peerRegistryUtils = useMemo(\n    () => ({\n      findPeer,\n      registerPeer,\n      unregisterPeer,\n      getPeersArray,\n    }),\n    [\n      findPeer,\n      registerPeer,\n      unregisterPeer,\n      getPeersArray,\n    ],\n  );\n\n  peersContextValue = useMemo(() => ({\n    PeerRegistry,\n    ...peerRegistryUtils,\n  }), [\n    PeerRegistry,\n    peerRegistryUtils,\n  ]);\n\n  return (\n    <PeersContext.Provider value={peersContextValue}>\n      {children}\n    </PeersContext.Provider>\n  );\n};\n\nPeersManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default PeersManager;\n","import { useContext } from 'react';\nimport { PeersContext } from '../managers/PeersManager';\n\nexport default function useConnectionsContext() {\n  return useContext(PeersContext);\n}\n","import niceware from 'niceware';\n\nexport default function GenerateRoomId() {\n  return niceware.generatePassphrase(6).reduce((accumulator, currentValue) => `${accumulator}-${currentValue}`);\n}\n","/* eslint-disable no-undef */\n\nimport { isHost } from './utils/userCheck';\n\n// Save data in local or session storage.\nconst persistData = (key, data) => {\n  if (isHost()) {\n    // Hosts remember room details between sessions\n    localStorage.setItem(key, JSON.stringify(data));\n  } else {\n    // Peers will forget room details when a tab / window is closed\n    sessionStorage.setItem(key, JSON.stringify(data));\n  }\n};\n\nconst restoreData = (key) => {\n  if (isHost()) {\n    return JSON.parse(localStorage.getItem(key));\n  }\n\n  return JSON.parse(sessionStorage.getItem(key));\n};\n\nexport {\n  persistData,\n  restoreData,\n};\n","/* eslint-disable no-console */\n/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable no-undef */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useRef, useEffect, createContext, useState, useMemo, useCallback,\n} from 'react';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { joinRoom, selfId } from 'trystero';\nimport useAppContext from '../contexts/useAppContext';\nimport usePeersContext from '../contexts/usePeersContext';\n\nimport generateRoomId from '../utils/generateRoomId';\nimport { restoreData, persistData } from '../PersistantStorage';\n\nimport EventsManager from './EventsManager';\nimport { isHost } from '../utils/userCheck';\n\nexport const ConnectionsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let connectionsContextValue = {};\n\nconst ConnectionsManager = ({ children }) => {\n  const { subscribe, publish, setSceneJSON } = useAppContext();\n\n  const { findPeer } = usePeersContext();\n\n  const [events] = useState(() => EventsManager());\n\n  const [connectionType] = useState((isHost()) ? 'host' : 'peer');\n\n  const [room, setRoom] = useState(null);\n  const [roomInfo, setRoomInfo] = useState(null);\n\n  // Pull from local storage\n  const me = restoreData('me');\n\n  const [ConnectionRegistry] = useState(() => new Map());\n\n  const isMounted = useRef(false);\n\n  const getMe = useCallback(\n    () => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)).filter((p) => p.isMe === true)[0],\n    [ConnectionRegistry],\n  );\n\n  const getHost = useCallback(\n    () => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)).filter((p) => p.isHost === true)[0],\n    [ConnectionRegistry],\n  );\n\n  const getByUUID = useCallback(\n    (uuid) => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)).filter((p) => p.uuid === uuid)[0],\n    [ConnectionRegistry],\n  );\n\n  const updateConnectionInfo = useCallback((uuid, ref) => {\n    let oldRefs = {};\n\n    if (ConnectionRegistry.has(ref.connectionId)) {\n      oldRefs = {\n        ...oldRefs,\n        ...ConnectionRegistry.get(ref.connectionId),\n      };\n      ConnectionRegistry.delete(ref.connectionId);\n    }\n\n    if (ConnectionRegistry.has(uuid)) {\n      oldRefs = {\n        ...oldRefs,\n        ...ConnectionRegistry.get(uuid),\n      };\n      ConnectionRegistry.delete(uuid);\n    }\n\n    const newRef = { ...oldRefs, ...ref };\n\n    ConnectionRegistry.set(uuid, newRef);\n    // addPeer(uuid, newRef);\n\n    if (newRef.isMe) {\n      persistData('me', newRef);\n      publish('me-modified', newRef);\n    }\n\n    if (newRef.isHost) {\n      publish('host-modified', newRef);\n    }\n\n    persistData('connections', Array.from(ConnectionRegistry));\n    publish('connection-modified', newRef);\n  }, [ConnectionRegistry, publish]);\n\n  const findConnection = useCallback((id) => ConnectionRegistry.get(id), [ConnectionRegistry]);\n\n  const registerConnection = useCallback((identifier, ref) => {\n    // register by id\n    ConnectionRegistry.set(identifier, ref);\n\n    if (ref.isMe) {\n      persistData('me', ref);\n      publish('me-modified', ref);\n    }\n\n    if (ref.isHost) {\n      publish('host-modified', ref);\n    }\n\n    persistData('connections', Array.from(ConnectionRegistry));\n\n    publish('connections-list-changed', 'add');\n    publish('connection-modified', ref);\n  }, [ConnectionRegistry, publish]);\n\n  const unregisterConnection = useCallback((identifier) => {\n    // unregister by id\n    ConnectionRegistry.delete(identifier);\n    publish('connections-list-changed', 'remove');\n  }, [ConnectionRegistry, publish]);\n\n  const getConnectionsArray = useCallback(\n    () => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)),\n    [ConnectionRegistry],\n  );\n\n  const getRoomInfo = useCallback(() => roomInfo, [roomInfo]);\n\n  const connectionRegistryUtils = useMemo(\n    () => ({\n      updateConnectionInfo,\n      findConnection,\n      registerConnection,\n      unregisterConnection,\n      getConnectionsArray,\n      getRoomInfo,\n      getMe,\n      getHost,\n      getByUUID,\n    }),\n    [\n      updateConnectionInfo,\n      findConnection,\n      getConnectionsArray,\n      registerConnection,\n      unregisterConnection,\n      getRoomInfo,\n      getMe,\n      getHost,\n      getByUUID,\n    ],\n  );\n\n  // Store props for context provider\n  connectionsContextValue = useMemo(() => ({\n    ConnectionRegistry,\n    ...connectionRegistryUtils,\n    connectionType,\n    room,\n    setRoom,\n    roomInfo,\n    setRoomInfo,\n  }), [\n    ConnectionRegistry,\n    connectionRegistryUtils,\n    connectionType,\n    room, setRoom,\n    roomInfo, setRoomInfo,\n  ]);\n\n  // Find, create, and save details abount a room\n  useEffect(() => {\n    if (roomInfo === null) { // There is no roomInfo, create it\n      let info = restoreData('roomInfo');\n\n      if (info === null) { // There is no stored state, make it up\n        if (isHost()) { // If there is no connection url, you're the host\n          info = {\n            id: generateRoomId(),\n          };\n        } else {\n          info = {\n            id: window.location.hash.substr(1),\n            url: `${window.location.href}#${window.location.hash.substr(1)}`,\n          };\n        }\n      }\n\n      // Save / pass down room info\n      persistData('roomInfo', info);\n      setRoomInfo(info);\n    }\n  }, [roomInfo, setRoomInfo]);\n\n  // Save roomInfo updates to localstorage\n  useEffect(() => {\n    if (roomInfo !== null) {\n      persistData('roomInfo', roomInfo);\n      publish('room-modified', roomInfo);\n    }\n  }, [roomInfo, publish]);\n\n  // Create peer to peer room\n  useEffect(() => {\n    if (room === null && roomInfo !== null) {\n      setRoom(joinRoom({ appId: `Reckless Technology room ${roomInfo.id}` }, roomInfo.id));\n    }\n  }, [setRoom, room, roomInfo]);\n\n  // Create ref to access me props\n  const meRef = useMemo(() => ({\n    status: 'connected',\n    connectionId: selfId,\n    uuid: me !== null ? me.uuid : uuidv4(),\n    name: me !== null ? me.name : `new ${connectionType}`,\n    isMe: true,\n    isHost: (connectionType === 'host'),\n    mode: 'view',\n    lastSeen: Date.now(),\n  }), [me, connectionType]);\n\n  const pingMe = useCallback(() => {\n    // if (room !== null) {\n    //   console.log(`took ${room.ping(meRef.connectionId)}ms`);\n    // }\n  }, []);\n\n  useEffect(() => {\n    if (room !== null) {\n      const [sendAnnounce, getAnnounce] = room.makeAction('announce');\n      const [sendData, getData] = room.makeAction('scene');\n\n      // If someone connects to host\n      const connectionJoin = (id) => {\n        // Create ref to access connection props\n        const connectionRef = {\n          status: 'connected',\n          connectionId: id,\n          name: 'new connection',\n          isMe: false,\n          isHost: false,\n          mode: 'view',\n          lastSeen: Date.now(),\n        };\n\n        // Add to connection registry\n        registerConnection(id, {\n          ...connectionRef,\n          getData,\n          sendData,\n          getAnnounce,\n          sendAnnounce,\n          ping: pingMe,\n        });\n\n        // Send your info to connected peers\n        sendAnnounce({\n          connectionId: meRef.connectionId,\n          uuid: meRef.uuid,\n          name: meRef.name,\n          isHost: meRef.isHost,\n        });\n      };\n\n      room.onPeerJoin((id) => connectionJoin(id));\n\n      // Add me to registry\n      registerConnection(meRef.uuid, {\n        ...meRef,\n        getData,\n        sendData,\n        getAnnounce,\n        sendAnnounce,\n        ping: pingMe,\n      });\n\n      // Remove connection from registry if they leave the room\n      room.onPeerLeave((id) => unregisterConnection(id));\n\n      // Listen for commands\n      getData((data) => {\n        const peer = findPeer(data.uuid);\n        switch (data.type) {\n          default:\n            if (peer !== undefined && typeof peer.setData === 'function') {\n              peer.setData(data.payload);\n            }\n            break;\n          case 'shareScene':\n            setSceneJSON(data.payload);\n            publish('scene-changed', data.payload);\n            break;\n        }\n      });\n\n      // Listen for info about connection\n      getAnnounce(({\n        connectionId, uuid, name, isHost: host,\n      }) => {\n        updateConnectionInfo(uuid, {\n          connectionId, host, uuid, name, lastSeen: Date.now(),\n        });\n      });\n    }\n  }, [\n    events.subscribe,\n    events.unsubscribe,\n    meRef,\n    pingMe,\n    publish,\n    registerConnection,\n    room,\n    setSceneJSON,\n    unregisterConnection,\n    findConnection,\n    updateConnectionInfo,\n    findPeer,\n  ]);\n\n  // send updates to connections\n  const announceMeChanges = useCallback((connection) => {\n    if (isMounted.current && connection !== undefined) {\n      if (connection.isMe) {\n        if (typeof connection.sendAnnounce === 'function') {\n          connection.sendAnnounce({\n            connectionId: connection.connectionId,\n            uuid: connection.uuid,\n            name: connection.name,\n            isHost: connection.isHost,\n          });\n        }\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    if (meRef !== undefined) {\n      isMounted.current = true;\n      subscribe('me-modified', announceMeChanges);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, announceMeChanges, meRef]);\n\n  return (\n    <ConnectionsContext.Provider value={connectionsContextValue}>\n      {children}\n    </ConnectionsContext.Provider>\n  );\n};\n\nConnectionsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default ConnectionsManager;\n","import { useContext } from 'react';\nimport { ConnectionsContext } from '../managers/ConnectionsManager';\n\nexport default function useConnectionsContext() {\n  return useContext(ConnectionsContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Typography, Tooltip } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  roomName: {\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  },\n}));\n\nconst RoomNameView = ({\n  roomId,\n}) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Tooltip title=\"Room ID\" aria-label=\"Room ID\">\n      <Typography className={classes.roomName} variant=\"subtitle1\">{roomId}</Typography>\n    </Tooltip>\n  );\n};\n\nRoomNameView.whyDidYouRender = true;\n\nRoomNameView.propTypes = {\n  roomId: PropTypes.string.isRequired,\n};\n\nexport default memo(RoomNameView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomNameView from './view';\n\nconst RoomName = () => {\n  const { roomInfo } = useConnectionsContext();\n\n  if (roomInfo === null) { return null; }\n  return (\n    <RoomNameView {...{ roomId: roomInfo.id }} />\n  );\n};\n\nRoomName.whyDidYouRender = true;\n\nexport default RoomName;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport QRCode from 'react-qr-code';\n\nconst useStyles = makeStyles(() => ({\n  qrCode: {\n    width: '100%',\n    height: '100%',\n    display: 'block',\n    position: 'relative',\n\n  },\n}));\n\nconst QRView = ({\n  size,\n  url,\n}) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <QRCode size={size} className={classes.qrCode} value={url} />\n  );\n};\n\nQRView.whyDidYouRender = true;\n\nQRView.propTypes = {\n  size: PropTypes.number.isRequired,\n  url: PropTypes.string.isRequired,\n};\n\nexport default memo(QRView);\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  useEffect, useRef, useState, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItemIcon } from '@material-ui/core';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\nimport useAppContext from '../../contexts/useAppContext';\n\nimport RoomQRView from './view';\n\nconst useStyles = makeStyles(() => ({\n  qrContainer: {\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nconst RoomQR = () => {\n  const { subscribe } = useAppContext();\n  const { getRoomInfo } = useConnectionsContext();\n\n  const qrRef = useRef(null);\n  const [qrSize, setQrSize] = useState(0);\n\n  // Create local classes\n  const classes = useStyles();\n\n  useEffect(() => {\n    setQrSize(qrRef.current ? qrRef.current.offsetWidth : 0);\n  }, [qrRef]);\n\n  const [room, setRoom] = useState({});\n\n  const isMounted = useRef(false);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      const r = getRoomInfo();\n      if (r !== undefined) {\n        setRoom(r);\n      }\n    }\n  }, [setRoom, getRoomInfo]);\n\n  const updateRoom = useCallback(() => { // update data only when peer list is modified\n    if (isMounted.current) {\n      const r = getRoomInfo();\n      if (r !== undefined) {\n        setRoom(r);\n      }\n    }\n  }, [getRoomInfo, setRoom]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    subscribe('room-modified', updateRoom);\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, updateRoom]);\n\n  if (!room) { return null; }\n\n  return (\n    <ListItemIcon className={classes.qrContainer} ref={qrRef}>\n      <RoomQRView {...{\n        size: qrSize,\n        url: `${room.url}`,\n      }}\n      />\n    </ListItemIcon>\n  );\n};\n\nRoomQR.whyDidYouRender = true;\n\nexport default RoomQR;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { IconButton, Tooltip } from '@material-ui/core';\n\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nimport generateRoomId from '../../utils/generateRoomId';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    margin: '0px 27.66px',\n  },\n}));\n\nconst RoomRefreshIdButtonView = ({ setRoomInfo }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Tooltip title=\"Refresh Room ID\" aria-label=\"Refresh Room ID\">\n      <IconButton\n        className={classes.iconButton}\n        onClick={() => {\n          setRoomInfo({\n            id: generateRoomId(),\n          });\n        }}\n      >\n        <RefreshIcon />\n      </IconButton>\n    </Tooltip>\n  );\n};\n\nRoomRefreshIdButtonView.whyDidYouRender = true;\n\nRoomRefreshIdButtonView.propTypes = {\n  setRoomInfo: PropTypes.func.isRequired,\n};\n\nexport default memo(RoomRefreshIdButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomRefreshIdButtonView from './view';\n\nconst RoomRefreshIdButton = () => {\n  const { setRoomInfo } = useConnectionsContext();\n\n  return <RoomRefreshIdButtonView {...{ setRoomInfo }} />;\n};\n\nRoomRefreshIdButton.whyDidYouRender = true;\n\nexport default RoomRefreshIdButton;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { IconButton, Tooltip } from '@material-ui/core';\n\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    margin: '0px 27.66px',\n  },\n}));\n\nconst RoomCopyUrlButtonView = ({ url }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Tooltip title=\"Copy URL\">\n      <IconButton\n        className={classes.iconButton}\n        onClick={() => {\n          navigator.clipboard.writeText(url).then();\n        }}\n      >\n        <FileCopyIcon />\n      </IconButton>\n    </Tooltip>\n  );\n};\n\nRoomCopyUrlButtonView.whyDidYouRender = true;\n\nRoomCopyUrlButtonView.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\nexport default memo(RoomCopyUrlButtonView);\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomCopyUrlButtonView from './view';\n\nconst RoomCopyUrlButton = () => {\n  const { roomInfo } = useConnectionsContext();\n\n  if (roomInfo === null) { return null; }\n\n  return <RoomCopyUrlButtonView {...{ url: `${roomInfo.url}` }} />;\n};\n\nRoomCopyUrlButton.whyDidYouRender = true;\n\nexport default RoomCopyUrlButton;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Link, IconButton, Tooltip } from '@material-ui/core';\n\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    margin: '0px 27.66px',\n  },\n}));\n\nconst RoomOpenUrlButtonView = ({ url }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Link href={url} target=\"_blank\" rel=\"noopener\">\n      <Tooltip title=\"Open URL\" aria-label=\"Open URL\">\n        <IconButton className={classes.iconButton}>\n          <OpenInNewIcon />\n        </IconButton>\n      </Tooltip>\n    </Link>\n  );\n};\n\nRoomOpenUrlButtonView.whyDidYouRender = true;\n\nRoomOpenUrlButtonView.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\nexport default memo(RoomOpenUrlButtonView);\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomOpenUrlButtonView from './view';\n\nconst RoomOpenUrlButton = () => {\n  const { roomInfo } = useConnectionsContext();\n\n  if (roomInfo === null) { return null; }\n\n  return <RoomOpenUrlButtonView {...{ url: `${roomInfo.url}` }} />;\n};\n\nRoomOpenUrlButton.whyDidYouRender = true;\n\nexport default RoomOpenUrlButton;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport { memo } from 'react';\n\nimport React, {\n  ListSubheader, ListItem, List, Grid,\n} from '@material-ui/core';\n\nimport RoomName from '../RoomName';\nimport RoomQR from '../RoomQR';\nimport RoomRefreshIdButton from '../RoomRefreshIdButton';\nimport RoomCopyUrlButton from '../RoomCopyUrlButton';\nimport RoomOpenUrlButton from '../RoomOpenUrlButton';\n\nimport { isHost } from '../../utils/userCheck';\n\nconst RoomInfo = () => (\n  <List>\n    <ListSubheader>Room</ListSubheader>\n    <ListItem>\n      <RoomQR />\n    </ListItem>\n    <ListItem>\n      <RoomName />\n    </ListItem>\n    <ListItem>\n      <Grid container>\n        <Grid item xs={4}>\n          {(isHost()) ? <RoomRefreshIdButton /> : null}\n        </Grid>\n        <Grid item xs={4}>\n          <RoomCopyUrlButton />\n        </Grid>\n        <Grid item xs={4}>\n          <RoomOpenUrlButton />\n        </Grid>\n      </Grid>\n    </ListItem>\n  </List>\n);\n\nRoomInfo.whyDidYouRender = true;\n\nexport default memo(RoomInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List, ListItem } from '@material-ui/core';\n\nimport RoomInfo from '../RoomInfo';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'block',\n    width: '100%',\n  },\n}));\n\nconst RoomMenu = () => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <ListItem\n      role=\"tabpanel\"\n      id={`full-width-tabpanel-${0}`}\n      aria-labelledby={`full-width-tab-${0}`}\n    >\n      <List className={classes.root}>\n        <RoomInfo />\n      </List>\n    </ListItem>\n  );\n};\n\nRoomMenu.whyDidYouRender = true;\n\nexport default memo(RoomMenu);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { ListItemAvatar, Avatar } from '@material-ui/core';\n\nconst PeerAvatar = ({ peerInfo }) => (\n  <ListItemAvatar>\n    <Avatar alt={peerInfo.isHost ? 'host' : 'Peer'} src=\"\" />\n  </ListItemAvatar>\n);\n\nPeerAvatar.whyDidYouRender = true;\n\nPeerAvatar.propTypes = {\n  peerInfo: PropTypes.shape({\n    isHost: PropTypes.bool.isRequired,\n  }).isRequired,\n};\n\nexport default memo(PeerAvatar);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { ListItemText } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  multiline: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n}));\n\nconst PeerNameView = ({ primary, secondary }) => {\n  const classes = useStyles();\n  return (\n    <ListItemText\n      classes={{\n        multiline: classes.multiline,\n      }}\n      primary={primary}\n      secondary={secondary}\n    />\n  );\n};\n\nPeerNameView.whyDidYouRender = true;\n\nPeerNameView.propTypes = {\n  primary: PropTypes.string.isRequired,\n  secondary: PropTypes.string.isRequired,\n};\n\nexport default memo(PeerNameView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { TextField } from '@material-ui/core';\n\nconst PeerNameView = ({ value, onNameUpdate }) => (\n  <TextField id=\"standard-basic\" label=\"Edit name\" value={value} onChange={onNameUpdate} />\n);\n\nPeerNameView.whyDidYouRender = true;\n\nPeerNameView.propTypes = {\n  value: PropTypes.string.isRequired,\n  onNameUpdate: PropTypes.func.isRequired,\n};\n\nexport default memo(PeerNameView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport PeerNameView from './view';\nimport PeerNameEdit from './edit';\n\nconst PeerName = ({ peerInfo, onNameUpdate }) => {\n  switch (peerInfo.mode) {\n    default:\n    case 'waiting':\n      return <PeerNameView {...{ primary: '...loading', secondary: '' }} />;\n    case 'view':\n      return <PeerNameView {...{ primary: `${peerInfo.name} (${peerInfo.uuid})`, secondary: `${(peerInfo.isMe) ? 'me' : 'peer'} (${peerInfo.connectionId})` }} />;\n    case 'edit':\n      return <PeerNameEdit {...{ value: peerInfo.name, onNameUpdate }} />;\n  }\n};\n\nPeerName.whyDidYouRender = true;\n\nexport default PeerName;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { ListItemSecondaryAction } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  toolbarButtons: {\n    padding: '15px 0 15px 15px',\n    right: 0,\n    background: `linear-gradient(to left, ${theme.palette.background.paper} 90%, rgba(0,0,0,0))`,\n  },\n}));\n\nconst PeerToolbar = ({ children }) => {\n  const classes = useStyles();\n  return (\n    <ListItemSecondaryAction className={classes.toolbarButtons}>\n      {children}\n    </ListItemSecondaryAction>\n  );\n};\n\nexport default PeerToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { IconButton, Tooltip } from '@material-ui/core';\n\nimport CreateIcon from '@material-ui/icons/Create';\nimport CheckIcon from '@material-ui/icons/Check';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    padding: '5px',\n    marginLeft: '5px',\n  },\n}));\n\nconst EditPeerNameButtonView = ({ peerInfo, updateConnectionInfo }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  switch (peerInfo.mode) {\n    default:\n    case 'view':\n      return (\n        <Tooltip title=\"Edit Name\" aria-label=\"Edit Name\">\n          <IconButton\n            className={classes.iconButton}\n            onClick={() => {\n              updateConnectionInfo(peerInfo.uuid, 'cancel', { mode: 'edit' });\n            }}\n          >\n            <CreateIcon />\n          </IconButton>\n        </Tooltip>\n      );\n    case 'edit':\n      return (\n        <div>\n          <Tooltip title=\"Cancel Save\" aria-label=\"Cancel Save\">\n            <IconButton\n              className={classes.iconButton}\n              onClick={() => {\n                updateConnectionInfo(peerInfo.uuid, 'cancel', { mode: 'view' });\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Save Name\" aria-label=\"Save Name\">\n            <IconButton\n              className={classes.iconButton}\n              onClick={() => {\n                updateConnectionInfo(peerInfo.uuid, 'save', { mode: 'view' });\n              }}\n            >\n              <CheckIcon />\n            </IconButton>\n          </Tooltip>\n        </div>\n      );\n  }\n};\n\nEditPeerNameButtonView.whyDidYouRender = true;\n\nEditPeerNameButtonView.propTypes = {\n  peerInfo: PropTypes.shape({\n    mode: PropTypes.string.isRequired,\n    uuid: PropTypes.string.isRequired,\n  }).isRequired,\n  updateConnectionInfo: PropTypes.func.isRequired,\n};\n\nexport default memo(EditPeerNameButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport EditPeerNameButtonView from './view';\n\nconst EditPeerNameButton = ({ peerInfo, updateConnectionInfo }) => (\n  <EditPeerNameButtonView {...{ peerInfo, updateConnectionInfo }} />\n);\n\nEditPeerNameButton.whyDidYouRender = true;\n\nEditPeerNameButton.propTypes = {\n  peerInfo: PropTypes.shape({}).isRequired,\n  updateConnectionInfo: PropTypes.func.isRequired,\n};\n\nexport default EditPeerNameButton;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  ListItem, Grid, List, Divider, Typography,\n} from '@material-ui/core';\n\nimport PeerAvatar from '../PeerAvatar';\nimport PeerName from '../PeerName';\nimport PeerToolbar from '../PeerToolbar';\n\nimport EditPeerNameButton from '../EditPeerNameButton';\nimport useAppContext from '../../contexts/useAppContext';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n    overflow: 'hidden',\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst HostInfo = () => {\n  const classes = useStyles();\n\n  const { updateConnectionInfo, getHost } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const [hostName, setHostName] = useState(null);\n  const [host, setHost] = useState(null);\n\n  const isMounted = useRef(false);\n\n  useEffect(() => { // update data on load\n    const h = getHost();\n    if (h !== undefined) {\n      setHost(h);\n      setHostName(h.name);\n    }\n  }, [getHost, setHost]);\n\n  const updateHost = useCallback(() => { // update data again when peer list is modified\n    if (isMounted.current) {\n      const h = getHost();\n      if (h !== undefined) {\n        setHost(h);\n        setHostName(h.name);\n      }\n    }\n  }, [getHost, setHost]);\n\n  useEffect(() => {\n    if (getHost !== undefined) {\n      isMounted.current = true;\n      subscribe('host-modified', updateHost);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, getHost, updateHost]);\n\n  const updateName = useCallback((e) => {\n    setHostName(e.currentTarget.value);\n  }, [setHostName]);\n\n  const updateHostInfo = useCallback((id, type, val) => {\n    switch (type) {\n      default:\n      case 'cancel':\n        updateConnectionInfo(id, val);\n        break;\n      case 'save':\n        updateConnectionInfo(id, {\n          ...val,\n          name: hostName,\n        });\n        break;\n    }\n  }, [updateConnectionInfo, hostName]);\n\n  if (host === null || hostName === null) { return null; }\n\n  return (\n    <ListItem className={classes.listItem}>\n      <Grid container spacing={0}>\n        <Grid item xs={12}>\n          <Typography className={classes.sectionTitle}>Host</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <List className={classes.list}>\n            <ListItem className={classes.listItem} alignItems=\"flex-start\">\n              <PeerAvatar {...{ peerInfo: host }} />\n              <PeerName {...{ peerInfo: { ...host, name: hostName }, onNameUpdate: updateName }} />\n              {(!host.isMe) ? null : (\n                <PeerToolbar>\n                  <EditPeerNameButton {...{\n                    peerInfo: host, updateConnectionInfo: updateHostInfo,\n                  }}\n                  />\n                </PeerToolbar>\n              )}\n            </ListItem>\n          </List>\n        </Grid>\n        <Grid item xs={12}>\n          <Divider />\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nHostInfo.whyDidYouRender = true;\n\nexport default memo(HostInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  ListItem, Grid, List, Divider, Typography,\n} from '@material-ui/core';\n\nimport PeerAvatar from '../PeerAvatar';\nimport PeerName from '../PeerName';\nimport PeerToolbar from '../PeerToolbar';\n\nimport EditPeerNameButton from '../EditPeerNameButton';\nimport useAppContext from '../../contexts/useAppContext';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n    overflow: 'hidden',\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst MeInfo = () => {\n  const classes = useStyles();\n\n  const { updateConnectionInfo, getMe } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const [meName, setMeName] = useState(null);\n  const [me, setMe] = useState(null);\n\n  const isMounted = useRef(false);\n\n  useEffect(() => { // update data on load\n    const m = getMe();\n    if (m !== undefined) {\n      setMe(m);\n      setMeName(m.name);\n    }\n  }, [getMe, setMe]);\n\n  const updateMe = useCallback(() => { // update data again when peer list is modified\n    if (isMounted.current) {\n      const h = getMe();\n      if (h !== undefined) {\n        setMe(h);\n        setMeName(h.name);\n      }\n    }\n  }, [getMe, setMe]);\n\n  useEffect(() => {\n    if (getMe !== undefined) {\n      isMounted.current = true;\n      subscribe('me-modified', updateMe);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [getMe, subscribe, updateMe]);\n\n  const updateName = useCallback((e) => {\n    setMeName(e.currentTarget.value);\n  }, [setMeName]);\n\n  const updateMeInfo = useCallback((id, type, val) => {\n    switch (type) {\n      default:\n      case 'cancel':\n        updateConnectionInfo(id, val);\n        break;\n      case 'save':\n        updateConnectionInfo(id, {\n          ...val,\n          name: meName,\n        });\n        break;\n    }\n  }, [updateConnectionInfo, meName]);\n\n  if (me === null || meName === null || me.isHost) { return null; }\n\n  return (\n    <ListItem className={classes.listItem}>\n      <Grid container spacing={0}>\n        <Grid item xs={12}>\n          <Typography className={classes.sectionTitle}>Me</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <List className={classes.list}>\n            <ListItem className={classes.listItem} alignItems=\"flex-start\">\n              <PeerAvatar {...{ peerInfo: me }} />\n              <PeerName {...{ peerInfo: { ...me, name: meName }, onNameUpdate: updateName }} />\n              {(!me.isMe) ? null : (\n                <PeerToolbar>\n                  <EditPeerNameButton {...{ peerInfo: me, updateConnectionInfo: updateMeInfo }} />\n                </PeerToolbar>\n              )}\n            </ListItem>\n          </List>\n        </Grid>\n        <Grid item xs={12}>\n          <Divider />\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nMeInfo.whyDidYouRender = true;\n\nexport default memo(MeInfo);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useState, useRef, useEffect,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  IconButton, Tooltip, Menu, MenuItem,\n} from '@material-ui/core';\n\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\n\nimport testJSON from '../../sceneDefinitions/TestScene.json';\nimport posenetJSON from '../../sceneDefinitions/PosenetScene.json';\nimport useAppContext from '../../contexts/useAppContext';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    padding: '5px',\n    marginLeft: '5px',\n    position: 'relative',\n  },\n  sceneMenu: {\n    left: 100,\n  },\n}));\n\nconst ShareScenePeerButtonView = ({ me, peerInfo }) => {\n  const { sceneJSON } = useAppContext();\n  const buttonRef = useRef(null);\n\n  // Create local classes\n  const classes = useStyles();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  useEffect(() => {\n    if (buttonRef.current !== undefined) {\n      setAnchorEl(buttonRef.current);\n    }\n  }, [buttonRef, setAnchorEl]);\n\n  const handleClick = () => {\n    setMenuOpen(true);\n  };\n\n  const handleClose = (e) => {\n    const { menuValue } = e.currentTarget.dataset;\n    let json = {};\n    switch (menuValue) {\n      default:\n      case 'my':\n        json = sceneJSON;\n        break;\n      case 'test':\n        json = testJSON;\n        break;\n      case 'posenet':\n        json = posenetJSON;\n        break;\n    }\n    if (typeof peerInfo.sendData === 'function') {\n      peerInfo.sendData({\n        type: 'shareScene', payload: json, uuid: me.uuid, from: me.connectionId, timestamp: Date.now,\n      }, peerInfo.connectionId);\n    }\n    setMenuOpen(false);\n  };\n  return (\n    <div style={{ display: 'block' }}>\n      <Tooltip title={peerInfo.isMe ? 'Share Scene With Everyone' : 'Share Scene'} aria-label=\"Share Scene\">\n        <IconButton ref={buttonRef} className={classes.iconButton} onClick={handleClick}>\n          <OpenInBrowserIcon />\n        </IconButton>\n      </Tooltip>\n      <Menu\n        className={classes.sceneMenu}\n        id=\"scene-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={menuOpen}\n        onClose={handleClose}\n      >\n        <MenuItem data-menu-value=\"mine\" onClick={handleClose}>My Scene</MenuItem>\n        <MenuItem data-menu-value=\"test\" onClick={handleClose}>Test Scene</MenuItem>\n        <MenuItem data-menu-value=\"posenet\" onClick={handleClose}>Posenet</MenuItem>\n      </Menu>\n    </div>\n  );\n};\n\nShareScenePeerButtonView.whyDidYouRender = true;\n\nexport default memo(ShareScenePeerButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport ShareScenePeerButtonView from './view';\n\nconst ShareScenePeerButton = ({ peerInfo }) => {\n  const { subscribe } = useAppContext();\n  const { getMe } = useConnectionsContext();\n\n  const [me, setMe] = useState({});\n\n  const isMounted = useRef(false);\n\n  useEffect(() => {\n    const m = getMe();\n    if (m !== undefined) {\n      setMe(m);\n    }\n  }, [setMe, getMe]);\n\n  const updateMe = useCallback(() => { // update data only when peer list is modified\n    if (isMounted.current) {\n      const m = getMe();\n      if (m !== undefined) {\n        setMe(m);\n      }\n    }\n  }, [getMe, setMe]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    subscribe('me-modified', updateMe);\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, updateMe]);\n\n  if (!me) { return null; }\n\n  return <ShareScenePeerButtonView {...{ me, peerInfo }} />;\n};\n\nShareScenePeerButton.whyDidYouRender = true;\n\nShareScenePeerButton.propTypes = {\n  peerInfo: PropTypes.shape({}).isRequired,\n};\n\nexport default ShareScenePeerButton;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useState, useCallback, useEffect,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PeerName from '../PeerName';\nimport PeerToolbar from '../PeerToolbar';\nimport ShareScenePeerButton from '../ShareScenePeerButton';\nimport PeerAvatar from '../PeerAvatar';\nimport EditPeerNameButton from '../EditPeerNameButton';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n  },\n  buttons: {\n    right: 0,\n  },\n}));\n\nconst PeerInfo = ({ peerInfo }) => {\n  const classes = useStyles();\n\n  const { updateConnectionInfo } = useConnectionsContext();\n\n  const [peerName, setPeerName] = useState(null);\n\n  const updateName = useCallback((e) => {\n    setPeerName(e.currentTarget.value);\n  }, [setPeerName]);\n\n  const updateInfo = useCallback((id, type, val) => {\n    switch (type) {\n      default:\n      case 'cancel':\n        updateConnectionInfo(id, val);\n        break;\n      case 'save':\n        updateConnectionInfo(id, {\n          ...val,\n          name: peerName,\n        });\n        break;\n    }\n  }, [updateConnectionInfo, peerName]);\n\n  useEffect(() => {\n    if (peerInfo) {\n      setPeerName(peerInfo.name);\n    }\n  }, [peerInfo, setPeerName]);\n\n  if (!peerInfo || peerName === null) { return null; }\n\n  return (\n    <ListItem className={classes.listItem} alignItems=\"flex-start\">\n      <PeerAvatar {...{ peerInfo }} />\n      <PeerName {...{ peerInfo: { ...peerInfo, name: peerName }, onNameUpdate: updateName }} />\n      <PeerToolbar>\n        {(!peerInfo.isMe)\n          ? null : <EditPeerNameButton {...{ peerInfo, updateConnectionInfo: updateInfo }} />}\n        {(peerInfo.isHost) ? null : <ShareScenePeerButton {...{ peerInfo }} /> }\n      </PeerToolbar>\n    </ListItem>\n  );\n};\n\nPeerInfo.whyDidYouRender = true;\n\nexport default memo(PeerInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  List, ListItem, Grid, Typography,\n} from '@material-ui/core';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\nimport useAppContext from '../../contexts/useAppContext';\n\nimport PeerInfo from '../PeerInfo';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst PeersList = () => {\n  const { getConnectionsArray } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const classes = useStyles();\n\n  const [connections, setConnections] = useState([]);\n\n  const isMounted = useRef(false);\n\n  const updateConnections = useCallback(() => { // update data again when peer list is modified\n    if (isMounted.current) {\n      const peer = getConnectionsArray();\n      if (peer !== undefined && isMounted.current) {\n        setConnections(peer.filter((p) => (!p.isMe && !p.isHost)));\n      }\n    }\n  }, [getConnectionsArray, setConnections]);\n\n  useEffect(() => { // update data on load\n    const peer = getConnectionsArray();\n    if (peer !== undefined) {\n      isMounted.current = true;\n      setConnections(peer.filter((p) => (!p.isMe && !p.isHost)));\n      subscribe('connection-modified', updateConnections);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [setConnections, getConnectionsArray, subscribe, updateConnections]);\n\n  if (connections.length === 0) { return null; }\n\n  return (\n    <ListItem className={classes.listItem}>\n      <Grid container spacing={0}>\n        <Grid item xs={12}>\n          <Typography className={classes.sectionTitle}>Peers</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <List className={classes.list}>\n            {connections.map((peer) => <PeerInfo key={peer.connectionId} peerInfo={peer} />)}\n          </List>\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nPeersList.whyDidYouRender = true;\n\nexport default PeersList;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List, ListItem } from '@material-ui/core';\n\nimport HostInfo from '../HostInfo';\nimport MeInfo from '../MeInfo';\nimport PeersList from '../PeersList';\n\nconst useStyles = makeStyles(() => ({\n  list: {\n    width: '100%',\n  },\n  listItem: {\n    paddingTop: 0,\n  },\n}));\n\nconst PeersInfo = () => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n\n    <ListItem className={classes.listItem}>\n      <List className={classes.list}>\n        <MeInfo />\n        <HostInfo />\n        <PeersList />\n      </List>\n    </ListItem>\n  );\n};\n\nPeersInfo.whyDidYouRender = true;\n\nexport default memo(PeersInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List, ListItem } from '@material-ui/core';\n\nimport PeersInfo from '../PeersInfo';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'block',\n    width: '100%',\n    padding: 0,\n  },\n  listItem: {\n    paddingTop: 0,\n  },\n}));\n\nconst PeersMenu = () => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <ListItem\n      role=\"tabpanel\"\n      id={`full-width-tabpanel-${0}`}\n      aria-labelledby={`full-width-tab-${0}`}\n      className={classes.listItem}\n    >\n      <List className={classes.root}>\n        <PeersInfo />\n      </List>\n    </ListItem>\n  );\n};\n\nPeersMenu.whyDidYouRender = true;\n\nexport default memo(PeersMenu);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { IconButton } from '@material-ui/core';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst InspectorCloseButtonView = ({ inspectorMenuOpen, setInspectorMenuOpen }) => (\n  <IconButton onClick={() => {\n    setInspectorMenuOpen(!inspectorMenuOpen);\n  }}\n  >\n    <CloseIcon />\n  </IconButton>\n);\n\nInspectorCloseButtonView.whyDidYouRender = true;\n\nInspectorCloseButtonView.propTypes = {\n  inspectorMenuOpen: PropTypes.bool.isRequired,\n  setInspectorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default memo(InspectorCloseButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport InspectorCloseButtonView from './view';\n\nimport useInspectorMenuContext from '../../contexts/useInspectorMenuContext';\n\nconst InspectorCloseButton = () => {\n  const { inspectorMenuOpen, setInspectorMenuOpen } = useInspectorMenuContext();\n\n  return <InspectorCloseButtonView {...{ inspectorMenuOpen, setInspectorMenuOpen }} />;\n};\n\nInspectorCloseButton.whyDidYouRender = true;\n\nexport default InspectorCloseButton;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport InspectorCloseButton from '../InspectorCloseButton';\n\nconst useStyles = makeStyles((theme) => ({\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-start',\n  },\n}));\n\nconst InspectorToolbarView = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.drawerHeader}>\n      <InspectorCloseButton />\n      <Typography variant=\"h6\" className={classes.title}>\n        Inspector\n      </Typography>\n    </div>\n  );\n};\n\nInspectorToolbarView.whyDidYouRender = true;\n\nexport default InspectorToolbarView;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport InspectorToolbarView from './view';\n\nconst InspectorToolbar = () => <InspectorToolbarView />;\n\nInspectorToolbar.whyDidYouRender = true;\n\nexport default InspectorToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  Drawer, Divider, Tabs, Tab,\n} from '@material-ui/core';\n\nimport RoomMenu from '../../RoomMenu';\nimport PeersMenu from '../../PeersMenu';\nimport InspectorToolbar from '../../InspectorToolbar';\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    transition: theme.transitions.create('height', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    height: (props) => (`calc(100% - ${(props.editorMenuOpen ? props.editorMenuHeight : 0)}px)`),\n    width: (props) => (props.inspectorMenuWidth),\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1300,\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n}));\n\nconst InspectorView = ({\n  editorMenuOpen,\n  editorMenuHeight,\n  inspectorMenuWidth,\n  inspectorMenuOpen,\n  inspectorMenuTab,\n  setInspectorMenuTab,\n}) => {\n  const classes = useStyles({\n    editorMenuOpen,\n    editorMenuHeight,\n    inspectorMenuWidth,\n  });\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"persistent\"\n      anchor=\"right\"\n      open={inspectorMenuOpen}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <InspectorToolbar />\n      <Divider />\n      <Tabs\n        value={inspectorMenuTab}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        onChange={(event, newValue) => setInspectorMenuTab(newValue)}\n        aria-label=\"disabled tabs example\"\n        variant=\"fullWidth\"\n      >\n        <Tab label=\"Room\" />\n        <Tab label=\"Peers\" />\n      </Tabs>\n      {inspectorMenuTab === 0 ? <RoomMenu /> : null}\n      {inspectorMenuTab === 1 ? <PeersMenu /> : null}\n    </Drawer>\n  );\n};\n\nInspectorView.whyDidYouRender = true;\n\nInspectorView.propTypes = {\n  editorMenuOpen: PropTypes.bool.isRequired,\n  editorMenuHeight: PropTypes.number.isRequired,\n  inspectorMenuWidth: PropTypes.number.isRequired,\n  inspectorMenuOpen: PropTypes.bool.isRequired,\n  inspectorMenuTab: PropTypes.number.isRequired,\n  setInspectorMenuTab: PropTypes.func.isRequired,\n};\n\nexport default memo(InspectorView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useEditorMenuContext from '../../../contexts/useEditorMenuContext';\nimport useInspectorMenuContext from '../../../contexts/useInspectorMenuContext';\n\nimport InspectorView from './view';\n\nconst Inspector = () => {\n  const { editorMenuOpen, editorMenuHeight } = useEditorMenuContext();\n  const {\n    inspectorMenuWidth,\n    inspectorMenuOpen,\n    setInspectorMenuOpen,\n    inspectorMenuTab,\n    setInspectorMenuTab,\n  } = useInspectorMenuContext();\n\n  return (\n    <InspectorView {...{\n      editorMenuOpen,\n      editorMenuHeight,\n      inspectorMenuWidth,\n      inspectorMenuOpen,\n      setInspectorMenuOpen,\n      inspectorMenuTab,\n      setInspectorMenuTab,\n    }}\n    />\n  );\n};\n\nInspector.whyDidYouRender = true;\n\nexport default Inspector;\n","/* eslint-disable import/prefer-default-export */\n\n// Take threejs JSON Object Scene format:\n// https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4\n// and converts it for use in React Flow\n// https://reactflow.dev/docs/\n\n// Default size of patches\nconst width = 150;\nconst height = 245;\n\n// Limit depth of parent / child render\nconst limit = 2;\n\nfunction dimensionsLookup(type) {\n  switch (type) {\n    default:\n      return [width, height];\n    case 'Orbit':\n    case 'Sinewave':\n      return [width, 100];\n  }\n}\n\nfunction typeLookup(props) {\n  switch (props.type) {\n    default:\n      return 'threeObj';\n    case 'Scene':\n      return props.type;\n    case 'Orbit':\n    case 'Sinewave':\n      return 'generator';\n    case 'peer':\n      return 'peer';\n  }\n}\n\n// Build object for React Flow\nfunction makeFlowProps(props, parents, hidden, hideChildren, type) {\n  return ({\n    type,\n    id: `${props.uuid}`,\n    data: {\n      ...props,\n      parents,\n      width: dimensionsLookup(type)[0],\n      height: dimensionsLookup(type)[1],\n      label: props.name,\n      isChildHidden: hideChildren,\n    },\n    isHidden: hidden,\n    parents,\n    children: [],\n  });\n}\n\n// Recursive. Traverses 3d scene and makes a patch for each object.\nfunction sceneGraphToFlow(children, parents, level) {\n  const nextLevel = level + 1;\n  if (children === undefined || children.length === 0) {\n    return [];\n  }\n  return children.map((c) => ([\n    {\n      ...makeFlowProps(c, parents, (level > limit), (level + 1 > limit), typeLookup(c)),\n      children: sceneGraphToFlow(c.children, c.uuid, nextLevel),\n    },\n    ...sceneGraphToFlow(c.children, [...parents, c.uuid], nextLevel),\n  ])).flat();\n}\n\nfunction sceneConnectionsToFlow(children) {\n  return children.filter((c) => (!c.isHidden && c.parents.length > 0)).map((c) => ({\n    id: `${c.id}-parent-${c.parents[c.parents.length - 1]}-set-children`,\n    type: 'customLineage',\n\n    data: {\n      ...c,\n      label: c.uuid,\n    },\n\n    source: `${c.id}`,\n    sourceHandle: `${c.id}-parent`,\n\n    target: `${c.parents[c.parents.length - 1]}`,\n    targetHandle: `${c.parents[c.parents.length - 1]}-set-children`,\n\n    animated: false,\n  }));\n}\n\nfunction connectionsToFlow(rtScene) {\n  return rtScene.connections.map((c) => ({\n    id: `${c.uuid}_connection`,\n    type: 'custom',\n\n    source: `${c.from}`,\n    sourceHandle: `${c.from}-${c.fromProp}`,\n\n    target: `${c.to}`,\n    targetHandle: `${c.to}-set-${c.toProp}`,\n\n    animated: true,\n  }));\n}\n\nfunction generatorsToFlow(rtScene) {\n  return rtScene.generators.map((props) => makeFlowProps(props, 'Scene', false, false, 'generator'));\n}\n\nfunction peersToFlow(rtScene) {\n  return rtScene.peers.map((props) => makeFlowProps(props, 'Scene', false, false, 'peer'));\n}\n\nfunction devicesToFlow(rtScene) {\n  return rtScene.devices.map((props) => makeFlowProps(props, 'Scene', false, false, 'device'));\n}\n\nfunction transformsToFlow(rtScene) {\n  return rtScene.transforms.map((props) => makeFlowProps(props, 'Scene', false, false, 'transform'));\n}\n\nfunction rtSceneToFlow(rtScene) {\n  return [\n    ...peersToFlow(rtScene),\n    ...devicesToFlow(rtScene),\n\n    ...generatorsToFlow(rtScene),\n    ...transformsToFlow(rtScene),\n\n    ...connectionsToFlow(rtScene),\n\n    // regular three.js scene graph\n    ...sceneGraphToFlow([rtScene.object], [], 1),\n    ...sceneConnectionsToFlow(sceneGraphToFlow([rtScene.object], [], 1)),\n\n  ];\n}\n\nexport {\n  rtSceneToFlow,\n};\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  ListItem, ListItemText, ListItemIcon, Tooltip,\n} from '@material-ui/core';\n\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport MouseIcon from '@material-ui/icons/Mouse';\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\nimport SpeakerIcon from '@material-ui/icons/Speaker';\nimport GraphicEqIcon from '@material-ui/icons/GraphicEq';\nimport FilterTiltShiftIcon from '@material-ui/icons/FilterTiltShift';\nimport PersonIcon from '@material-ui/icons/Person';\nimport EmojiObjectsIcon from '@material-ui/icons/EmojiObjects';\nimport ImageIcon from '@material-ui/icons/Image';\nimport FunctionsIcon from '@material-ui/icons/Functions';\nimport GridOnIcon from '@material-ui/icons/GridOn';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px 10px 10px',\n  },\n  propIcon: {\n    minWidth: '30px',\n  },\n}));\n\nconst typeIcon = (type) => {\n  if (type.toLowerCase().includes('light')) {\n    return <EmojiObjectsIcon />;\n  }\n  switch (type.toLowerCase()) {\n    default:\n      return <FilterTiltShiftIcon />;\n    case 'group':\n      return <FilterNoneIcon />;\n    case 'generator':\n      return <GraphicEqIcon />;\n    case 'peer':\n      return <PersonIcon />;\n    case 'device':\n      return <SpeakerIcon />;\n    case 'mesh':\n      return <GridOnIcon />;\n    case 'scene':\n      return <ImageIcon />;\n    case 'transform':\n      return <FunctionsIcon />;\n    case 'mouse':\n      return <MouseIcon />;\n    case 'keyboard':\n      return <KeyboardIcon />;\n  }\n};\n\nconst PatchDetails = ({ name, type, uuid }) => {\n  const classes = useStyles();\n\n  return (\n    <ListItem className={classes.propItem}>\n      <ListItemIcon className={classes.propIcon}>\n        <Tooltip title={type} aria-label={type}>{typeIcon(type)}</Tooltip>\n      </ListItemIcon>\n      <Tooltip title={uuid} aria-label={uuid}>\n        <ListItemText\n          primary={name}\n        />\n      </Tooltip>\n    </ListItem>\n  );\n};\n\nPatchDetails.propTypes = {\n  name: PropTypes.string.isRequired,\n  uuid: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nexport default memo(PatchDetails);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { Handle } from 'react-flow-renderer';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Tooltip } from '@material-ui/core';\n\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles(() => ({\n  handle: {\n    width: '10px',\n    height: '10px',\n    position: 'relative',\n    margin: 0,\n    padding: 0,\n  },\n  handleLeft: {\n    float: 'left',\n    left: '-10px',\n    borderLeft: 'none',\n    background: '#333',\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n  },\n  handleRight: {\n    float: 'right',\n    right: '-10px',\n    borderRight: 'none',\n    background: '#333',\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n}));\n\nconst OutputHandle = ({ uuid, propName }) => {\n  const classes = useStyles();\n\n  return (\n    <Tooltip title={`${uuid}-${propName}`} aria-label={propName}>\n      <div>\n        <Handle\n          type=\"source\"\n          position=\"right\"\n          id={`${uuid}-${propName}`}\n      // isValidConnection={(connection) => { console.log(connection); return true}}\n      // onConnect={(params) => { console.log('handle onConnect', params); }}\n          className={clsx(classes.handle, classes.handleRight)}\n        />\n      </div>\n    </Tooltip>\n  );\n};\n\nOutputHandle.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default OutputHandle;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { Handle } from 'react-flow-renderer';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Tooltip } from '@material-ui/core';\n\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles(() => ({\n  handle: {\n    width: '10px',\n    height: '10px',\n    position: 'relative',\n    margin: 0,\n    padding: 0,\n  },\n  handleLeft: {\n    float: 'left',\n    left: '-10px',\n    borderLeft: 'none',\n    background: '#333',\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n  },\n  handleRight: {\n    float: 'right',\n    right: '-10px',\n    borderRight: 'none',\n    background: '#333',\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n}));\n\nconst InputHandle = ({ uuid, propName }) => {\n  const classes = useStyles();\n\n  return (\n    <Tooltip title={`${uuid}-set-${propName}`} aria-label={`set ${propName}`}>\n      <div>\n        <Handle\n          type=\"target\"\n          position=\"left\"\n          id={`${uuid}-set-${propName}`}\n      // isValidConnection={(connection) => { console.log(connection); return true}}\n      // onConnect={(params) => { console.log('handle onConnect', params); }}\n          className={clsx(classes.handle, classes.handleLeft)}\n        />\n      </div>\n    </Tooltip>\n  );\n};\n\nInputHandle.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default InputHandle;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Typography, Grid } from '@material-ui/core';\n\nimport OutputHandle from '../OutputHandle';\nimport InputHandle from '../InputHandle';\n\nconst useStyles = makeStyles(() => ({\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n}));\n\nconst ParentChildProp = ({\n  // eslint-disable-next-line no-unused-vars\n  type, uuid, children, isChildHidden,\n}) => {\n  const classes = useStyles();\n  return (\n    <Grid container className={classes.propGrid}>\n      <Grid item xs={12}>\n        <Typography className={classes.propText}>{`Children (${children ? children.length : 0}) ${type !== 'Scene' ? '| Parent' : ''}`}</Typography>\n      </Grid>\n      <Grid item xs={1}>\n        <InputHandle {...{ uuid, propName: 'children' }} />\n      </Grid>\n      <Grid item xs={10}>\n        <Typography className={classes.propText}>&nbsp;</Typography>\n      </Grid>\n      <Grid item xs={1}>\n        {type !== 'Scene' ? <OutputHandle {...{ uuid, propName: 'parent' }} /> : null}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ParentChildProp;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: (props) => (props.width),\n    backgroundColor: '#555',\n    border: '1px solid white',\n    borderRadius: '10px',\n    paddingBottom: 32,\n    boxShadow: '5px 5px 5px rgba(0,0,0,0.8)',\n  },\n}));\n\nconst PatchRoot = ({ children, width }) => {\n  const classes = useStyles({ width });\n\n  return (\n    <List className={classes.root}>\n      {children}\n    </List>\n  );\n};\n\nexport default PatchRoot;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PatchDetails from '../shared/PatchDetails/index';\n\nimport ParentChildProp from '../shared/ParentChildPro/index';\nimport PatchRoot from '../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n}));\n\nconst ScenePatch = ({ data }) => {\n  const {\n    uuid, label, type, width, children, isChildHidden,\n  } = data;\n  const classes = useStyles();\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type: 'Scene' }} />\n      <ListItem className={classes.propItem}>\n        <ParentChildProp {...{\n          isChildHidden, type, uuid, children,\n        }}\n        />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default ScenePatch;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Typography, Grid, ListItem } from '@material-ui/core';\n\nimport InputHandle from '../InputHandle';\nimport OutputHandle from '../OutputHandle';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n    oveflow: 'hidden',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n    textTransform: 'capitalize',\n  },\n}));\n\nconst PropListItemView = ({\n  children, uuid, propName, disableInput, disableOutput,\n}) => {\n  const classes = useStyles();\n  return (\n    <ListItem className={classes.propItem}>\n      <Grid container className={classes.propGrid}>\n        <Grid item xs={12}>\n          <Typography className={classes.propText}>{propName}</Typography>\n        </Grid>\n        <Grid item xs={1}>\n          {disableInput === false ? <InputHandle {...{ uuid, propName }} /> : null}\n        </Grid>\n        <Grid item xs={10}>\n          {children}\n        </Grid>\n        <Grid item xs={1}>\n          {disableOutput === false ? <OutputHandle {...{ uuid, propName }} /> : null}\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nPropListItemView.whyDidYouRender = false;\n\nexport default memo(PropListItemView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport PropListItemView from './view';\n\nconst PropListItem = ({\n  children, uuid, propName, disableInput, disableOutput,\n}) => (\n  <PropListItemView {...{\n    uuid, propName, disableInput, disableOutput,\n  }}\n  >\n    {children}\n  </PropListItemView>\n);\n\nPropListItem.whyDidYouRender = false;\n\nexport default PropListItem;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useEffect, createContext, useMemo, useState, useCallback,\n} from 'react';\nimport useAppContext from '../contexts/useAppContext';\n\nexport const ThreeObjectsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let threeObjectsContextValue = {};\n\nconst ThreeObjectsManager = ({\n  children,\n}) => {\n  const { subscribe, publish } = useAppContext();\n  const [ThreeObjectRegistry] = useState(() => new Map());\n  const [ThreeObjectRegistryByName] = useState(() => new Map());\n  const [ThreeObjectRegistryByPos] = useState(() => new Map());\n  const [ThreeObjectRegistryByType] = useState(() => new Map());\n\n  const exitScene = useCallback(() => {\n    if (ThreeObjectRegistry !== undefined) { ThreeObjectRegistry.clear(); }\n    if (ThreeObjectRegistryByName !== undefined) { ThreeObjectRegistryByName.clear(); }\n    if (ThreeObjectRegistryByPos !== undefined) { ThreeObjectRegistryByPos.clear(); }\n    if (ThreeObjectRegistryByType !== undefined) { ThreeObjectRegistryByType.clear(); }\n  }, [\n    ThreeObjectRegistry,\n    ThreeObjectRegistryByType,\n    ThreeObjectRegistryByName,\n    ThreeObjectRegistryByPos,\n  ]);\n  useEffect(() => subscribe('scene-exit', exitScene), [subscribe, exitScene]);\n\n  const threeObjectsRegistryUtils = useMemo(\n    () => ({\n      registerThreeObject(identifier, ref) {\n      // register by id\n        ThreeObjectRegistry.set(identifier, ref);\n        // register by name\n        ThreeObjectRegistryByName.set(ref.name, ref);\n        // register by position\n        const { position } = ref;\n        const pos = `${position.x},${position.y},${position.z}`;\n        const posList = ThreeObjectRegistryByPos.get(pos) || [];\n        posList.push(ref);\n        ThreeObjectRegistryByPos.set(pos, posList);\n\n        publish('threeObjects-list-changed', 'add');\n      },\n      unregisterThreeObject(identifier, ref) {\n      // unregister by id\n        ThreeObjectRegistry.delete(identifier);\n        // unregister by name\n        ThreeObjectRegistryByName.delete(ref.name);\n        // unregister by position\n        const { position } = ref;\n        const pos = `${position.x},${position.y},${position.z}`;\n        const posList = ThreeObjectRegistryByPos.get(pos);\n        posList.splice(posList.indexOf(ref), 1);\n\n        publish('threeObjects-list-changed', 'remove');\n      },\n      findThreeObject(id) {\n        return ThreeObjectRegistry.get(id);\n      },\n      findThreeObjectByName(name) {\n        return ThreeObjectRegistryByName.get(name);\n      },\n      findThreeObjectsByPos(x, y) {\n        return ThreeObjectRegistryByPos.get(`${x},${y}`).filter((obj) => !obj.disabled) || [];\n      },\n      findThreeObjectsByLayer(type) {\n        return ThreeObjectRegistryByType.get(type).filter((obj) => !obj.disabled) || [];\n      },\n      threeObjectNamesArray() {\n        return Array.from(ThreeObjectRegistryByName.keys());\n      },\n    }),\n    [\n      ThreeObjectRegistry,\n      ThreeObjectRegistryByType,\n      ThreeObjectRegistryByName,\n      ThreeObjectRegistryByPos,\n      publish,\n    ],\n  );\n\n  threeObjectsContextValue = useMemo(() => ({\n    ThreeObjectRegistryByName,\n    ...threeObjectsRegistryUtils,\n  }), [\n    ThreeObjectRegistryByName,\n    threeObjectsRegistryUtils]);\n\n  return (\n    <ThreeObjectsContext.Provider value={threeObjectsContextValue}>\n      {children}\n    </ThreeObjectsContext.Provider>\n  );\n};\n\nThreeObjectsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default ThreeObjectsManager;\n","import { useContext } from 'react';\nimport { ThreeObjectsContext } from '../managers/ThreeObjectsManager';\n\nexport default function useThreeObjectsContext() {\n  return useContext(ThreeObjectsContext);\n}\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(() => ({\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n}));\n\nconst PatchValueView = ({ value }) => {\n  const classes = useStyles();\n  if (typeof value === 'object') {\n    return <Typography className={classes.propText}>{(value.map((v, idx) => (`${v.toFixed(3)}${value.length - 1 !== idx ? ', ' : ''} `)))}</Typography>;\n  }\n  return <Typography className={classes.propText}>{`${value}`}</Typography>;\n};\n\nexport default memo(PatchValueView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useThreeObjectsContext from '../../../../contexts/useThreeObjectsContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findThreeObject } = useThreeObjectsContext();\n  const threeObj = findThreeObject(uuid);\n\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (threeObj !== undefined) {\n      isMounted.current = true;\n      threeObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [threeObj, propName, updateProp, uuid]);\n\n  if (threeObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  propName: PropTypes.string.isRequired,\n  uuid: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  AppBar, Toolbar, ButtonGroup, Button, Tooltip,\n} from '@material-ui/core';\n\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    flexGrow: 1,\n    // necessary for content to be below app bar\n    borderBottomLeftRadius: '10px',\n    borderBottomRightRadius: '10px',\n    overflow: 'hidden',\n    minHeight: '32px',\n  },\n  toolbar: {\n    padding: 0,\n    minHeight: '32px',\n  },\n  appbar: {\n    background: 'none',\n  },\n  group: {\n    width: '100%',\n\n  },\n  button: {\n    padding: '5px 16px',\n    minWidth: '48px',\n    borderRight: '1px solid rgba(255,255,255,0.05)',\n  },\n}));\n\n// eslint-disable-next-line no-unused-vars\nconst PatchToolbarView = ({ parents, uuid, removeObj }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\" className={classes.appbar}>\n        <Toolbar className={classes.toolbar}>\n          <ButtonGroup variant=\"text\" aria-label=\"text primary button group\" className={classes.group}>\n            <Button className={classes.button} />\n            <Button className={classes.button} />\n            <Button\n              className={classes.button}\n              onClick={() => {\n                removeObj(uuid);\n              }}\n            >\n              <Tooltip title=\"Delete\" aria-label=\"delete\">\n                <DeleteOutlineIcon fontSize=\"small\" />\n              </Tooltip>\n            </Button>\n          </ButtonGroup>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default memo(PatchToolbarView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removeThreeObj } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removeThreeObj }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PropListItem from '../shared/PropListItem/index';\nimport PatchValue from './PatchValue/index';\nimport PatchDetails from '../shared/PatchDetails/index';\nimport ParentChildProp from '../shared/ParentChildPro/index';\nimport PatchToolbar from './PatchToolbar/index';\nimport PatchRoot from '../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst ThreeObjectPatch = ({ data }) => {\n  const {\n    uuid, label, type, width, children, isChildHidden, parents,\n  } = data;\n\n  const classes = useStyles();\n\n  const props = [\n    {\n      uuid, propName: 'position', disableInput: false, disableOutput: true,\n    },\n    {\n      uuid, propName: 'rotation', disableInput: false, disableOutput: true,\n    },\n    {\n      uuid, propName: 'scale', disableInput: false, disableOutput: true,\n    },\n  ];\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type }} />\n      <ListItem className={classes.propItem}>\n        <ParentChildProp {...{\n          isChildHidden, type, uuid, children,\n        }}\n        />\n      </ListItem>\n      {\n        props.map((p) => (\n          <PropListItem key={`${p.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: p.uuid, propName: p.propName }} /></PropListItem>\n        ))\n      }\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={parents} uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default ThreeObjectPatch;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removeDevice } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removeDevice }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const DevicesContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let devicesContextValue = {};\n\nconst DevicesManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n  // Device Connections\n  const [DeviceRegistry] = useState(() => new Map());\n\n  const deviceRegistryUtils = useMemo(\n    () => ({\n      findDevice(id) {\n        return DeviceRegistry.get(id);\n      },\n      registerDevice(identifier, ref) {\n        // register by id\n        DeviceRegistry.set(identifier, ref);\n        publish('devices-list-changed', 'add');\n      },\n      unregisterDevice(identifier) {\n        // unregister by id\n        DeviceRegistry.delete(identifier);\n        publish('devices-list-changed', 'remove');\n      },\n      getDevicesArray() {\n        return Array.from(DeviceRegistry.keys()).map((id) => DeviceRegistry.get(id));\n      },\n    }),\n    [DeviceRegistry, publish],\n  );\n\n  devicesContextValue = useMemo(() => ({\n    DeviceRegistry,\n    ...deviceRegistryUtils,\n  }), [\n    DeviceRegistry,\n    deviceRegistryUtils,\n  ]);\n\n  return (\n    <DevicesContext.Provider value={devicesContextValue}>\n      {children}\n    </DevicesContext.Provider>\n  );\n};\n\nDevicesManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default DevicesManager;\n","import { useContext } from 'react';\nimport { DevicesContext } from '../managers/DevicesManager';\n\nexport default function useDevicesContext() {\n  return useContext(DevicesContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useDevicesContext from '../../../../contexts/useDevicesContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findDevice } = useDevicesContext();\n  const deviceObj = findDevice(uuid);\n\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (deviceObj !== undefined) {\n      isMounted.current = true;\n      deviceObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [deviceObj, propName, updateProp, uuid]);\n\n  if (deviceObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { ListItem, makeStyles } from '@material-ui/core';\n\nimport PatchToolbar from '../PatchToolbar/index';\nimport PatchValue from '../PatchValue/index';\n\nimport PropListItem from '../../shared/PropListItem/index';\nimport PatchDetails from '../../shared/PatchDetails/index';\nimport PatchRoot from '../../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst MousePatch = ({ data }) => {\n  const {\n    uuid, width, label, type,\n  } = data;\n\n  const props = [\n    {\n      uuid, propName: 'position', disableInput: true, disableOutput: false,\n    },\n  ];\n\n  const classes = useStyles();\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: label, type }} />\n      {props.map((p) => (<PropListItem key={`${p.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: p.uuid, propName: p.propName }} /></PropListItem>))}\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={[]} uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nMousePatch.propTypes = {\n  data: PropTypes.shape({\n    uuid: PropTypes.string.isRequired,\n    width: PropTypes.number.isRequired,\n    label: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default MousePatch;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport MousePatch from './Mouse';\n\nconst DevicePatch = ({ data }) => {\n  const { type } = data;\n\n  switch (type) {\n    default:\n      return (<MousePatch {...{ data }} />);\n  }\n};\n\nDevicePatch.propTypes = {\n  data: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default DevicePatch;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  createContext, useMemo, useState, useCallback,\n} from 'react';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const TransformsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let transformsContextValue = {};\n\nconst TransformsManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n  // Transform Connections\n  const [TransformRegistry] = useState(() => new Map());\n\n  const findTransform = useCallback((id) => TransformRegistry.get(id), [TransformRegistry]);\n\n  const transformRegistryUtils = useMemo(\n    () => ({\n      findTransform,\n      registerTransform(identifier, ref) {\n        // register by id\n        TransformRegistry.set(identifier, ref);\n        publish('transforms-list-changed', 'add');\n      },\n      unregisterTransform(identifier) {\n        // unregister by id\n        TransformRegistry.delete(identifier);\n        publish('transforms-list-changed', 'remove');\n      },\n      getTransformsArray() {\n        return Array.from(TransformRegistry.keys()).map((id) => TransformRegistry.get(id));\n      },\n    }),\n    [TransformRegistry, publish, findTransform],\n  );\n\n  transformsContextValue = useMemo(() => ({\n    TransformRegistry,\n    ...transformRegistryUtils,\n  }), [\n    TransformRegistry,\n    transformRegistryUtils,\n  ]);\n\n  return (\n    <TransformsContext.Provider value={transformsContextValue}>\n      {children}\n    </TransformsContext.Provider>\n  );\n};\n\nTransformsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default TransformsManager;\n","import { useContext } from 'react';\nimport { TransformsContext } from '../managers/TransformsManager';\n\nexport default function useTransformsContext() {\n  return useContext(TransformsContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useTransformsContext from '../../../../contexts/useTransformsContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findTransform } = useTransformsContext();\n  const transformObj = findTransform(uuid);\n\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (transformObj !== undefined) {\n      isMounted.current = true;\n      transformObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [transformObj, propName, updateProp, uuid]);\n\n  if (transformObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  propName: PropTypes.string.isRequired,\n  uuid: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removeTransform } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removeTransform }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem, Typography } from '@material-ui/core';\n\nimport PatchValue from './PatchValue/index';\nimport PatchToolbar from './PatchToolbar/index';\n\nimport PatchDetails from '../shared/PatchDetails/index';\nimport PropListItem from '../shared/PropListItem/index';\nimport useTransformsContext from '../../../contexts/useTransformsContext';\nimport PatchRoot from '../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n    width: '100%',\n  },\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst TransformPatch = ({ data }) => {\n  const { findTransform } = useTransformsContext();\n  const [transform, setTransform] = useState({ amount: 1 });\n  const { uuid, width, label } = data;\n  const classes = useStyles({ width });\n\n  const props = [\n    {\n      uuid, propName: 'value', disableInput: false, disableOutput: false,\n    },\n  ];\n\n  useEffect(() => {\n    const p = findTransform(uuid);\n    if (p !== undefined) {\n      setTransform(p);\n    }\n  }, [uuid, findTransform, setTransform]);\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type: 'Transform' }} />\n      <ListItem className={classes.propItem}>\n        <Typography className={classes.propText}>{`x${transform.amount}`}</Typography>\n      </ListItem>\n      {props.map((p) => (<PropListItem key={`${p.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: p.uuid, propName: p.propName }} /></PropListItem>))}\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={[]} uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default TransformPatch;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const GeneratorsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let generatorsContextValue = {};\n\nconst GeneratorsManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n  // Generator Connections\n  const [GeneratorRegistry] = useState(() => new Map());\n\n  const generatorRegistryUtils = useMemo(\n    () => ({\n      findGenerator(id) {\n        return GeneratorRegistry.get(id);\n      },\n      registerGenerator(identifier, ref) {\n        // register by id\n        GeneratorRegistry.set(identifier, ref);\n        publish('generators-list-changed', 'add');\n      },\n      unregisterGenerator(identifier) {\n        // unregister by id\n        GeneratorRegistry.delete(identifier);\n        publish('generators-list-changed', 'remove');\n      },\n      getGeneratorsArray() {\n        return Array.from(GeneratorRegistry.keys()).map((id) => GeneratorRegistry.get(id));\n      },\n    }),\n    [GeneratorRegistry, publish],\n  );\n\n  generatorsContextValue = useMemo(() => ({\n    GeneratorRegistry,\n    ...generatorRegistryUtils,\n  }), [\n    GeneratorRegistry,\n    generatorRegistryUtils,\n  ]);\n\n  return (\n    <GeneratorsContext.Provider value={generatorsContextValue}>\n      {children}\n    </GeneratorsContext.Provider>\n  );\n};\n\nGeneratorsManager.whyDidYouRender = false;\n\nGeneratorsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default GeneratorsManager;\n","import { useContext } from 'react';\nimport { GeneratorsContext } from '../managers/GeneratorsManager';\n\nexport default function useGeneratorsContext() {\n  return useContext(GeneratorsContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useGeneratorsContext from '../../../../contexts/useGeneratorsContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findGenerator } = useGeneratorsContext();\n  const generatorObj = findGenerator(uuid);\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (generatorObj !== undefined) {\n      isMounted.current = true;\n      generatorObj.subscribe(`${uuid}-${propName.toLowerCase()}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [generatorObj, propName, updateProp, uuid]);\n\n  if (generatorObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","export default function DrawSine(resolution) {\n  const scale = 1; // Min Max range. X range: [-scale, scale] Y range: [-scale, scale]\n  const points = [];\n  for (let i = 0; i <= 360; i += (360 / resolution)) {\n    points.push([\n      (scale / 360) * (i * 2) - scale,\n      Math.sin(i * (Math.PI / 180)) * scale,\n    ]);\n  }\n  return points;\n}\n","export default function DrawCircle(resolution) {\n  const diameter = 1;\n  const points = [];\n  for (let i = 0; i <= 360; i += (360 / resolution)) {\n    points.push([\n      Math.sin(i * (Math.PI / 180)) * diameter,\n      Math.cos(i * (Math.PI / 180)) * diameter,\n    ]);\n  }\n  return points;\n}\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useRef, useEffect, useState,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(() => ({\n  canvasContainer: {\n    width: (props) => (props.parentSize[0]),\n    height: (props) => (props.parentSize[1]),\n    position: 'absolute',\n    zIndex: 1,\n  },\n}));\n\nconst ShapePreviewBackground = ({ shape, parentSize }) => {\n  const [shapeDimensions, setShapeDimensions] = useState([[-1, 1], [-1, 1]]);\n  const [context, setContext] = useState(null);\n  const canvasRef = useRef(null);\n  const [finalShape, setFinalShape] = useState([[0, 0], [1, 1]]);\n\n  useEffect(() => {\n    // Save size of shape\n    if (canvasRef.current !== undefined) {\n      setShapeDimensions([\n        [Math.min(...shape.map((p) => p[0])), Math.max(...shape.map((p) => p[0]))],\n        [Math.min(...shape.map((p) => p[1])), Math.max(...shape.map((p) => p[1]))],\n      ]);\n\n      // Save canvas context\n      setContext(canvasRef.current.getContext('2d'));\n    }\n  }, [canvasRef, shape, setShapeDimensions]);\n\n  useEffect(() => {\n    if (context !== null) {\n      // adjust noralized generator values to size of dom container\n      setFinalShape(shape.map((s) => [\n        (s[0] + shapeDimensions[0][1]) * ((parentSize[0] * 0.9) / 2) + (parentSize[0] * 0.05),\n        (-s[1] + shapeDimensions[1][1]) * ((parentSize[1] * 0.9) / 2) + (parentSize[1] * 0.05),\n      ]));\n    }\n  }, [context, shape, shapeDimensions, parentSize]);\n\n  useEffect(() => {\n    if (context !== null) {\n      // Draw shape on canvas\n      const draw = (ctx) => {\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = '#222222';\n        ctx.moveTo(finalShape[0][0], finalShape[0][1]);\n        finalShape.forEach((s) => {\n          ctx.lineTo(\n            s[0],\n            s[1],\n          );\n        });\n        ctx.stroke();\n      };\n\n      draw(context);\n    }\n  }, [context, finalShape]);\n\n  // Create local classes\n  const classes = useStyles({ parentSize });\n  return (\n    <canvas\n      width={parentSize[0]}\n      height={parentSize[1]}\n      className={classes.canvasContainer}\n      ref={canvasRef}\n    />\n  );\n};\n\nShapePreviewBackground.whyDidYouRender = true;\n\nexport default memo(ShapePreviewBackground);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useEffect, useState, useRef, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\nimport useGeneratorsContext from '../../../../contexts/useGeneratorsContext';\n\nconst useStyles = makeStyles(() => ({\n  canvasContainer: {\n    width: (props) => (props.parentSize[0]),\n    height: (props) => (props.parentSize[1]),\n    position: 'absolute',\n    zIndex: 2,\n  },\n  ind: {\n    background: '#FFFFFF',\n    borderRadius: '50%',\n    border: '1px solid #222',\n    width: 7,\n    height: 7,\n    position: 'absolute',\n    left: (props) => (props.finalVal[0]),\n    top: (props) => (props.finalVal[1]),\n\n  },\n}));\n\nconst ShapePreviewIndicator = ({\n  shape, propName, parentSize, uuid,\n}) => {\n  const { findGenerator } = useGeneratorsContext();\n  const generatorObj = findGenerator(uuid);\n\n  const [propVal, setPropVal] = useState(0);\n  const [shapeDimensions, setShapeDimensions] = useState([-1, 1], [-1, 1]);\n  const [finalVal, setFinalVal] = useState([1, 1]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (generatorObj !== undefined) {\n      isMounted.current = true;\n      setPropVal(generatorObj[propName]);\n      generatorObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [generatorObj, propName, updateProp, uuid]);\n\n  useEffect(() => {\n    setShapeDimensions([\n      [Math.min(...shape.map((p) => p[0])), Math.max(...shape.map((p) => p[0]))],\n      [Math.min(...shape.map((p) => p[1])), Math.max(...shape.map((p) => p[1]))],\n    ]);\n  }, [shape, setShapeDimensions]);\n\n  useEffect(() => {\n    setFinalVal([\n      (propVal[0] + shapeDimensions[0][1])\n      * ((parentSize[0] * 0.9) / 2) + (parentSize[0] * 0.05) - 2.5,\n      (-propVal[1] + shapeDimensions[1][1])\n      * ((parentSize[1] * 0.9) / 2) + (parentSize[1] * 0.05) - 2, 5,\n    ]);\n  }, [propVal, shapeDimensions, parentSize]);\n\n  // Create local classes\n  const classes = useStyles({ parentSize, finalVal });\n  return <div className={classes.canvasContainer}><div className={classes.ind} /></div>;\n};\n\nexport default memo(ShapePreviewIndicator);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport useGeneratorsContext from '../../../../contexts/useGeneratorsContext';\n\nimport DrawSine from '../../../../shapes/drawSine';\nimport DrawCircle from '../../../../shapes/drawCircle';\n\nimport ShapePreviewBackground from './background';\nimport ShapePreviewIndicator from './indicator';\n\nconst useStyles = makeStyles(() => ({\n  shapeContainer: {\n    width: '100%',\n    height: 100,\n    padding: '0 10%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n}));\n\nconst ShapePreview = ({ uuid, propName }) => {\n  const { findGenerator, getGeneratorsArray } = useGeneratorsContext();\n\n  const [generator, setGenerator] = useState(null);\n\n  const isMounted = useRef(false);\n\n  const updateGenerator = useCallback((val) => {\n    if (isMounted.current) {\n      setGenerator(val);\n    }\n  }, [isMounted, setGenerator]);\n\n  useEffect(() => {\n    const generatorObj = findGenerator(uuid);\n    if (generatorObj !== undefined) {\n      isMounted.current = true;\n      setGenerator(generatorObj);\n      generatorObj.subscribe('generators-list-changed', updateGenerator);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [updateGenerator, findGenerator, uuid, getGeneratorsArray]);\n\n  const [shape, setShape] = useState([[-1, -1], [1, 1], [1, -1], [-1, 1]]);\n\n  const shapeRef = useRef(null);\n  const [containerSize, setContainerSize] = useState([1, 1]);\n\n  // Create local classes\n  const classes = useStyles();\n\n  useEffect(() => {\n    setContainerSize(\n      shapeRef.current\n        ? [shapeRef.current.offsetWidth * 0.8, shapeRef.current.offsetHeight] : [1, 1],\n    );\n  }, [shapeRef, setContainerSize]);\n\n  useEffect(() => {\n    if (generator) {\n      switch (generator.type) {\n        default:\n        case 'Sinewave':\n          setShape(DrawSine(generator.resolution));\n          break;\n        case 'Orbit':\n          setShape(DrawCircle(generator.resolution));\n          break;\n      }\n    }\n  }, [setShape, generator]);\n\n  if (generator === null) {\n    return (\n      <div className={classes.shapeContainer} ref={shapeRef}>\n        <ShapePreviewBackground {...{ shape, parentSize: containerSize }} />\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.shapeContainer} ref={shapeRef}>\n      <ShapePreviewIndicator {...{\n        shape, propName, parentSize: containerSize, uuid,\n      }}\n      />\n      <ShapePreviewBackground {...{ shape, parentSize: containerSize }} />\n    </div>\n  );\n};\n\nShapePreview.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default ShapePreview;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ uuid }) => {\n  const { removeGenerator } = useAppContext();\n  return <PatchToolbarView {...{ parents: [], uuid, removeObj: removeGenerator }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Grid, ListItem, Typography } from '@material-ui/core';\n\nimport PatchDetails from '../shared/PatchDetails/index';\nimport PatchValue from './PatchValue/index';\nimport ShapePreview from './ShapePreview/index';\nimport PatchToolbar from './PatchToolbar/index';\nimport PatchRoot from '../shared/PatchRoot';\nimport OutputHandle from '../shared/OutputHandle';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst Generator = ({ data }) => {\n  const { uuid, label, width } = data;\n\n  const classes = useStyles();\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type: 'Generator' }} />\n      <ListItem className={classes.propItem}>\n        <Grid container className={classes.propGrid}>\n          <Grid item xs={12}>\n            <Typography className={classes.propText}>Position</Typography>\n          </Grid>\n          <Grid item xs={1} />\n          <Grid item xs={10} style={{ borderBottom: '1px solid rgba(255,255,255,0.05)' }}>\n            <PatchValue {...{ uuid, propName: 'position' }} />\n          </Grid>\n          <Grid item xs={1}>\n            <OutputHandle {...{ uuid, propName: 'position' }} />\n          </Grid>\n        </Grid>\n      </ListItem>\n      <ListItem className={classes.propItem}>\n        <ShapePreview {...{ uuid, propName: 'position' }} />\n      </ListItem>\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nGenerator.whyDidYouRender = true;\n\nGenerator.propTypes = {\n  data: PropTypes.shape({\n    uuid: PropTypes.string.isRequired,\n    label: PropTypes.string.isRequired,\n    width: PropTypes.number.isRequired,\n  }).isRequired,\n};\n\nexport default memo(Generator);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport usePeersContext from '../../../../contexts/usePeersContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findPeer } = usePeersContext();\n  const peerObj = findPeer(uuid);\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (peerObj !== undefined) {\n      isMounted.current = true;\n      if (typeof peerObj.subscribe === 'function') {\n        peerObj.subscribe(`${uuid}-${propName.toLowerCase()}-updated`, updateProp);\n      }\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [peerObj, propName, updateProp, uuid]);\n\n  if (peerObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removePeer } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removePeer }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PropListItem from '../shared/PropListItem/index';\nimport PatchValue from './PatchValue/index';\nimport PatchDetails from '../shared/PatchDetails/index';\nimport useConnectionsContext from '../../../contexts/useConnectionsContext';\nimport PatchRoot from '../shared/PatchRoot';\n\nimport PatchToolbar from './PatchToolbar/index';\n\nconst useStyles = makeStyles(() => ({\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst PeerPatch = ({ data }) => {\n  const { findConnection } = useConnectionsContext();\n  const [peer, setPeer] = useState(null);\n  const { uuid, width } = data;\n\n  const [props, setProps] = useState([]);\n\n  useEffect(() => {\n    if (peer !== null) {\n      setProps([\n        {\n          uuid: peer.uuid, propName: 'data', disableInput: false, disableOutput: false,\n        },\n      ]);\n    }\n  }, [peer]);\n\n  const classes = useStyles();\n  useEffect(() => {\n    const p = findConnection(uuid);\n    if (p !== undefined) {\n      setPeer(p);\n    }\n  }, [uuid, findConnection, setPeer]);\n\n  if (peer === null) { return null; }\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${peer.name}`, uuid: `${peer.uuid}`, type: 'Peer' }} />\n      {props.map((p) => (<PropListItem key={`${peer.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: peer.uuid, propName: p.propName }} /></PropListItem>))}\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={[]} uuid={peer.uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default PeerPatch;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { getSmoothStepPath } from 'react-flow-renderer';\n\nconst CustomEdge = ({\n  sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition, id, style,\n}) => {\n  const edgePath = getSmoothStepPath({\n    sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition,\n  });\n\n  return (\n    <g>\n      <defs>\n        <marker\n          id=\"markerEnd\"\n          markerWidth=\"35\"\n          markerHeight=\"35\"\n          viewBox=\"-10 -10 20 20\"\n          orient=\"auto\"\n          refX=\"-3\"\n          refY=\"0\"\n        >\n          <polyline\n            stroke=\"#222\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"1\"\n            fill=\"#fff\"\n            points=\"-5,-3 0,0 -5,3 -5,-3\"\n          />\n        </marker>\n      </defs>\n      <circle cx={sourceX} cy={sourceY} fill=\"#fff\" r={4} stroke=\"#222\" strokeWidth={1.5} />\n      <path id={id} style={style} className=\"react-flow__edge-path\" d={edgePath} markerEnd=\"url(#markerEnd)\" />\n    </g>\n  );\n};\n\nexport default CustomEdge;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { getBezierPath } from 'react-flow-renderer';\n\nconst CustomLineageEdge = ({\n  sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition, id, style,\n}) => {\n  const edgePath = getBezierPath({\n    sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition,\n  });\n\n  return (\n    <g>\n      <defs>\n        <marker\n          id=\"markerEndLineage\"\n          markerWidth=\"35\"\n          markerHeight=\"35\"\n          viewBox=\"-10 -10 20 20\"\n          orient=\"auto\"\n          refX=\"-3\"\n          refY=\"0\"\n        >\n          <polyline\n            stroke=\"#222\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"1\"\n            fill=\"#fff\"\n            points=\"-5,-3 0,0 -5,3 -5,-3\"\n          />\n        </marker>\n      </defs>\n      <circle cx={sourceX} cy={sourceY} fill=\"#fff\" r={4} stroke=\"#222\" strokeWidth={1.5} />\n      <path id={id} style={style} className=\"react-flow__edge-path\" d={edgePath} markerEnd=\"url(#markerEndLineage)\" />\n    </g>\n  );\n};\n\nexport default CustomLineageEdge;\n","/* eslint-disable react/prop-types */\n/* eslint-disable no-param-reassign */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\nimport ReactFlow, { Controls, isNode } from 'react-flow-renderer';\nimport dagre from 'dagre';\n\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nconst onLoad = () => {\n  // reactFlowInstance.fitView();\n};\n\nconst nodeWidth = 150;\nconst nodeHeight = 200;\n\nconst NodeEditorView = ({\n  elements, nodeTypes, edgeTypes, updateConnection, addConnection,\n}) => {\n  const dagreGraph = new dagre.graphlib.Graph();\n  dagreGraph.setDefaultEdgeLabel(() => ({}));\n\n  const getLayoutedElements = (elems) => {\n    dagreGraph.setGraph({\n      rankdir: 'LR',\n      align: 'DL',\n      // ranker: 'tight-tree',\n      // acyclicer: 'greedy',\n      nodesep: 50,\n      edgesep: 0,\n      ranksep: 50,\n      marginx: 20,\n      marginy: 20,\n    });\n\n    elems.forEach((el) => {\n      if (isNode(el)) {\n        dagreGraph.setNode(el.id, { width: nodeWidth, height: nodeHeight });\n      } else {\n        dagreGraph.setEdge(el.source, el.target);\n      }\n    });\n\n    dagre.layout(dagreGraph);\n\n    return elems.filter((el) => !el.isHidden).map((el) => {\n      if (isNode(el)) {\n        const nodeWithPosition = dagreGraph.node(el.id);\n        el.targetPosition = 'right';\n        el.sourcePosition = 'left';\n\n        // unfortunately we need this little hack to pass a slightly different position\n        // to notify react flow about the change. Moreover we are shifting the dagre node position\n        // (anchor=center center) to the top left\n        // so it matches the react flow node anchor point (top left).\n        el.position = {\n          x: nodeWithPosition.x - nodeWidth / 2 + Math.random() / 1000,\n          y: nodeWithPosition.y - nodeHeight / 2,\n        };\n      }\n\n      return el;\n    });\n  };\n\n  const layoutedElements = getLayoutedElements(elements.filter((el) => !el.isHidden));\n\n  // Local CSS classes\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <ReactFlow\n        elements={layoutedElements}\n        nodeTypes={nodeTypes}\n        edgeTypes={edgeTypes}\n        onLoad={onLoad}\n        snapToGrid\n        // nodesDraggable={false}\n        // onElementClick={()=>{console.log('node click');}}\n        onEdgeUpdate={updateConnection}\n        onConnect={addConnection}\n        onElementsRemove={() => {}}\n        // onDrop={()=>{console.log('drop');}}\n        // onDragOver={()=>{console.log(' dragOver');}}\n        // onNodeDragStart={()=>{console.log('node drag');}}\n        // onNodeDragStop={()=>{console.log('node drop');}}\n      >\n        <Controls />\n      </ReactFlow>\n    </div>\n  );\n};\n\nNodeEditorView.whyDidYouRender = true;\n\nexport default memo(NodeEditorView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useState, useMemo } from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\nimport { rtSceneToFlow } from '../../utils/toFlow';\n\nimport Scene from '../@patches/Scene';\nimport ThreeObject from '../@patches/ThreeObject';\n\nimport Device from '../@patches/Device';\nimport Transform from '../@patches/Transform';\nimport Generator from '../@patches/Generator';\nimport Peer from '../@patches/Peer';\n\nimport CustomEdge from '../@patches/edges/CustomEdge';\nimport CustomLineageEdge from '../@patches/edges/CustomLineageEdge';\n\nimport NodeEditorView from './view';\n\nconst NodeEditor = () => {\n  const [elements, setElements] = useState([]);\n  const { sceneJSON, updateConnection, addConnection } = useAppContext();\n\n  useMemo(() => { setElements(rtSceneToFlow(sceneJSON)); }, [sceneJSON]);\n\n  const nodeTypes = {\n    Scene,\n    threeObj: ThreeObject,\n    device: Device,\n    transform: Transform,\n    generator: Generator,\n    peer: Peer,\n  };\n\n  const edgeTypes = {\n    custom: CustomEdge,\n    customLineage: CustomLineageEdge,\n  };\n\n  return (\n    <NodeEditorView {...{\n      elements, nodeTypes, edgeTypes, updateConnection, addConnection,\n    }}\n    />\n  );\n};\n\nNodeEditor.whyDidYouRender = true;\n\nexport default NodeEditor;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { IconButton } from '@material-ui/core';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst EditorCloseButtonView = ({ editorMenuOpen, setEditorMenuOpen }) => {\n  const classes = useStyles();\n  return (\n    <IconButton\n      edge=\"start\"\n      className={classes.menuButton}\n      color=\"inherit\"\n      aria-label=\"menu\"\n      onClick={() => {\n        setEditorMenuOpen(!editorMenuOpen);\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\nEditorCloseButtonView.whyDidYouRender = true;\n\nEditorCloseButtonView.propTypes = {\n  editorMenuOpen: PropTypes.bool.isRequired,\n  setEditorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default memo(EditorCloseButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport EditorCloseButtonView from './view';\n\nimport useEditorMenuContext from '../../contexts/useEditorMenuContext';\n\nconst EditorCloseButton = () => {\n  const { editorMenuOpen, setEditorMenuOpen } = useEditorMenuContext();\n\n  return (\n    <EditorCloseButtonView {...{ editorMenuOpen, setEditorMenuOpen }} />);\n};\n\nEditorCloseButton.whyDidYouRender = true;\n\nexport default EditorCloseButton;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { IconButton } from '@material-ui/core';\n\nimport GetAppIcon from '@material-ui/icons/GetApp';\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst SceneDownloadButttonView = ({ sceneJSON }) => {\n  const classes = useStyles();\n  return (\n    <IconButton\n      edge=\"start\"\n      className={classes.menuButton}\n      color=\"inherit\"\n      aria-label=\"menu\"\n      onClick={() => {\n        const link = document.createElement('a');\n        link.download = 'RT_Scene.json';\n        link.href = `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(sceneJSON))}`;\n        link.click();\n      }}\n    >\n      <GetAppIcon />\n    </IconButton>\n  );\n};\n\nSceneDownloadButttonView.whyDidYouRender = true;\n\nSceneDownloadButttonView.propTypes = {\n  sceneJSON: PropTypes.shape({}).isRequired,\n};\n\nexport default memo(SceneDownloadButttonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\nimport SceneDownloadButttonView from './view';\n\nconst SceneDownloadButtton = () => {\n  const { sceneJSON } = useAppContext();\n  return <SceneDownloadButttonView {...{ sceneJSON }} />;\n};\n\nSceneDownloadButtton.whyDidYouRender = true;\n\nexport default SceneDownloadButtton;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { IconButton } from '@material-ui/core';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst AddToEditorCloseButtonView = ({ handleClose }) => {\n  const classes = useStyles();\n  return (\n    <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={handleClose}>\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\nAddToEditorCloseButtonView.whyDidYouRender = true;\n\nexport default memo(AddToEditorCloseButtonView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport AddToEditorCloseButtonView from './view';\n\nconst AddToEditorCloseButton = ({ handleClose }) => (\n  <AddToEditorCloseButtonView handleClose={handleClose} />\n);\n\nAddToEditorCloseButton.whyDidYouRender = true;\n\nexport default AddToEditorCloseButton;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo, forwardRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { AppBar, Toolbar, Typography } from '@material-ui/core';\n\nimport AddToEditorCloseButton from '../AddToEditorCloseButton/index';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n}));\n\nconst AddToEditorToolbarView = (props, ref) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <AddToEditorCloseButton handleClose={props.handleClose} />\n          <Typography>Add Component</Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default memo(forwardRef(AddToEditorToolbarView));\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { forwardRef } from 'react';\n\nimport AddToEditorToolbarView from './view';\n\nconst AddToEditorToolbar = (props, ref) => (\n  <AddToEditorToolbarView {...{ ref }} />\n);\n\nAddToEditorToolbar.whyDidYouRender = true;\n\nexport default forwardRef(AddToEditorToolbar);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { MenuItem } from '@material-ui/core';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\nimport useAppContext from '../../contexts/useAppContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst AddPeersToScene = ({ closeMenu }) => {\n  const { addPeer, sceneJSON } = useAppContext();\n  const { getConnectionsArray } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const classes = useStyles();\n\n  const [connections, setConnections] = useState([]);\n\n  useEffect(() => { // update data on load\n    const peer = getConnectionsArray();\n    if (peer !== undefined) {\n      setConnections(peer.filter((p) => (!p.isMe)));\n    }\n  }, [setConnections, getConnectionsArray]);\n\n  const isMounted = useRef(false);\n\n  const updateConnections = useCallback(() => {\n    if (isMounted.current) {\n      const peer = getConnectionsArray();\n      if (peer !== undefined) {\n        setConnections(peer.filter((p) => (!p.isMe)));\n      }\n    }\n  }, [getConnectionsArray]);\n\n  useEffect(() => {\n    if (updateConnections !== undefined) {\n      isMounted.current = true;\n      subscribe('connection-modified', updateConnections);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, updateConnections]);\n\n  if (connections.length === 0) { return null; }\n\n  return (\n    <ul className={classes.listItem}>\n\n      {connections.map((connection) => <MenuItem disabled={(sceneJSON.peers.filter((p) => p.uuid === connection.uuid).length > 0)} key={`add_peer_menu_${connection.uuid}_${connection.connectionId}`} onClick={() => { addPeer(connection.uuid); closeMenu(); }}>{`${connection.name} (${connection.uuid})`}</MenuItem>)}\n    </ul>\n  );\n};\n\nAddPeersToScene.whyDidYouRender = true;\n\nAddPeersToScene.propTypes = {\n  closeMenu: PropTypes.func.isRequired,\n};\n\nexport default AddPeersToScene;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  IconButton, MenuItem, Menu, Tooltip, Accordion, AccordionSummary, AccordionDetails, Typography,\n} from '@material-ui/core';\n\nimport AddIcon from '@material-ui/icons/Add';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AddToEditorToolbar from '../AddToEditorToolbar';\nimport useAppContext from '../../contexts/useAppContext';\nimport AddPeersToScene from '../AddPeersToScene';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    height: '100%',\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  paper: {\n    width: '375px',\n    height: '485px',\n  },\n  list: {\n    width: '100%',\n    paddingTop: 0,\n  },\n  itemList: {\n    width: '100%',\n  },\n}));\n\nconst AddToEditorMenu = () => {\n  const classes = useStyles();\n\n  const {\n    addThreeObj, addGenerator, addDevice, addTransform,\n  } = useAppContext();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const openMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const closeMenu = () => {\n    setAnchorEl(null);\n  };\n\n  const addObject = (type) => {\n    addThreeObj(type);\n    closeMenu();\n  };\n\n  return (\n    <div>\n      <Tooltip title=\"Component\" aria-label=\"Component\">\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"menu-appbar\"\n          aria-haspopup=\"true\"\n          onClick={openMenu}\n          color=\"inherit\"\n        >\n          <AddIcon />\n        </IconButton>\n      </Tooltip>\n      <Menu\n        className={classes.root}\n        id=\"menu-appbar\"\n        anchorEl={anchorEl}\n        keepMounted\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        open={open}\n        onClose={closeMenu}\n        classes={{\n          paper: classes.paper,\n          list: classes.list,\n        }}\n      >\n        <AddToEditorToolbar closeMenu={closeMenu} />\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"3d-objects-content\"\n            id=\"3d-objects-header\"\n          >\n            <Typography className={classes.heading}>3d Objects</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <ul className={classes.itemList}>\n              <MenuItem onClick={() => { addObject('Box'); closeMenu(); }}>Cube</MenuItem>\n              <MenuItem onClick={() => { addObject('Sphere'); closeMenu(); }}>Sphere</MenuItem>\n              <MenuItem onClick={() => { addObject('Plane'); closeMenu(); }}>Plane</MenuItem>\n            </ul>\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"peers-content\"\n            id=\"peers-header\"\n          >\n            <Typography className={classes.heading}>Peers</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <AddPeersToScene closeMenu={closeMenu} />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"generators-content\"\n            id=\"generators-header\"\n          >\n            <Typography className={classes.heading}>Generators</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <ul className={classes.itemList}>\n              <MenuItem onClick={() => { addGenerator('Sinewave'); closeMenu(); }}>Sinewave</MenuItem>\n              <MenuItem onClick={() => { addGenerator('Orbit'); closeMenu(); }}>Orbit</MenuItem>\n            </ul>\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"devices-content\"\n            id=\"devices-header\"\n          >\n            <Typography className={classes.heading}>Devices</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <MenuItem onClick={() => { addDevice('Mouse'); closeMenu(); }}>Mouse</MenuItem>\n            <MenuItem onClick={() => { addDevice('Keyboard'); closeMenu(); }}>Keyboard</MenuItem>\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"transforms-content\"\n            id=\"transforms-header\"\n          >\n            <Typography className={classes.heading}>Transforms</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <MenuItem onClick={() => { addTransform('Multiply'); closeMenu(); }}>Multiply</MenuItem>\n          </AccordionDetails>\n        </Accordion>\n      </Menu>\n    </div>\n  );\n};\n\nexport default AddToEditorMenu;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { AppBar, Toolbar, Typography } from '@material-ui/core';\n\nimport EditorCloseButton from '../EditorCloseButton/index';\nimport SceneDownloadButtton from '../SceneDownloadButton';\nimport AddToEditorMenu from '../AddToEditorMenu';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    marginRight: theme.spacing(2),\n  },\n  spacer: {\n    flexGrow: 1,\n  },\n}));\n\nconst EditorToolbarView = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <EditorCloseButton />\n          <Typography variant=\"h6\" className={classes.title}>\n            Scene Editor\n          </Typography>\n          <SceneDownloadButtton />\n          <div className={classes.spacer} />\n          <AddToEditorMenu />\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default memo(EditorToolbarView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\n\nimport EditorToolbarView from './view';\n\nconst EditorToolbar = () => {\n  const { sceneJSON } = useAppContext();\n  return <EditorToolbarView {...{ sceneJSON }} />;\n};\n\nEditorToolbar.whyDidYouRender = true;\n\nexport default EditorToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Drawer, Divider } from '@material-ui/core';\n\nimport NodeEditor from '../../NodeEditor/index';\nimport EditorToolbar from '../../EditorToolbar/index';\n\nconst useStyles = makeStyles(() => ({\n  drawer: {\n    width: '100%',\n    height: (props) => props.editorMenuHeight,\n    position: 'fixed',\n  },\n  drawerPaper: {\n    width: '100%',\n    height: (props) => props.editorMenuHeight,\n  },\n}));\n\nconst EditorView = ({ editorMenuOpen, editorMenuHeight, setEditorMenuOpen }) => {\n  const classes = useStyles({ editorMenuOpen, editorMenuHeight, setEditorMenuOpen });\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"persistent\"\n      anchor=\"bottom\"\n      open={editorMenuOpen}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <EditorToolbar />\n      <Divider />\n      <NodeEditor />\n    </Drawer>\n  );\n};\n\nEditorView.whyDidYouRender = true;\n\nEditorView.propTypes = {\n  editorMenuOpen: PropTypes.bool.isRequired,\n  editorMenuHeight: PropTypes.number.isRequired,\n  setEditorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default EditorView;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useEditorMenuContext from '../../../contexts/useEditorMenuContext';\nimport EditorView from './view';\n\nconst Editor = () => {\n  const { editorMenuOpen, editorMenuHeight, setEditorMenuOpen } = useEditorMenuContext();\n\n  return (\n    <EditorView {...{\n      editorMenuOpen,\n      editorMenuHeight,\n      setEditorMenuOpen,\n    }}\n    />\n  );\n};\n\nEditor.whyDidYouRender = true;\n\nexport default Editor;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport { PropTypes } from 'prop-types';\n\nimport React, { createContext, memo } from 'react';\n\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { AppBar, Toolbar, IconButton } from '@material-ui/core';\n\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport Tools from './@RecklessCore/components/@menus/Tools/index';\nimport Inspector from './@RecklessCore/components/@menus/Inspector/index';\nimport Editor from './@RecklessCore/components/@menus/Editor/index';\n\nexport const ToolsMenuContext = createContext(null);\nexport const EditorMenuContext = createContext(null);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    height: '100%',\n    overflow: 'scroll',\n  },\n  rootShiftBottom: {\n    height: (props) => (`calc(100% - ${props.editorMenuOpen ? props.editorMenuHeight : 0}px)`),\n    transition: theme.transitions.create('height', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  appBar: {\n    width: (props) => (`calc(100% - ${(props.toolsMenuOpen ? props.toolsMenuWidth : 0) + (props.inspectorMenuOpen ? props.inspectorMenuWidth : 0)}px)`),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    background: 'none',\n    boxShadow: 'none',\n  },\n  appBarShiftLeft: {\n    marginLeft: (props) => (props.toolsMenuWidth),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  appBarShiftRight: {\n    marginRight: (props) => (props.inspectorMenuWidth),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  renderArea: {\n    flexGrow: 1,\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: 0,\n    marginRight: 0,\n    height: '100%',\n  },\n  renderAreaShiftLeft: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: (props) => (props.toolsMenuWidth),\n  },\n  renderAreaShiftRight: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginRight: (props) => (props.inspectorMenuWidth),\n  },\n  bottomAppBar: {\n    width: (props) => (`calc(100% - ${(props.toolsMenuOpen ? props.toolsMenuWidth : 0) + (props.inspectorMenuOpen ? props.inspectorMenuWidth : 0)}px)`),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    top: 'auto',\n    bottom: (props) => (props.editorMenuOpen ? props.editorMenuHeight : 0),\n    background: 'none',\n    boxShadow: 'none',\n  },\n  bottomToolbar: {\n    width: '100%',\n  },\n  inspectorButton: {\n    marginLeft: 'auto',\n  },\n}));\n\nconst AppView = ({\n  children,\n  editorMenuOpen,\n  editorMenuHeight,\n  setEditorMenuOpen,\n  toolsMenuOpen,\n  toolsMenuWidth,\n  inspectorMenuOpen,\n  inspectorMenuWidth,\n  setInspectorMenuOpen,\n}) => {\n  // Local CSS classes\n  const classes = useStyles({\n    editorMenuOpen,\n    editorMenuHeight,\n    toolsMenuOpen,\n    toolsMenuWidth,\n    inspectorMenuOpen,\n    inspectorMenuWidth,\n  });\n\n  return (\n    <div\n      className={clsx(classes.root, {\n        [classes.rootShiftBottom]: editorMenuOpen,\n      })}\n    >\n      {toolsMenuOpen === true ? <Tools /> : null}\n      <main\n        className={clsx(classes.renderArea, {\n          [classes.renderAreaShiftLeft]: toolsMenuOpen,\n          [classes.renderAreaShiftRight]: inspectorMenuOpen,\n        })}\n      >\n        {children}\n        <AppBar\n          position=\"fixed\"\n          color=\"primary\"\n          className={clsx(classes.bottomAppBar, {\n            [classes.appBarShiftLeft]: toolsMenuOpen,\n            [classes.appBarShiftRight]: inspectorMenuOpen,\n          })}\n        >\n          <Toolbar className={classes.bottomToolbar}>\n            {editorMenuOpen !== true ? (\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                onClick={() => { setEditorMenuOpen(!editorMenuOpen); }}\n                edge=\"end\"\n                className={classes.menuButton}\n              >\n                <CreateIcon />\n              </IconButton>\n            ) : null}\n            {inspectorMenuOpen !== true ? (\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open add element\"\n                onClick={() => { setInspectorMenuOpen(!inspectorMenuOpen); }}\n                edge=\"end\"\n                className={classes.inspectorButton}\n              >\n                <InfoOutlinedIcon />\n              </IconButton>\n            ) : null}\n          </Toolbar>\n        </AppBar>\n      </main>\n      {inspectorMenuOpen === true ? <Inspector /> : null}\n      {editorMenuOpen === true ? <Editor /> : null}\n    </div>\n  );\n};\n\nAppView.whyDidYouRender = true;\n\nAppView.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  editorMenuOpen: PropTypes.bool.isRequired,\n  editorMenuHeight: PropTypes.number.isRequired,\n  setEditorMenuOpen: PropTypes.func.isRequired,\n  toolsMenuOpen: PropTypes.bool.isRequired,\n  toolsMenuWidth: PropTypes.number.isRequired,\n  inspectorMenuOpen: PropTypes.bool.isRequired,\n  inspectorMenuWidth: PropTypes.number.isRequired,\n  setInspectorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default memo(AppView);\n","import { useMemo } from 'react';\nimport * as THREE from 'three';\n\n// Finds the values needed for @react-three/fiber's props\nconst ThreeUsedProps = (props) => {\n  const propKeys = useMemo(\n    () => Object.keys(props).filter((prop) => new THREE[props.type]()[prop] !== undefined),\n    [props],\n  );\n  const filteredProps = useMemo(() => propKeys\n    .filter((key) => propKeys.includes(key))\n    .reduce((obj, key) => {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = props[key];\n      return obj;\n    }, {}), [propKeys, props]);\n  return filteredProps;\n};\n\n// Finds the values needed for @react-three/fiber's args array\nconst ThreeParamsToArgs = (props) => {\n  const filteredProps = ThreeUsedProps(props);\n\n  const params = useMemo(\n    () => (new THREE[props.type]().parameters !== undefined\n      ? new THREE[props.type]().parameters : filteredProps),\n    [props, filteredProps],\n  );\n  const args = useMemo(() => (params === undefined ? [] : Object.keys(params).map((param) => {\n    if (param === 'color') return `#${new THREE.Color(props[param]).getHexString()}`;\n    return props[param];\n  })), [props, params]);\n\n  return args;\n};\n\nexport {\n  ThreeUsedProps,\n  ThreeParamsToArgs,\n};\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { createContext } from 'react';\n\nimport { AppContext, appContextValue } from './AppManager';\nimport { ThreeObjectsContext, threeObjectsContextValue } from './ThreeObjectsManager';\nimport { PeersContext, peersContextValue } from './PeersManager';\nimport { ConnectionsContext, connectionsContextValue } from './ConnectionsManager';\nimport { GeneratorsContext, generatorsContextValue } from './GeneratorsManager';\nimport { DevicesContext, devicesContextValue } from './DevicesManager';\nimport { TransformsContext, transformsContextValue } from './TransformsManager';\n\nexport const WorldContext = createContext(null);\nexport const worldContextValue = {};\n\nconst WorldManager = ({\n  children,\n}) => (\n  <AppContext.Provider value={appContextValue}>\n    <ThreeObjectsContext.Provider value={threeObjectsContextValue}>\n      <PeersContext.Provider value={peersContextValue}>\n        <ConnectionsContext.Provider value={connectionsContextValue}>\n          <GeneratorsContext.Provider value={generatorsContextValue}>\n            <DevicesContext.Provider value={devicesContextValue}>\n              <TransformsContext.Provider value={transformsContextValue}>\n                <WorldContext.Provider value={worldContextValue}>\n                  {children}\n                </WorldContext.Provider>\n              </TransformsContext.Provider>\n            </DevicesContext.Provider>\n          </GeneratorsContext.Provider>\n        </ConnectionsContext.Provider>\n      </PeersContext.Provider>\n    </ThreeObjectsContext.Provider>\n  </AppContext.Provider>\n);\n\nexport default WorldManager;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport { useState, useEffect } from 'react';\n\nconst useUserMedia = (requestedMedia) => {\n  const [mediaStream, setMediaStream] = useState(null);\n\n  useEffect(() => {\n    async function enableStream() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(requestedMedia);\n        setMediaStream(stream);\n      } catch (err) {\n        // Removed for brevity\n      }\n    }\n\n    if (!mediaStream) {\n      enableStream();\n    } else {\n      return function cleanup() {\n        mediaStream.getTracks().forEach((track) => {\n          track.stop();\n        });\n      };\n    }\n    return mediaStream;\n  }, [mediaStream, requestedMedia]);\n\n  return mediaStream;\n};\n\nuseUserMedia.propTypes = {\n  requestedMedia: PropTypes.string.isRequired,\n};\n\nexport default useUserMedia;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useRef } from 'react';\nimport useUserMedia from '../../../contexts/useUserMedia';\n\nconst CAPTURE_OPTIONS = {\n  audio: false,\n  video: { facingMode: 'environment' },\n};\n\nconst CameraView = () => {\n  const videoRef = useRef();\n  const mediaStream = useUserMedia(CAPTURE_OPTIONS);\n\n  if (mediaStream && videoRef.current && !videoRef.current.srcObject) {\n    videoRef.current.srcObject = mediaStream;\n  }\n\n  function handleCanPlay() {\n    videoRef.current.play();\n  }\n\n  return (\n    <video width=\"100%\" height=\"100%\" ref={videoRef} onCanPlay={handleCanPlay} autoPlay playsInline muted />\n  );\n};\n\nexport default CameraView;\n","import { useCallback, useState } from 'react';\n\nexport default function useForceUpdate() {\n  const [, setState] = useState({});\n  return useCallback(() => setState({}), []);\n}\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\n\nexport const GeneratorContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst GeneratorManager = ({\n  children,\n  ...props\n}) => {\n  const identifier = useRef(Symbol('Generator'));\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [type, setType] = useState(props.type || '');\n  const [resolution, setResolution] = useState(props.resolution || 1);\n  const [rpm, setRpm] = useState(props.rpm || 1000);\n  const [loop, setLoop] = useState(props.loop || true);\n  const [paused, setPaused] = useState(props.paused || false);\n\n  const [position, setPosition] = useState([0, 0, 0]);\n\n  useEffect(() => { events.publish(`${uuid}-position-updated`, position); }, [uuid, position, events]);\n\n  const { registerGenerator, unregisterGenerator } = useGeneratorsContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const generatorRef = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n\n    name,\n\n    type,\n    setType,\n    resolution,\n    setResolution,\n    rpm,\n    setRpm,\n    loop,\n    setLoop,\n    paused,\n    setPaused,\n    position,\n    setPosition,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name,\n\n    type, setType,\n    resolution, setResolution,\n    rpm, setRpm,\n    loop, setLoop,\n    paused, setPaused,\n    position, setPosition,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => generatorRef, [generatorRef]);\n\n  // // On load, register object with app context\n  useEffect(() => {\n    registerGenerator(uuid, generatorRef);\n    return () => unregisterGenerator(uuid, generatorRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    resolution,\n    setResolution,\n    rpm,\n    setRpm,\n    loop,\n    setLoop,\n    paused,\n    setPaused,\n    position,\n    setPosition,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n\n    type, setType,\n    resolution, setResolution,\n    rpm, setRpm,\n    loop, setLoop,\n    paused, setPaused,\n    position, setPosition,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <GeneratorContext.Provider value={contextValue}>\n      {children}\n    </GeneratorContext.Provider>\n  );\n};\n\nGeneratorManager.whyDidYouRender = false;\n\nGeneratorManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  uuid: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  resolution: PropTypes.number.isRequired,\n  rpm: PropTypes.number.isRequired,\n  loop: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n};\n\nexport default GeneratorManager;\n","import { useContext } from 'react';\nimport { GeneratorContext } from '../managers/GeneratorManager';\n\nexport default function useGeneratorContext() {\n  return useContext(GeneratorContext);\n}\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable react/jsx-filename-extension */\n\nimport {\n  useState, useMemo, useCallback, useEffect,\n} from 'react';\n\nimport { useSpring } from '@react-spring/core';\nimport useGeneratorContext from '../../../contexts/useGeneratorContext';\n\nimport DrawCircle from '../../../shapes/drawCircle';\n\nconst OrbitGenerator = ({ toProp }) => {\n  const {\n    type, resolution, rpm, loop, paused, setPosition: setGenPosition,\n  } = useGeneratorContext();\n\n  const [animMili] = useState(((60 * 1000) / rpm) / (360 / resolution));\n\n  const points = useMemo(() => {\n    switch (type) {\n      default:\n      case 'sine':\n        return DrawCircle(resolution);\n    }\n  }, [type, resolution]);\n\n  const toPoints = useMemo(() => [\n    ...points.map((pos) => ({ [toProp]: [pos[0], pos[1], 0] })),\n  ], [points, toProp]);\n\n  const handleChange = useCallback((result) => {\n    if (result.value !== undefined) {\n      setGenPosition(result.value[toProp]);\n    }\n  }, [toProp, setGenPosition]);\n\n  const config = useMemo(() => ({\n    pause: paused,\n    loop,\n    to: toPoints,\n    config: {\n      duration: animMili,\n      friction: 5,\n    },\n    onChange: handleChange,\n  }), [toPoints, animMili, paused, loop, handleChange]);\n\n  const [, api] = useSpring(() => (config));\n  useEffect(() => {\n    api.stop();\n    api.start(config);\n  }, [api, config]);\n\n  return null;\n};\n\nOrbitGenerator.whyDidYouRender = false;\n\nexport default OrbitGenerator;\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport {\n  useState, useMemo, useCallback, useEffect,\n} from 'react';\n\nimport { useSpring } from '@react-spring/core';\nimport useGeneratorContext from '../../../contexts/useGeneratorContext';\n\nimport DrawSine from '../../../shapes/drawSine';\n\nconst SinewaveGenerator = ({ toProp }) => {\n  const {\n    type, resolution, rpm, loop, paused, setPosition: setGenPosition,\n  } = useGeneratorContext();\n  const [animMili] = useState(((60 * 1000) / rpm) / (360 / resolution));\n\n  const points = useMemo(() => {\n    switch (type) {\n      default:\n      case 'sine':\n        return DrawSine(resolution);\n    }\n  }, [type, resolution]);\n\n  const toPoints = useMemo(() => [\n    ...points.map((pos) => ({ [toProp]: [pos[0], pos[1], 0] })),\n  ], [points, toProp]);\n\n  const handleChange = useCallback((result) => {\n    if (result.value !== undefined) {\n      setGenPosition(result.value[toProp]);\n    }\n  }, [toProp, setGenPosition]);\n\n  const config = useMemo(() => ({\n    pause: paused,\n    loop,\n    to: toPoints,\n    config: {\n      duration: animMili,\n      friction: 5,\n    },\n    onChange: handleChange,\n  }), [toPoints, animMili, paused, loop, handleChange]);\n\n  const [, api] = useSpring(() => (config));\n  useEffect(() => {\n    api.stop();\n    api.start(config);\n  }, [api, config]);\n\n  return null;\n};\n\nSinewaveGenerator.whyDidYouRender = false;\n\nSinewaveGenerator.propTypes = {\n  toProp: PropTypes.string.isRequired,\n};\n\nexport default SinewaveGenerator;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport OrbitGenerator from './Orbit/index';\nimport SinewaveGenerator from './Sinewave/index';\nimport GeneratorManager, { DefaultProps } from '../../managers/GeneratorManager';\n\nconst GeneratorsView = ({ ...props }) => {\n  switch (props.type.toLowerCase()) {\n    default:\n    case 'orbit':\n      return (\n        <GeneratorManager {...DefaultProps} type={props.type} {...props}>\n          <OrbitGenerator />\n        </GeneratorManager>\n      );\n    case 'sinewave':\n      return (\n        <GeneratorManager {...DefaultProps} type={props.type} {...props}>\n          <SinewaveGenerator toProp=\"value\" />\n        </GeneratorManager>\n      );\n  }\n};\n\nGeneratorsView.whyDidYouRender = true;\n\nexport default memo(GeneratorsView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport GeneratorsView from './view';\n\nconst Generators = ({ generators }) => generators.map((gen) => (<GeneratorsView key={`rt_${gen.type}_generator_${gen.uuid}`} {...gen} />));\n\nGenerators.whyDidYouRender = false;\n\nexport default memo(Generators);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable react/destructuring-assignment */\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useConnectionsContext from '../contexts/useConnectionsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useAppContext from '../contexts/useAppContext';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport useDevicesContext from '../contexts/useDevicesContext';\nimport useTransformsContext from '../contexts/useTransformsContext';\nimport useThreeObjectsContext from '../contexts/useThreeObjectsContext';\n\nexport const PeerContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst PeerManager = ({\n  children,\n  ...props\n}) => {\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { registerPeer, unregisterPeer } = usePeersContext();\n  const { getMe, findConnection } = useConnectionsContext();\n  const forceUpdate = useForceUpdate();\n\n  const { findThreeObject } = useThreeObjectsContext();\n  const { findGenerator } = useGeneratorsContext();\n  const { findDevice } = useDevicesContext();\n  const { findTransform } = useTransformsContext();\n\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [type, setType] = useState(props.type);\n\n  const [data, setData] = useState(props.data || [0, 0, 0]);\n\n  const [connection, setConnection] = useState();\n\n  useEffect(() => {\n    setConnection(findConnection(uuid));\n  }, [findConnection, uuid]);\n\n  // Inputs\n  const updateFromInput = useCallback((prop, from, val) => {\n    const me = getMe();\n    // findConnection();\n    switch (prop) {\n      default:\n        break;\n      case 'data':\n        if (connection !== undefined) {\n          if (typeof connection.sendData === 'function') {\n            connection.sendData({\n              type: from, payload: val, uuid: me.uuid, from: me.connectionId, timestamp: Date.now,\n            });\n            setData(val);\n          }\n        }\n        break;\n    }\n  }, [connection, getMe]);\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const obj = findThreeObject(c.from);\n      if (obj) { obj.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n\n      const transform = findTransform(c.from);\n      if (transform) { transform.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n    });\n  }, [\n    connections,\n    uuid,\n    findGenerator,\n    findDevice,\n    findTransform,\n    findThreeObject,\n    updateFromInput,\n  ]);\n\n  useEffect(() => { events.publish(`${uuid}-data-updated`, data); }, [uuid, data, events]);\n\n  // Reference to object properties\n  const peerRef = useMemo(() => ({\n    uuid,\n    name,\n\n    data,\n    setData,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name,\n\n    data, setData,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => peerRef, [peerRef]);\n\n  // On load, register object with app context\n  useEffect(() => {\n    registerPeer(uuid, peerRef);\n    return () => unregisterPeer(uuid, peerRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    name,\n\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    data,\n    setData,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    name,\n\n    node,\n    getRef,\n\n    type, setType,\n    data, setData,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <PeerContext.Provider value={contextValue}>\n      {children}\n    </PeerContext.Provider>\n  );\n};\n\nPeerManager.whyDidYouRender = false;\n\nexport default PeerManager;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport PeerManager, { DefaultProps } from '../../managers/PeerManager';\n\nconst PeerView = ({ ...props }) => (\n  <PeerManager {...DefaultProps} type={props.type} {...props} />\n);\n\nPeerView.whyDidYouRender = true;\n\nexport default memo(PeerView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport PeerView from './view';\n\nconst Peers = ({ peers }) => peers.map((peer) => (<PeerView key={`rt_${peer.type}_peer_${peer.uuid}`} {...peer} />));\n\nPeers.whyDidYouRender = false;\n\nexport default memo(Peers);\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\n\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useDevicesContext from '../contexts/useDevicesContext';\nimport useAppContext from '../contexts/useAppContext';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useTransformsContext from '../contexts/useTransformsContext';\nimport useThreeObjectsContext from '../contexts/useThreeObjectsContext';\n\nexport const DeviceContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst DeviceManager = ({\n  children,\n  ...props\n}) => {\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { findThreeObject } = useThreeObjectsContext();\n  const { findGenerator } = useGeneratorsContext();\n  const { findPeer } = usePeersContext();\n  const { findTransform } = useTransformsContext();\n\n  const identifier = useRef(Symbol('Device'));\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [displayName] = useState(props.displayName);\n  const [type, setType] = useState(props.type || '');\n\n  const [position, setPosition] = useState(props.position || [0, 0, 0]);\n\n  // Inputs\n  const updateFromInput = (prop, val) => {\n    switch (prop) {\n      default:\n        break;\n      case 'position':\n        setPosition(val);\n        break;\n    }\n  };\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const peer = findPeer(c.from);\n      if (peer) { peer.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const obj = findThreeObject(c.from);\n      if (obj) { obj.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const transform = findTransform(c.from);\n      if (transform) { transform.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findPeer, findTransform, findThreeObject]);\n\n  // Outputs\n  useEffect(() => { events.publish(`${uuid}-position-updated`, position); }, [uuid, position, events]);\n\n  const { registerDevice, unregisterDevice } = useDevicesContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const deviceRef = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n\n    name,\n    displayName,\n\n    type,\n    setType,\n\n    position,\n    setPosition,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name, displayName,\n\n    type, setType,\n\n    position, setPosition,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => deviceRef, [deviceRef]);\n\n  // On load, register object with app context\n\n  useEffect(() => {\n    registerDevice(uuid, deviceRef);\n    return () => unregisterDevice(uuid, deviceRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    position,\n    setPosition,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n\n    type, setType,\n    position, setPosition,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <DeviceContext.Provider value={contextValue}>\n      {children}\n    </DeviceContext.Provider>\n  );\n};\n\nDeviceManager.whyDidYouRender = false;\n\nDeviceManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  uuid: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  position: PropTypes.shape([]).isRequired,\n};\n\nexport default DeviceManager;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport { useCallback, useEffect } from 'react';\n\nimport useDeviceContext from '../../../contexts/useDeviceContext';\n\nconst MouseDevice = () => {\n  const { setPosition } = useDeviceContext();\n\n  const updateMousePosition = useCallback((ev) => {\n    setPosition([ev.clientX, ev.clientY, 0]);\n  }, [setPosition]);\n\n  useEffect(() => {\n    window.addEventListener('mousemove', updateMousePosition);\n\n    return () => window.removeEventListener('mousemove', updateMousePosition);\n  }, [updateMousePosition]);\n\n  return null;\n};\n\nMouseDevice.whyDidYouRender = false;\n\nexport default MouseDevice;\n","import { useContext } from 'react';\nimport { DeviceContext } from '../managers/DeviceManager';\n\nexport default function useDeviceContext() {\n  return useContext(DeviceContext);\n}\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport {\n  useState, useMemo, useCallback, useEffect,\n} from 'react';\n\nimport { useSpring } from '@react-spring/core';\nimport useGeneratorContext from '../../../contexts/useGeneratorContext';\n\nimport DrawSine from '../../../shapes/drawSine';\n\nconst KeyboardDevice = ({ toProp }) => {\n  const {\n    type, resolution, rpm, loop, paused, setPosition: setGenPosition,\n  } = useGeneratorContext();\n  const [animMili] = useState(((60 * 1000) / rpm) / (360 / resolution));\n\n  const points = useMemo(() => {\n    switch (type) {\n      default:\n      case 'sine':\n        return DrawSine(resolution);\n    }\n  }, [type, resolution]);\n\n  const toPoints = useMemo(() => [\n    ...points.map((pos) => ({ [toProp]: [pos[0], pos[1], 0] })),\n  ], [points, toProp]);\n\n  const handleChange = useCallback((result) => {\n    if (result.value !== undefined) {\n      setGenPosition(result.value[toProp]);\n    }\n  }, [toProp, setGenPosition]);\n\n  const config = useMemo(() => ({\n    pause: paused,\n    loop,\n    to: toPoints,\n    config: {\n      duration: animMili,\n      friction: 5,\n    },\n    onChange: handleChange,\n  }), [toPoints, animMili, paused, loop, handleChange]);\n\n  const [, api] = useSpring(() => (config));\n  useEffect(() => {\n    api.stop();\n    api.start(config);\n  }, [api, config]);\n\n  return null;\n};\n\nKeyboardDevice.whyDidYouRender = false;\n\nKeyboardDevice.propTypes = {\n  toProp: PropTypes.string.isRequired,\n};\n\nexport default KeyboardDevice;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport MouseDevice from './Mouse/index';\nimport KeyboardDevice from './Keyboard/index';\nimport DeviceManager, { DefaultProps } from '../../managers/DeviceManager';\n\nconst DevicesView = ({ ...props }) => {\n  switch (props.type.toLowerCase()) {\n    default:\n    case 'mouse':\n      return (\n        <DeviceManager {...DefaultProps} type={props.type} {...props}>\n          <MouseDevice />\n        </DeviceManager>\n      );\n    case 'keyboard':\n      return (\n        <DeviceManager {...DefaultProps} type={props.type} {...props}>\n          <KeyboardDevice />\n        </DeviceManager>\n      );\n  }\n};\n\nDevicesView.whyDidYouRender = true;\n\nexport default memo(DevicesView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport DevicesView from './view';\n\nconst Devices = ({ devices }) => devices.map((dev) => (<DevicesView key={`rt_${dev.type}_device_${dev.uuid}`} {...dev} />));\n\nDevices.whyDidYouRender = false;\n\nexport default memo(Devices);\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useAppContext from '../contexts/useAppContext';\nimport useTransformsContext from '../contexts/useTransformsContext';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useDevicesConext from '../contexts/useDevicesContext';\n\nexport const TransformContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst TransformManager = ({\n  children,\n  ...props\n}) => {\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { findGenerator } = useGeneratorsContext();\n  const { findPeer } = usePeersContext();\n  const { findDevice } = useDevicesConext();\n\n  const identifier = useRef(Symbol('Transform'));\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [displayName] = useState(props.displayName);\n  const [type, setType] = useState(props.type || '');\n\n  const [amount, setAmount] = useState(props.amount || 1);\n  const [value, setValue] = useState(props.value || [0, 0, 0]);\n\n  // Inputs\n  const updateFromInput = (prop, val) => {\n    setValue(val);\n  };\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const peer = findPeer(c.from);\n      if (peer) { peer.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findPeer, findDevice]);\n\n  useEffect(() => { events.publish(`${uuid}-value-updated`, value); }, [value, events, uuid]);\n\n  const { registerTransform, unregisterTransform } = useTransformsContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const peerRef = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n\n    name,\n    displayName,\n\n    type,\n    setType,\n\n    value,\n    setValue,\n    amount,\n    setAmount,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name, displayName,\n\n    type, setType,\n\n    value, setValue,\n    amount, setAmount,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => peerRef, [peerRef]);\n\n  // On load, register object with app context\n  useEffect(() => {\n    // const id = identifier.current;\n    registerTransform(uuid, peerRef);\n    return () => unregisterTransform(uuid, peerRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    value,\n    setValue,\n    amount,\n    setAmount,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n\n    type, setType,\n    value, setValue,\n    amount, setAmount,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <TransformContext.Provider value={contextValue}>\n      {children}\n    </TransformContext.Provider>\n  );\n};\n\nTransformManager.whyDidYouRender = false;\n\nTransformManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default TransformManager;\n","import { useEffect } from 'react';\n\nimport useAppContext from '../../../contexts/useAppContext';\nimport useDevicesContext from '../../../contexts/useDevicesContext';\nimport useGeneratorsContext from '../../../contexts/useGeneratorsContext';\nimport useTransformContext from '../../../contexts/useTransformContext';\n\nconst MultiplyTransform = ({ ...props }) => {\n  const { uuid, setValue: setTransValue } = useTransformContext();\n  const { sceneJSON } = useAppContext();\n\n  const { connections } = sceneJSON;\n\n  const { findGenerator } = useGeneratorsContext();\n  const { findDevice } = useDevicesContext();\n\n  // Inputs\n  useEffect(() => {\n    const updateFromInput = (prop, val) => {\n      switch (prop) {\n        default:\n          break;\n        case 'value':\n          setTransValue(val.map((v) => (v * props.amount)));\n          break;\n      }\n    };\n\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findDevice, props, setTransValue]);\n\n  return null;\n};\n\nMultiplyTransform.whyDidYouRender = false;\n\nexport default MultiplyTransform;\n","import { useContext } from 'react';\nimport { TransformContext } from '../managers/TransformManager';\n\nexport default function useTransformContext() {\n  return useContext(TransformContext);\n}\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport TransformManager, { DefaultProps } from '../../managers/TransformManager';\n\nimport MultiplyTransform from './Multiply/index';\n\nconst TransformsView = ({ ...props }) => {\n  switch (props.type) {\n    default:\n    case 'Orbit':\n      return (\n        <TransformManager {...DefaultProps} type={props.type} {...props}>\n          <MultiplyTransform {...props} />\n        </TransformManager>\n      );\n  }\n};\n\nTransformsView.whyDidYouRender = true;\n\nexport default memo(TransformsView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport TransformsView from './view';\n\nconst Transforms = ({ transforms }) => transforms.map((transform) => (<TransformsView key={`rt_${transform.type}_transform_${transform.uuid}`} {...transform} />));\n\nTransforms.whyDidYouRender = false;\n\nexport default memo(Transforms);\n","/* eslint-disable object-shorthand */\n/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createElement, memo } from 'react';\n\nimport { Canvas } from '@react-three/fiber';\nimport { makeStyles } from '@material-ui/core';\nimport { OrbitControls } from '@react-three/drei';\n\nimport { ThreeParamsToArgs } from '../utils/threeParams';\n\nimport useAppContext from '../contexts/useAppContext';\n\nimport WorldManager from '../managers/WorldManager';\nimport CameraView from '../components/@views/CameraView';\n\nimport Generators from '../inputs/generators/index';\nimport Peers from '../inputs/peers/index';\nimport Devices from '../inputs/devices/index';\nimport Transforms from '../inputs/transforms/index';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    position: 'relative',\n    userSelect: 'none',\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nconst World = ({\n  children,\n}) => {\n  const { sceneJSON } = useAppContext();\n  const {\n    object, camera, generators, peers, devices, transforms,\n  } = sceneJSON;\n\n  const { fog } = object;\n  const classes = useStyles();\n\n  switch (object.type) {\n    case 'Camera':\n      return (\n        <div className={classes.root}>\n          <WorldManager>\n            <CameraView />\n          </WorldManager>\n        </div>\n      );\n    default:\n    case 'Scene':\n      return (\n        <div className={classes.root}>\n          <Canvas\n            shadows\n            camera={camera}\n            dpr={window.devicePixelRatio}\n          >\n            <WorldManager>\n              <Generators {...{ generators: generators }} />\n              <Peers {...{ peers: peers }} />\n              <Devices {...{ devices: devices }} />\n              <Transforms {...{ transforms: transforms }} />\n              {/* FOG */}\n              {fog !== undefined ? createElement(fog.type, { type: fog.type, attach: 'fog', args: ThreeParamsToArgs(fog) }, []) : null}\n              {children}\n              <OrbitControls enablePan enableZoom enableRotate />\n            </WorldManager>\n          </Canvas>\n        </div>\n      );\n  }\n};\n\nWorld.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default memo(World);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nconst RenderThreeChildrenView = ({\n  name,\n  node,\n  position,\n  rotation,\n  scale,\n  children,\n}) => (\n  <group name={name} ref={node} position={position} rotation={rotation} scale={scale}>\n    {children}\n  </group>\n);\n\nexport default memo(RenderThreeChildrenView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useThreeObjectsContext from '../contexts/useThreeObjectsContext';\nimport useAppContext from '../contexts/useAppContext';\n\nimport RenderThreeChildrenView from '../components/@objects/RenderThreeChildren/view';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useDevicesConext from '../contexts/useDevicesContext';\nimport useTransformsConext from '../contexts/useTransformsContext';\n\nexport const ThreeObjectContext = createContext(null);\nexport const ThreeObjectPositionContext = createContext(null);\nexport const ThreeObjectRotationContext = createContext(null);\nexport const ThreeObjectScaleContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst ThreeObjectManager = ({\n  name,\n  displayName,\n  type,\n  children,\n  ...props\n}) => {\n  const isMounted = useRef(false);\n\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { findGenerator } = useGeneratorsContext();\n  const { findPeer } = usePeersContext();\n  const { findDevice } = useDevicesConext();\n  const { findTransform } = useTransformsConext();\n\n  const identifier = useRef(Symbol('ThreeObject'));\n  const node = useRef(null);\n\n  const [uuid] = useState(props.uuid);\n  const [events] = useState(() => EventsManager());\n\n  const [disabled, setDisabled] = useState(props.disabled || false);\n  const [debug, setDebug] = useState(props.debug || false);\n\n  const [position, setPosition] = useState(props.position || [0, 0, 0]);\n  const [rotation, setRotation] = useState(props.rotation || [0, 0, 0]);\n  const [scale, setScale] = useState(props.scale || 1);\n\n  // Inputs\n  const updateFromInput = (prop, val) => {\n    switch (prop) {\n      default:\n        break;\n      case 'position':\n        setPosition(val);\n        break;\n      case 'rotation':\n        setRotation(val);\n        break;\n      case 'scale':\n        setScale(val);\n        break;\n    }\n  };\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const peer = findPeer(c.from);\n      if (peer) { peer.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const transform = findTransform(c.from);\n      if (transform) { transform.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findPeer, findDevice, findTransform]);\n\n  // Outputs\n\n  // Limit publish events to once every...\n  // const broadcastThrottle = 1000/60;\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-disabled-updated`, disabled);\n      }\n    }\n  }, [disabled, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-debug-updated`, debug);\n      }\n    }\n  }, [debug, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-position-updated`, position);\n      }\n    }\n  }, [position, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-rotation-updated`, rotation);\n      }\n    }\n  }, [rotation, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-scale-updated`, scale);\n      }\n    }\n  }, [scale, events, uuid]);\n\n  const { registerThreeObject, unregisterThreeObject } = useThreeObjectsContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const threeObjectRef = useMemo(\n    () => ({\n      uuid,\n      id: identifier.current,\n\n      name,\n      displayName,\n      type,\n\n      disabled,\n      setDisabled,\n      debug,\n      setDebug,\n\n      position,\n      setPosition,\n      rotation,\n      setRotation,\n      scale,\n      setScale,\n\n      subscribe: events.subscribe,\n      unsubscribe: events.unsubscribe,\n    }),\n    [\n      uuid,\n      name, displayName, type,\n\n      disabled, setDisabled,\n      debug, setDebug,\n\n      position, setPosition,\n      rotation, setRotation,\n      scale, setScale,\n\n      events,\n    ],\n  );\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => threeObjectRef, [threeObjectRef]);\n\n  // On load, register object with app context\n  useEffect(() => {\n    isMounted.current = true;\n    registerThreeObject(uuid, threeObjectRef);\n    return () => {\n      isMounted.current = false;\n      unregisterThreeObject(uuid, threeObjectRef);\n    };\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    disabled,\n    setDisabled,\n    debug,\n    setDebug,\n\n    setPosition,\n    setRotation,\n    setScale,\n\n    forceUpdate,\n\n    ...events,\n  }), [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n    disabled, setDisabled,\n    debug, setDebug,\n    setPosition,\n    setRotation,\n    setScale,\n    forceUpdate,\n    events,\n  ]);\n\n  const positionContextValue = useMemo(() => ({ position }), [position]);\n  const rotationContextValue = useMemo(() => ({ rotation }), [rotation]);\n  const scaleContextValue = useMemo(() => ({ scale }), [scale]);\n\n  return (\n    <ThreeObjectContext.Provider value={contextValue}>\n      <ThreeObjectPositionContext.Provider value={positionContextValue}>\n        <ThreeObjectRotationContext.Provider value={rotationContextValue}>\n          <ThreeObjectScaleContext.Provider value={scaleContextValue}>\n            <RenderThreeChildrenView {...{\n              name,\n              node,\n              position,\n              rotation,\n              scale,\n            }}\n            >\n              {!disabled ? children : []}\n            </RenderThreeChildrenView>\n          </ThreeObjectScaleContext.Provider>\n        </ThreeObjectRotationContext.Provider>\n      </ThreeObjectPositionContext.Provider>\n    </ThreeObjectContext.Provider>\n  );\n};\n\nThreeObjectManager.whyDidYouRender = false;\n\nexport default ThreeObjectManager;\n","/* eslint-disable import/no-cycle */\n\nimport { useContext } from 'react';\n\nimport { SceneManagerContext } from '../managers/SceneManager';\n\nexport default function useSceneManager() {\n  return useContext(SceneManagerContext);\n}\n","export default function waitForMs(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n","/* eslint-disable import/no-cycle */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback, useContext, useRef, createContext,\n} from 'react';\n\nimport useAppContext from './contexts/useAppContext';\nimport useAppEvent from './contexts/useAppEvent';\nimport useThreeObjectContext from './contexts/useThreeObjectContext';\nimport useSceneManager from './contexts/useSceneManagerContext';\nimport waitForMs from './utils/waitForMs';\n\nexport const StoreContext = createContext(null);\n\nexport default function useThreeObjectStore(\n  key,\n  write,\n  read,\n) {\n  const { name, forceUpdate } = useThreeObjectContext();\n  const { getState, setState } = useContext(StoreContext);\n\n  const writeCallback = useRef(null);\n  writeCallback.current = write;\n\n  const readCallback = useRef(null);\n  readCallback.current = read;\n\n  useAppEvent(\n    'scene-init',\n    () => {\n      if (!readCallback.current) {\n        return;\n      }\n      if (!name) {\n        // eslint-disable-next-line no-console\n        console.error('Attempting to use ThreeObject store without a name.');\n        return;\n      }\n\n      const stored = getState(`${name}.${key}`);\n      if (stored != null) {\n        readCallback.current(stored);\n        waitForMs(0).then(forceUpdate);\n      }\n    },\n    [key, name],\n  );\n\n  const save = useCallback(async () => {\n    if (!name) return;\n    setState(`${name}.${key}`, writeCallback.current());\n  }, [key, name, setState]);\n\n  useAppEvent('scene-exit', save, [save]);\n  useAppEvent('save-game', save, [save]);\n\n  return getState(`${name}.${key}`);\n}\n\nexport function useThreeObjectStoreValue(key) {\n  const { name } = useThreeObjectContext();\n  const { getState } = useContext(StoreContext);\n\n  if (!name) {\n    // eslint-disable-next-line no-console\n    console.error('Attempting to use ThreeObject store without a name.');\n    return undefined;\n  }\n\n  const stored = getState(`${name}.${key}`);\n  return stored;\n}\n\nexport const GameStoreProvider = ({ children }) => {\n  const { getGameState, setGameState } = useAppContext();\n\n  const contextValue = {\n    getState: getGameState,\n    setState: setGameState,\n  };\n\n  return <StoreContext.Provider value={contextValue}>{children}</StoreContext.Provider>;\n};\n\nGameStoreProvider.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport const SceneStoreProvider = ({ children }) => {\n  const { getSceneState, setSceneState } = useSceneManager();\n\n  const contextValue = {\n    getState: getSceneState,\n    setState: setSceneState,\n  };\n\n  return <StoreContext.Provider value={contextValue}>{children}</StoreContext.Provider>;\n};\n\nSceneStoreProvider.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n","/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable import/no-cycle */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useMemo, useRef, useState, createContext,\n} from 'react';\nimport useAppContext from '../contexts/useAppContext';\n\nimport { SceneStoreProvider } from '../useThreeObjectStore';\n\nimport waitForMs from '../utils/waitForMs';\n\nexport const SceneManagerContext = createContext(null);\n\nexport const sceneContextValue = {};\n\nconst SceneManager = ({ defaultScene, children }) => {\n  const { publish } = useAppContext();\n  // support scene string format: 'sceneId:level'\n  const [initialScene, initialLevel = 0] = defaultScene.split(':');\n  const [currentScene, setScene] = useState(initialScene);\n  const prevLevel = useRef(-1);\n  const currentLevel = useRef(Number(initialLevel));\n  const sceneStore = useRef(new Map());\n  const api = useMemo(\n    () => ({\n      currentScene,\n      prevLevel: prevLevel.current,\n      currentLevel: currentLevel.current,\n      async setScene(nextScene) {\n        // eslint-disable-next-line prefer-const\n        let [targetScene, targetLevel = 0] = nextScene.split(':');\n        targetLevel = Number(targetLevel);\n\n        if (currentScene !== targetScene) {\n          // switch scene\n          if (currentScene !== '') {\n            await publish('scene-pre-exit', currentScene);\n            await publish('scene-exit', currentScene);\n            // always go to empty scene first and then to the target scene\n            // (this should help clearing cached react components)\n            setScene('');\n            await waitForMs(100);\n          }\n          prevLevel.current = -1;\n          currentLevel.current = targetLevel;\n          setScene(targetScene);\n        } else if (currentLevel.current !== targetLevel) {\n          // switch level\n          api.setLevel(targetLevel);\n        }\n      },\n      async setLevel(level) {\n        if (level !== currentLevel.current) {\n          prevLevel.current = currentLevel.current;\n          currentLevel.current = level;\n          await api.resetScene();\n        }\n      },\n      async resetScene() {\n        const prevScene = currentScene;\n        const formerCurrentLevel = currentLevel.current;\n        const formerPrevLevel = prevLevel.current;\n        // switch to empty scene\n        await api.setScene('');\n        await waitForMs(100);\n        // restore prev scene + level\n        prevLevel.current = formerPrevLevel;\n        currentLevel.current = formerCurrentLevel;\n        setScene(prevScene);\n      },\n      setSceneState(key, value) {\n        sceneStore.current.set(`${currentScene}.${key}`, value);\n      },\n      getSceneState(key) {\n        return sceneStore.current.get(`${currentScene}.${key}`);\n      },\n    }),\n    [currentScene, currentLevel, publish],\n  );\n\n  return (\n    <SceneManagerContext.Provider value={api}>\n      <SceneStoreProvider>\n        {children}\n      </SceneStoreProvider>\n    </SceneManagerContext.Provider>\n  );\n};\n\nSceneManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  defaultScene: PropTypes.string.isRequired,\n};\n\nexport default SceneManager;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n  createContext,\n} from 'react';\nimport { createPortal } from '@react-three/fiber';\nimport useSceneManager from './contexts/useSceneManagerContext';\n\nconst SceneContext = createContext(null);\n\nexport function useScene() {\n  return useContext(SceneContext);\n}\n\nexport const LevelContext = createContext(null);\n\nexport function useLevel() {\n  return useContext(LevelContext);\n}\n\nconst Scene = ({ id, sceneJSON, children }) => {\n  const {\n    currentScene,\n    currentLevel,\n    prevLevel,\n    resetScene,\n    setLevel,\n  } = useSceneManager();\n  const { object } = sceneJSON;\n  const [instances, setInstances] = useState([]);\n  // const idleCallback = useRef();\n\n  const initEvents = useCallback(async () => {\n\n    // await publish('scene-init', id);\n    // // ensure everything is ready on next idle callback\n    // idleCallback.current = window.requestIdleCallback(\n    //     () => {\n    //         // console.log('scene-ready', id);\n    //         publish('scene-ready', id);\n    //     },\n    //     { timeout: sceneReadyTimeout }\n    // );\n  }, [/* publish, id */]);\n\n  const contextValue = useMemo(\n    () => ({\n      instantiate(newElement, portalNode) {\n        const key = newElement.key == null ? Math.random() : newElement.key;\n        const instance = portalNode\n          ? createPortal(newElement, portalNode, null, key)\n          : React.cloneElement(newElement, { key });\n        setInstances((current) => [...current, instance]);\n        return () => {\n          setInstances((current) => current.filter((elem) => elem !== instance));\n        };\n      },\n      // pass through from scene manager\n      currentScene,\n      currentLevel,\n      prevLevel,\n      resetScene,\n      setLevel,\n      ...object,\n    }),\n    [currentScene, currentLevel, prevLevel, resetScene, setLevel, object],\n  );\n\n  const levelContextValue = useMemo(\n    () => ({\n      level: currentLevel,\n      transition: prevLevel < currentLevel ? -1 : 1,\n      enterPrevLevel() {\n        setLevel(currentLevel - 1);\n      },\n      enterNextLevel() {\n        setLevel(currentLevel + 1);\n      },\n    }),\n    [currentLevel, prevLevel, setLevel],\n  );\n\n  useEffect(() => {\n    // const cur = idleCallback.current;\n    if (currentScene === id) {\n      // entering scene\n      initEvents();\n    } else {\n      // leaving scene\n      setInstances([]);\n    }\n    // return () => window.cancelIdleCallback(cur);\n  }, [currentScene, id, initEvents]);\n\n  // skip rendering scene content\n  if (!currentScene.startsWith(id)) return null;\n\n  return (\n    <SceneContext.Provider value={contextValue}>\n      <LevelContext.Provider value={levelContextValue}>\n        <group>\n          {/* just to ensure node.parent in a GO still remains within the scene */}\n          <group>\n            <>{children}</>\n            <>{instances}</>\n          </group>\n        </group>\n      </LevelContext.Provider>\n    </SceneContext.Provider>\n  );\n};\n\nScene.propTypes = {\n  id: PropTypes.string.isRequired,\n  sceneJSON: PropTypes.shape({\n    object: PropTypes.shape({}),\n  }).isRequired,\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default Scene;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useRef, createElement, useMemo } from 'react';\n\nimport { useFrame } from '@react-three/fiber';\n\nimport * as THREE from 'three';\n\nimport ThreeObjectManager, { DefaultProps } from '../../../managers/ThreeObjectManager';\n\n// Recursive function to convert THREE.js Object Scene to @react-three/fiber objects\n// https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4\nconst RenderThreeChildren = ({\n  props,\n  geometries,\n  materials,\n  devices,\n  generators,\n  connections,\n}) => {\n  const childRef = useRef();\n\n  const objProps = useMemo(() => {\n    const threeObj = new THREE[props.type]();\n    const propKeys = Object.keys(props).filter((prop) => threeObj[prop] !== undefined);\n    const filteredProps = propKeys\n      .filter((key) => propKeys.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = props[key];\n        return obj;\n      }, {});\n    const {\n      layers,\n      geometry, material,\n      children,\n      shadow,\n      ...usedProps\n    } = filteredProps;\n\n    const params = threeObj.parameters;\n    const args = params === undefined ? [] : Object.keys(params).map((param) => props[param]);\n\n    return {\n      ...usedProps,\n      key: props.uuid,\n      args,\n      childRef,\n      matrixAutoUpdate: false,\n    };\n  }, [props]);\n\n  const geo = useMemo(() => geometries.filter((g) => g.uuid === props.geometry)[0],\n    [props, geometries]);\n\n  const geoProps = useMemo(() => {\n    if (geo === undefined) return {};\n    const threeObj = new THREE[geo.type]();\n\n    const propKeys = Object.keys(geo).filter((prop) => threeObj[prop] !== undefined);\n    const filteredProps = propKeys\n      .filter((key) => propKeys.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = geo[key];\n        return obj;\n      }, {});\n    const {\n      uuid, type,\n      geometry, material,\n      children,\n      matrix,\n      ...usedProps\n    } = filteredProps;\n\n    const params = threeObj.parameters;\n    const args = params === undefined ? [] : Object.keys(params).map((param) => geo[param]);\n\n    args.push(usedProps);\n\n    return {\n      key: geo.uuid,\n      args,\n    };\n  }, [geo]);\n\n  const mat = useMemo(() => materials.filter((m) => m.uuid === props.material)[0],\n    [props, materials]);\n  const matProps = useMemo(() => {\n    if (mat === undefined) return {};\n    const threeObj = new THREE[mat.type]();\n\n    const propKeys = Object.keys(mat).filter((prop) => threeObj[prop] !== undefined);\n    const filteredProps = propKeys\n      .filter((key) => propKeys.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = mat[key];\n        return obj;\n      }, {});\n    const {\n      uuid, type,\n      geometry, material,\n      children,\n      matrix,\n      ...usedProps\n    } = filteredProps;\n\n    const params = threeObj.parameters;\n    const args = params === undefined ? [] : Object.keys(params).map((param) => mat[param]);\n\n    args.push(usedProps);\n\n    return {\n      key: mat.uuid,\n      args,\n    };\n  }, [mat]);\n\n  // Only need material and geometry for objects\n  const matGeoChildren = (props.geometry !== undefined && props.material !== undefined) ? [\n    createElement(geo.type, geoProps, []),\n    createElement(mat.type, matProps, []),\n  ] : [];\n\n  // TODO: More robust way to handle uniform values\n  useFrame((state) => {\n    if (childRef.current) {\n      if (childRef.current.material) {\n        if (childRef.current.material.uniforms) {\n          if (childRef.current.material.uniforms.time) {\n            childRef.current.material.uniforms.time.value = state.clock.elapsedTime;\n          }\n        }\n      }\n    }\n  });\n\n  return (\n    <ThreeObjectManager key={`rt_${props.uuid}`} {...DefaultProps} type={props.type} {...props}>\n      {createElement(\n        props.type,\n        objProps,\n        [\n          ...matGeoChildren,\n          props.children && props.children.length > 0\n            ? props.children.map((childProps) => RenderThreeChildren(\n              {\n                props: childProps,\n                geometries,\n                materials,\n                devices,\n                generators,\n                connections,\n              },\n            )) : null,\n        ],\n      )}\n    </ThreeObjectManager>\n  );\n};\n\nexport default RenderThreeChildren;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport RenderThreeChildren from '../../components/@objects/RenderThreeChildren';\n\nconst DynamicScene = ({ sceneJSON }) => (sceneJSON.object.children.map((childProps) => (\n  <RenderThreeChildren\n    key={childProps.uuid}\n    props={childProps}\n    geometries={sceneJSON.geometries}\n    materials={sceneJSON.materials}\n    devices={sceneJSON.devices}\n    generators={sceneJSON.generators}\n    connections={sceneJSON.connections}\n  />\n)));\n\nDynamicScene.whyDidYouRender = true;\n\nexport default memo(DynamicScene);\n","/* eslint-disable react/jsx-filename-extension */\nimport React, { useCallback, useEffect, useRef } from 'react';\n\nimport AppView from './AppView';\nimport World from './@RecklessCore/world';\nimport SceneManager from './@RecklessCore/managers/SceneManager';\nimport Scene from './@RecklessCore/Scene';\nimport DynamicScene from './@RecklessCore/scenes/Dynamic/index';\n\nimport useAppContext from './@RecklessCore/contexts/useAppContext';\nimport useEditorMenuContext from './@RecklessCore/contexts/useEditorMenuContext';\nimport useToolsMenuContext from './@RecklessCore/contexts/useToolsMenuContext';\nimport useInspectorMenuContext from './@RecklessCore/contexts/useInspectorMenuContext';\n\n// import Outputs from './@RecklessCore/outputs/index';\n\nconst App = () => {\n  const {\n    publish, subscribe, sceneJSON, setSceneJSON,\n  } = useAppContext();\n  const { editorMenuHeight, editorMenuOpen, setEditorMenuOpen } = useEditorMenuContext();\n  const { toolsMenuWidth, toolsMenuOpen, setToolsMenuOpen } = useToolsMenuContext();\n  const { inspectorMenuWidth, inspectorMenuOpen, setInspectorMenuOpen } = useInspectorMenuContext();\n\n  const isMounted = useRef(false);\n\n  const updateScene = useCallback((data) => { // update data only when peer list is modified\n    if (isMounted.current) {\n      setSceneJSON(data);\n    }\n  }, [setSceneJSON]);\n\n  useEffect(() => {\n    if (sceneJSON !== undefined) {\n      isMounted.current = true;\n      subscribe('scene-changed', updateScene);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [isMounted, updateScene, subscribe, sceneJSON]);\n\n  return (\n    <AppView {...{\n      editorMenuOpen,\n      editorMenuHeight,\n      setEditorMenuOpen,\n      toolsMenuOpen,\n      toolsMenuWidth,\n      setToolsMenuOpen,\n      inspectorMenuOpen,\n      inspectorMenuWidth,\n      setInspectorMenuOpen,\n    }}\n    >\n      <World {...{ sceneJSON }}>\n        <SceneManager {...{ defaultScene: 'dynamic', publish }}>\n          <Scene {...{ id: 'dynamic', sceneJSON }}>\n            <DynamicScene {...{ sceneJSON }} />\n          </Scene>\n        </SceneManager>\n      </World>\n    </AppView>\n  );\n};\n\nApp.whyDidYouRender = true;\n\nexport default App;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable no-console */\n\nimport './wdyr';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { ThemeProvider } from '@material-ui/styles';\nimport { CssBaseline, unstable_createMuiStrictModeTheme as createMuiTheme } from '@material-ui/core';\nimport { Palette } from '@material-ui/core/styles/createPalette';\n\nimport App from './App';\n\nimport AppManager from './@RecklessCore/managers/AppManager';\nimport ThreeObjectsManager from './@RecklessCore/managers/ThreeObjectsManager';\nimport PeersManager from './@RecklessCore/managers/PeersManager';\nimport ConnectionsManager from './@RecklessCore/managers/ConnectionsManager';\n\nimport DevicesManager from './@RecklessCore/managers/DevicesManager';\nimport GeneratorsManager from './@RecklessCore/managers/GeneratorsManager';\nimport TransformsManager from './@RecklessCore/managers/TransformsManager';\n\nimport InspectorMenuManager from './@RecklessCore/managers/InspectorMenuManager';\nimport ToolsMenuManager from './@RecklessCore/managers/ToolsMenuManager';\nimport EditorMenuManager from './@RecklessCore/managers/EditorMenuManager';\n\n// import reportWebVitals from './reportWebVitals';\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    background: {\n      default: '#303030',\n    },\n    ...Palette,\n  },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AppManager>\n        <ThreeObjectsManager>\n          <PeersManager>\n            <ConnectionsManager>\n              <DevicesManager>\n                <GeneratorsManager>\n                  <TransformsManager>\n                    <EditorMenuManager>\n                      <ToolsMenuManager>\n                        <InspectorMenuManager>\n                          <App />\n                        </InspectorMenuManager>\n                      </ToolsMenuManager>\n                    </EditorMenuManager>\n                  </TransformsManager>\n                </GeneratorsManager>\n              </DevicesManager>\n            </ConnectionsManager>\n          </PeersManager>\n        </ThreeObjectsManager>\n      </AppManager>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals(console.log);\n"],"sourceRoot":""}