{"version":3,"sources":["@RecklessCore/managers/EventsManager.js","@RecklessCore/managers/AppManager.js","@RecklessCore/contexts/useAppContext.js","@RecklessCore/managers/PeersManager.js","@RecklessCore/contexts/usePeersContext.js","@RecklessCore/utils/generateRoomId.js","@RecklessCore/PersistantStorage.js","@RecklessCore/managers/ConnectionsManager.js","@RecklessCore/managers/InspectorMenuManager.js","@RecklessCore/managers/ToolsMenuManager.js","@RecklessCore/managers/EditorMenuManager.js","@RecklessCore/contexts/useToolsMenuContext.js","@RecklessCore/contexts/useEditorMenuContext.js","@RecklessCore/components/@menus/Tools/index.js","@RecklessCore/contexts/useInspectorMenuContext.js","@RecklessCore/contexts/useConnectionsContext.js","@RecklessCore/components/RoomName/view.js","@RecklessCore/components/RoomName/index.js","@RecklessCore/components/RoomQR/view.js","@RecklessCore/components/RoomQR/index.js","@RecklessCore/components/RoomRefreshIdButton/view.js","@RecklessCore/components/RoomRefreshIdButton/index.js","@RecklessCore/components/RoomCopyUrlButton/view.js","@RecklessCore/components/RoomCopyUrlButton/index.js","@RecklessCore/components/RoomOpenUrlButton/view.js","@RecklessCore/components/RoomOpenUrlButton/index.js","@RecklessCore/components/RoomInfo/index.js","@RecklessCore/components/RoomMenu/index.js","@RecklessCore/components/PeerAvatar/index.js","@RecklessCore/components/PeerName/view.js","@RecklessCore/components/PeerName/edit.js","@RecklessCore/components/PeerName/index.js","@RecklessCore/components/PeerToolbar/index.js","@RecklessCore/components/EditPeerNameButton/view.js","@RecklessCore/components/EditPeerNameButton/index.js","@RecklessCore/components/HostInfo/index.js","@RecklessCore/components/MeInfo/index.js","@RecklessCore/components/ShareScenePeerButton/view.js","@RecklessCore/components/ShareScenePeerButton/index.js","@RecklessCore/components/PeerInfo/index.js","@RecklessCore/components/PeersList/index.js","@RecklessCore/components/PeersInfo/index.js","@RecklessCore/components/PeersMenu/index.js","@RecklessCore/components/InspectorCloseButton/view.js","@RecklessCore/components/InspectorCloseButton/index.js","@RecklessCore/components/InspectorToolbar/view.js","@RecklessCore/components/InspectorToolbar/index.js","@RecklessCore/components/@menus/Inspector/view.js","@RecklessCore/components/@menus/Inspector/index.js","@RecklessCore/utils/toFlow.js","@RecklessCore/components/@patches/shared/PatchDetails/index.js","@RecklessCore/components/@patches/shared/OutputHandle/index.js","@RecklessCore/components/@patches/shared/InputHandle/index.js","@RecklessCore/components/@patches/shared/ParentChildPro/index.js","@RecklessCore/components/@patches/shared/PatchRoot/index.js","@RecklessCore/components/@patches/Scene/index.js","@RecklessCore/components/@patches/shared/PropListItem/view.js","@RecklessCore/components/@patches/shared/PropListItem/index.js","@RecklessCore/managers/ThreeObjectsManager.js","@RecklessCore/contexts/useThreeObjectsContext.js","@RecklessCore/components/@patches/shared/PatchValue/view.js","@RecklessCore/components/@patches/ThreeObject/PatchValue/index.js","@RecklessCore/components/@patches/shared/PatchToolbar/view.js","@RecklessCore/components/@patches/ThreeObject/PatchToolbar/index.js","@RecklessCore/components/@patches/ThreeObject/index.js","@RecklessCore/components/@patches/Device/PatchToolbar/index.js","@RecklessCore/managers/DevicesManager.js","@RecklessCore/contexts/useDevicesContext.js","@RecklessCore/components/@patches/Device/PatchValue/index.js","@RecklessCore/components/@patches/Device/Mouse/index.js","@RecklessCore/components/@patches/Device/index.js","@RecklessCore/managers/TransformsManager.js","@RecklessCore/contexts/useTransformsContext.js","@RecklessCore/components/@patches/Transform/PatchValue/index.js","@RecklessCore/components/@patches/Transform/PatchToolbar/index.js","@RecklessCore/components/@patches/Transform/index.js","@RecklessCore/managers/GeneratorsManager.js","@RecklessCore/contexts/useGeneratorsContext.js","@RecklessCore/components/@patches/Generator/PatchValue/index.js","@RecklessCore/shapes/drawSine.js","@RecklessCore/shapes/drawCircle.js","@RecklessCore/components/@patches/Generator/ShapePreview/background.js","@RecklessCore/components/@patches/Generator/ShapePreview/indicator.js","@RecklessCore/components/@patches/Generator/ShapePreview/index.js","@RecklessCore/components/@patches/Generator/PatchToolbar/index.js","@RecklessCore/components/@patches/Generator/index.js","@RecklessCore/components/@patches/Peer/PatchValue/index.js","@RecklessCore/components/@patches/Peer/PatchToolbar/index.js","@RecklessCore/components/@patches/Peer/index.js","@RecklessCore/components/@patches/edges/CustomEdge.js","@RecklessCore/components/@patches/edges/CustomLineageEdge.js","@RecklessCore/components/NodeEditor/view.js","@RecklessCore/components/NodeEditor/index.js","@RecklessCore/components/EditorCloseButton/view.js","@RecklessCore/components/EditorCloseButton/index.js","@RecklessCore/components/SceneDownloadButton/view.js","@RecklessCore/components/SceneDownloadButton/index.js","@RecklessCore/components/AddToEditorCloseButton/view.js","@RecklessCore/components/AddToEditorCloseButton/index.js","@RecklessCore/components/AddToEditorToolbar/view.js","@RecklessCore/components/AddToEditorToolbar/index.js","@RecklessCore/components/AddPeersToScene/index.js","@RecklessCore/components/AddToEditorMenu/index.js","@RecklessCore/components/EditorToolbar/view.js","@RecklessCore/components/EditorToolbar/index.js","@RecklessCore/components/@menus/Editor/view.js","@RecklessCore/components/@menus/Editor/index.js","AppView.js","@RecklessCore/utils/threeParams.js","@RecklessCore/managers/WorldManager.js","@RecklessCore/contexts/useUserMedia.js","@RecklessCore/components/@views/CameraView/index.js","@RecklessCore/useForceUpdate.js","@RecklessCore/managers/GeneratorManager.js","@RecklessCore/contexts/useGeneratorContext.js","@RecklessCore/inputs/generators/Orbit/index.js","@RecklessCore/inputs/generators/Sinewave/index.js","@RecklessCore/inputs/generators/view.js","@RecklessCore/inputs/generators/index.js","@RecklessCore/managers/PeerManager.js","@RecklessCore/inputs/peers/view.js","@RecklessCore/inputs/peers/index.js","@RecklessCore/managers/DeviceManager.js","@RecklessCore/inputs/devices/Mouse/index.js","@RecklessCore/contexts/useDeviceContext.js","@RecklessCore/inputs/devices/Keyboard/index.js","@RecklessCore/inputs/devices/view.js","@RecklessCore/inputs/devices/index.js","@RecklessCore/managers/TransformManager.js","@RecklessCore/inputs/transforms/Multiply/index.js","@RecklessCore/contexts/useTransformContext.js","@RecklessCore/inputs/transforms/view.js","@RecklessCore/inputs/transforms/index.js","@RecklessCore/world/index.js","@RecklessCore/components/@objects/RenderThreeChildren/view.js","@RecklessCore/managers/ThreeObjectManager.js","@RecklessCore/contexts/useSceneManagerContext.js","@RecklessCore/utils/waitForMs.js","@RecklessCore/useThreeObjectStore.js","@RecklessCore/managers/SceneManager.js","@RecklessCore/Scene.js","@RecklessCore/components/@objects/RenderThreeChildren/index.js","@RecklessCore/scenes/Dynamic/index.js","App.js","index.js"],"names":["EventsManager","events","name","data","a","handlers","Promise","all","slice","map","handler","unsubscribe","index","indexOf","splice","publish","subscribe","push","hasSubscriptions","length","AppContext","createContext","appContextValue","AppManager","children","useState","window","location","hash","substr","DefaultSceneJSON","DefaultSceneJSONClient","sceneJSON","setSceneJSON","paused","setPaused","getDefaultGeo","geoUUID","type","uuid","width","height","depth","widthSegments","heightSegments","depthSegments","getDefaultMat","materialUUID","color","roughness","metalness","emissive","envMapIntensity","refractionRatio","depthFunc","depthTest","depthWrite","colorWrite","stencilWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","removeChild","useCallback","childs","callback","forEach","child","idx","undefined","sceneUtils","useMemo","removeTransform","transforms","filter","t","connections","c","from","to","addTransform","uuidv4","amount","removeDevice","devices","d","addDevice","removeGenerator","generators","g","addGenerator","resolution","rpm","loop","removeThreeObj","filterdChildren","object","addThreeObj","geometries","materials","layers","matrix","geometry","material","updatePeer","ref","peers","removePeer","p","addPeer","addConnection","edge","source","fromProp","sourceHandle","replace","split","toLowerCase","target","toProp","targetHandle","updateConnection","oldEdge","newConnection","con","id","settings","Provider","value","useAppContext","useContext","PeersContext","peersContextValue","PeersManager","Map","PeerRegistry","findPeer","get","registerPeer","identifier","oldRef","delete","newRef","set","unregisterPeer","getPeersArray","Array","keys","useEffect","moment","diff","lastSeen","peerRegistryUtils","useConnectionsContext","GenerateRoomId","niceware","generatePassphrase","reduce","accumulator","currentValue","persistData","key","localStorage","setItem","JSON","stringify","sessionStorage","restoreData","parse","getItem","ConnectionsContext","connectionsContextValue","ConnectionsManager","usePeersContext","connectionType","room","setRoom","roomInfo","setRoomInfo","me","ConnectionRegistry","isMounted","useRef","getMe","isMe","getHost","isHost","getByUUID","updateConnectionInfo","oldRefs","has","connectionId","findConnection","registerConnection","unregisterConnection","getConnectionsArray","getRoomInfo","connectionRegistryUtils","info","generateRoomId","joinRoom","appId","meRef","status","selfId","mode","Date","now","pingMe","makeAction","sendAnnounce","getAnnounce","sendData","getData","onPeerJoin","connectionRef","ping","connectionJoin","onPeerLeave","peer","setData","payload","announceMeChanges","connection","current","InspectorMenuContext","InspectorMenuManager","inspectorMenuWidth","setInspectorMenuWidth","inspectorMenuOpen","setInspectorMenuOpen","inspectorMenuTab","setInspectorMenuTab","inspectorMenuContextValue","ToolsMenuContext","ToolsMenuManager","toolsMenuWidth","setToolsMenuWidth","toolsMenuOpen","setToolsMenuOpen","toolsMenuTab","setToolsMenuTab","toolsMenuContextValue","EditorMenuContext","EditorMenuManager","editorMenuHeight","setEditorMenuHeight","editorMenuOpen","setEditorMenuOpen","editorMenuTab","setEditorMenuTab","editorMenuContextValue","useToolsMenuContext","useEditorMenuContext","useStyles","makeStyles","theme","drawer","transition","transitions","create","easing","easeOut","duration","enteringScreen","props","position","left","top","drawerPaper","drawerHeader","display","alignItems","padding","spacing","mixins","toolbar","justifyContent","ToolsDrawer","classes","useTheme","Drawer","className","variant","anchor","open","paper","IconButton","onClick","direction","Divider","List","text","ListItem","button","ListItemIcon","ListItemText","primary","useInspectorMenuContext","roomName","marginRight","marginLeft","RoomNameView","roomId","Tooltip","title","Typography","whyDidYouRender","memo","RoomName","qrCode","QRView","size","url","qrContainer","RoomQR","qrRef","qrSize","setQrSize","offsetWidth","r","updateRoom","href","iconButton","margin","RoomRefreshIdButtonView","RoomRefreshIdButton","RoomCopyUrlButtonView","navigator","clipboard","writeText","then","RoomCopyUrlButton","RoomOpenUrlButtonView","Link","rel","RoomOpenUrlButton","RoomInfo","ListSubheader","Grid","container","item","xs","root","RoomMenu","role","PeerAvatar","peerInfo","ListItemAvatar","Avatar","alt","src","multiline","whiteSpace","overflow","PeerNameView","secondary","onNameUpdate","TextField","label","onChange","PeerName","toolbarButtons","right","background","palette","PeerToolbar","ListItemSecondaryAction","EditPeerNameButtonView","EditPeerNameButton","listItem","list","sectionTitle","marginTop","HostInfo","hostName","setHostName","host","setHost","h","updateHost","updateName","e","currentTarget","updateHostInfo","val","MeInfo","meName","setMeName","setMe","m","updateMe","updateMeInfo","sceneMenu","ShareScenePeerButtonView","buttonRef","anchorEl","setAnchorEl","menuOpen","setMenuOpen","handleClose","json","dataset","menuValue","testJSON","posenetJSON","timestamp","style","Menu","keepMounted","onClose","MenuItem","ShareScenePeerButton","buttons","PeerInfo","peerName","setPeerName","updateInfo","PeersList","setConnections","updateConnections","paddingTop","PeersInfo","PeersMenu","InspectorCloseButtonView","InspectorCloseButton","InspectorToolbarView","InspectorToolbar","zIndex","InspectorView","Tabs","indicatorColor","textColor","event","newValue","Tab","Inspector","dimensionsLookup","typeLookup","makeFlowProps","parents","hidden","hideChildren","isChildHidden","isHidden","sceneGraphToFlow","level","nextLevel","flat","rtSceneToFlow","rtScene","peersToFlow","devicesToFlow","generatorsToFlow","transformsToFlow","animated","connectionsToFlow","propItem","propIcon","minWidth","typeIcon","includes","PatchDetails","handle","handleLeft","float","borderLeft","borderTopLeftRadius","borderBottomLeftRadius","handleRight","borderRight","borderTopRightRadius","borderBottomRightRadius","OutputHandle","propName","clsx","InputHandle","propGrid","borderBottom","propText","fontSize","textAlign","ParentChildProp","backgroundColor","border","borderRadius","paddingBottom","boxShadow","PatchRoot","ScenePatch","ParentChildPro","oveflow","textTransform","PropListItemView","disableInput","disableOutput","PropListItem","ThreeObjectsContext","threeObjectsContextValue","ThreeObjectsManager","ThreeObjectRegistry","ThreeObjectRegistryByName","ThreeObjectRegistryByPos","ThreeObjectRegistryByType","exitScene","clear","threeObjectsRegistryUtils","registerThreeObject","pos","x","y","z","posList","unregisterThreeObject","findThreeObject","findThreeObjectByName","findThreeObjectsByPos","obj","disabled","findThreeObjectsByLayer","threeObjectNamesArray","useThreeObjectsContext","PatchValueView","v","toFixed","PatchValue","threeObj","propVal","setPropVal","updateProp","flexGrow","minHeight","appbar","group","PatchToolbarView","removeObj","AppBar","Toolbar","ButtonGroup","Button","PatchToolbar","bottom","ThreeObjectPatch","DevicesContext","devicesContextValue","DevicesManager","DeviceRegistry","deviceRegistryUtils","findDevice","registerDevice","unregisterDevice","getDevicesArray","useDevicesContext","deviceObj","MousePatch","DevicePatch","TransformsContext","transformsContextValue","TransformsManager","TransformRegistry","findTransform","transformRegistryUtils","registerTransform","unregisterTransform","getTransformsArray","useTransformsContext","transformObj","TransformPatch","transform","setTransform","GeneratorsContext","generatorsContextValue","GeneratorsManager","GeneratorRegistry","generatorRegistryUtils","findGenerator","registerGenerator","unregisterGenerator","getGeneratorsArray","useGeneratorsContext","generatorObj","DrawSine","points","i","Math","sin","PI","DrawCircle","cos","canvasContainer","parentSize","ShapePreviewBackground","shape","shapeDimensions","setShapeDimensions","context","setContext","canvasRef","finalShape","setFinalShape","min","max","getContext","s","ctx","lineWidth","strokeStyle","moveTo","lineTo","stroke","ind","finalVal","ShapePreviewIndicator","setFinalVal","shapeContainer","ShapePreview","generator","setGenerator","updateGenerator","setShape","shapeRef","containerSize","setContainerSize","offsetHeight","Generator","peerObj","PeerPatch","setPeer","setProps","CustomEdge","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","edgePath","getSmoothStepPath","markerWidth","markerHeight","viewBox","orient","refX","refY","strokeLinecap","strokeLinejoin","strokeWidth","fill","cx","cy","markerEnd","CustomLineageEdge","getBezierPath","onLoad","NodeEditorView","elements","nodeTypes","edgeTypes","dagreGraph","dagre","graphlib","Graph","setDefaultEdgeLabel","elems","layoutedElements","el","setGraph","rankdir","align","nodesep","edgesep","ranksep","marginx","marginy","isNode","setNode","setEdge","layout","nodeWithPosition","node","nodeWidth","random","nodeHeight","snapToGrid","onEdgeUpdate","onConnect","onElementsRemove","NodeEditor","setElements","Scene","ThreeObject","device","Device","Transform","Peer","custom","customLineage","menuButton","EditorCloseButtonView","EditorCloseButton","SceneDownloadButttonView","link","document","createElement","download","encodeURIComponent","click","SceneDownloadButtton","AddToEditorCloseButtonView","AddToEditorCloseButton","AddToEditorToolbarView","forwardRef","AddToEditorToolbar","AddPeersToScene","closeMenu","heading","typography","pxToRem","fontWeight","fontWeightRegular","itemList","AddToEditorMenu","Boolean","addObject","transformOrigin","vertical","horizontal","Accordion","AccordionSummary","expandIcon","AccordionDetails","spacer","EditorToolbarView","EditorToolbar","EditorView","Editor","rootShiftBottom","appBar","sharp","leavingScreen","appBarShiftLeft","appBarShiftRight","renderArea","renderAreaShiftLeft","renderAreaShiftRight","bottomAppBar","bottomToolbar","inspectorButton","AppView","Tools","ThreeParamsToArgs","filteredProps","propKeys","Object","prop","THREE","ThreeUsedProps","params","parameters","param","getHexString","WorldContext","worldContextValue","WorldManager","useUserMedia","requestedMedia","mediaStream","setMediaStream","mediaDevices","getUserMedia","stream","getTracks","track","stop","enableStream","propTypes","PropTypes","string","isRequired","CAPTURE_OPTIONS","audio","video","facingMode","CameraView","videoRef","srcObject","onCanPlay","play","autoPlay","playsInline","muted","useForceUpdate","setState","GeneratorContext","DefaultProps","GeneratorManager","Symbol","setType","setResolution","setRpm","setLoop","setPosition","forceUpdate","generatorRef","getRef","contextValue","nodeRef","useGeneratorContext","OrbitGenerator","setGenPosition","animMili","toPoints","handleChange","result","config","pause","friction","useSpring","api","start","SinewaveGenerator","GeneratorsView","Orbit","Sinewave","Generators","gen","PeerContext","PeerManager","setConnection","updateFromInput","peerRef","PeerView","Peers","DeviceContext","DeviceManager","displayName","deviceRef","MouseDevice","updateMousePosition","ev","clientX","clientY","addEventListener","removeEventListener","KeyboardDevice","DevicesView","Devices","dev","TransformContext","TransformManager","useDevicesConext","setAmount","setValue","MultiplyTransform","setTransValue","TransformsView","Multiply","Transforms","userSelect","World","camera","fog","shadows","dpr","devicePixelRatio","attach","args","OrbitControls","enablePan","enableZoom","enableRotate","RenderThreeChildrenView","rotation","scale","ThreeObjectContext","ThreeObjectPositionContext","ThreeObjectRotationContext","ThreeObjectScaleContext","ThreeObjectManager","useTransformsConext","setDisabled","debug","setDebug","setRotation","setScale","threeObjectRef","positionContextValue","rotationContextValue","scaleContextValue","useSceneManager","SceneManagerContext","waitForMs","ms","resolve","setTimeout","StoreContext","SceneStoreProvider","getState","getSceneState","setSceneState","SceneManager","defaultScene","initialScene","initialLevel","currentScene","setScene","prevLevel","currentLevel","Number","sceneStore","nextScene","targetScene","targetLevel","setLevel","resetScene","prevScene","formerCurrentLevel","formerPrevLevel","SceneContext","LevelContext","instances","setInstances","initEvents","instantiate","newElement","portalNode","instance","createPortal","React","cloneElement","elem","levelContextValue","enterPrevLevel","enterNextLevel","startsWith","RenderThreeChildren","childRef","objProps","usedProps","shadow","matrixAutoUpdate","geo","geoProps","mat","matProps","matGeoChildren","useFrame","state","uniforms","time","clock","elapsedTime","childProps","DynamicScene","App","updateScene","Dynamic","createMuiTheme","default","Palette","ReactDOM","render","StrictMode","ThemeProvider","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.00b2ecd6.chunk.js","sourcesContent":["const EventsManager = () => {\n  const events = {};\n  async function publish(name, data) {\n    const handlers = events[name];\n    if (handlers == null) return false;\n\n    // make snapshot of handlers, to prevent inbetween unsubscribe calls\n    // from mutating this array.\n    await Promise.all(handlers.slice().map((handler) => handler(data), 1000));\n    return true;\n  }\n\n  function unsubscribe(\n    name,\n    handler,\n  ) {\n    const handlers = events[name];\n    if (handlers == null) return;\n\n    const index = handlers.indexOf(handler);\n    handlers.splice(index, 1);\n  }\n\n  function subscribe(\n    name,\n    handler,\n  ) {\n    if (events[name] == null) {\n      events[name] = [];\n    }\n    events[name].push(handler);\n\n    return () => unsubscribe(name, handler);\n  }\n\n  function hasSubscriptions(name) {\n    if (events[name] == null) {\n      return 0;\n    }\n    return events[name].length;\n  }\n\n  return {\n    publish,\n    subscribe,\n    unsubscribe,\n    hasSubscriptions,\n  };\n};\n\nexport default EventsManager;\n","/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable no-undef */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  createContext,\n  useMemo,\n  useState,\n  useCallback,\n} from 'react';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport EventsManager from './EventsManager';\nimport DefaultSceneJSON from '../sceneDefinitions/LogoScene.json';\nimport DefaultSceneJSONClient from '../sceneDefinitions/TestScene.json';\n\nexport const AppContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let appContextValue = {};\n\nconst AppManager = ({\n  children,\n}) => {\n  const [sceneJSON, setSceneJSON] = useState(() => {\n    if (window.location.hash.substr(1) === '') {\n      return DefaultSceneJSON;\n    }\n    return DefaultSceneJSONClient;\n  });\n\n  const [paused, setPaused] = useState(false);\n\n  const [events] = useState(() => EventsManager());\n\n  const getDefaultGeo = (geoUUID, type) => ({\n    uuid: geoUUID,\n    type: `${type}Geometry`,\n    width: 1,\n    height: 1,\n    depth: 1,\n    widthSegments: 1,\n    heightSegments: 1,\n    depthSegments: 1,\n  });\n\n  const getDefaultMat = (materialUUID) => ({\n    uuid: materialUUID,\n    type: 'MeshStandardMaterial',\n    color: 16777215,\n    roughness: 1,\n    metalness: 0,\n    emissive: 0,\n    envMapIntensity: 1,\n    refractionRatio: 0.98,\n    depthFunc: 3,\n    depthTest: true,\n    depthWrite: true,\n    colorWrite: true,\n    stencilWrite: false,\n    stencilWriteMask: 255,\n    stencilFunc: 519,\n    stencilRef: 0,\n    stencilFuncMask: 255,\n    stencilFail: 7680,\n    stencilZFail: 7680,\n    stencilZPass: 7680,\n  });\n\n  const removeChild = useCallback((childs, uuid, callback) => {\n    childs.forEach((child, idx) => {\n      if (child.uuid === uuid) {\n        childs.splice(idx, 1);\n        callback();\n      } else if (child.children !== undefined) {\n        removeChild(child.children, uuid, callback);\n      }\n    });\n  }, []);\n\n  // Add, remove, and update objects from the scene json\n  const sceneUtils = useMemo(() => ({\n    removeTransform(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        transforms: [\n          ...sceneJSON.transforms.filter((t) => (t.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addTransform(type) {\n      setSceneJSON({\n        ...sceneJSON,\n        transforms: [\n          ...sceneJSON.transforms,\n          {\n            uuid: uuidv4(),\n            type,\n            name: `new ${type}`,\n            amount: 2,\n          },\n        ],\n      });\n    },\n    removeDevice(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        devices: [\n          ...sceneJSON.devices.filter((d) => (d.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addDevice(type) {\n      setSceneJSON({\n        ...sceneJSON,\n        devices: [\n          ...sceneJSON.devices,\n          {\n            uuid: uuidv4(),\n            type,\n            name: `new ${type}`,\n          },\n        ],\n      });\n    },\n    removeGenerator(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        generators: [\n          ...sceneJSON.generators.filter((g) => (g.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addGenerator(type) {\n      setSceneJSON({\n        ...sceneJSON,\n        generators: [\n          ...sceneJSON.generators,\n          {\n            uuid: uuidv4(),\n            type,\n            name: `new ${type}`,\n            resolution: 32,\n            rpm: 30,\n            loop: true,\n            paused: false,\n          },\n        ],\n      });\n    },\n    removeThreeObj(uuid) {\n      const filterdChildren = sceneJSON.object.children;\n      removeChild(filterdChildren, uuid, () => {\n        setSceneJSON({\n          ...sceneJSON,\n          object: {\n            ...sceneJSON.object,\n            children: filterdChildren,\n          },\n        });\n      });\n    },\n    addThreeObj(type) {\n      const geoUUID = uuidv4();\n      const materialUUID = uuidv4();\n      setSceneJSON({\n        ...sceneJSON,\n        geometries: [\n          ...sceneJSON.geometries,\n          getDefaultGeo(geoUUID, type),\n        ],\n        materials: [\n          ...sceneJSON.materials,\n          getDefaultMat(materialUUID),\n        ],\n        object: {\n          ...sceneJSON.object,\n          children: [\n            ...sceneJSON.object.children,\n            {\n              uuid: uuidv4(),\n              type: 'Mesh',\n              name: type,\n              layers: 1,\n              matrix: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n              geometry: geoUUID,\n              material: materialUUID,\n            },\n          ],\n        },\n      });\n    },\n    // Peers\n    updatePeer(uuid, ref) {\n      setSceneJSON({\n        ...sceneJSON,\n        peers: [\n          ...sceneJSON.peers,\n          ...ref,\n        ],\n      });\n    },\n    removePeer(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        peers: [\n          ...sceneJSON.peers.filter((p) => (p.uuid !== uuid)),\n        ],\n        connections: [\n          ...sceneJSON.connections.filter((c) => (c.from !== uuid && c.to !== uuid)),\n        ],\n      });\n    },\n    addPeer(uuid) {\n      setSceneJSON({\n        ...sceneJSON,\n        peers: [\n          ...sceneJSON.peers,\n          {\n            type: 'peer',\n            name: uuid,\n            uuid,\n          },\n        ],\n      });\n    },\n    // Connections\n    addConnection(edge) {\n      setSceneJSON({\n        ...sceneJSON,\n        connections: [\n          ...sceneJSON.connections,\n          {\n            uuid: uuidv4(),\n            from: edge.source,\n            fromProp: edge.sourceHandle.replace(edge.source, '').split('-')[1].toLowerCase(),\n            to: edge.target,\n            toProp: edge.targetHandle.replace(edge.target, '').split('-')[2].toLowerCase(),\n          },\n        ],\n      });\n    },\n    updateConnection(oldEdge, newConnection) {\n      setSceneJSON({\n        ...sceneJSON,\n        connections: [\n          ...(sceneJSON.connections.filter((con) => (con.uuid !== oldEdge.id))\n            ? sceneJSON.connections.filter((con) => (con.uuid !== oldEdge.id)) : []),\n          {\n            uuid: oldEdge.id,\n            from: newConnection.source,\n            fromProp: newConnection.sourceHandle.replace(newConnection.source, '').split('-')[1],\n            to: newConnection.target,\n            toProp: newConnection.targetHandle.replace(newConnection.target, '').split('-')[2],\n          },\n        ],\n      });\n    },\n  }), [sceneJSON, setSceneJSON, removeChild]);\n\n  appContextValue = useMemo(() => ({\n    settings: {\n    },\n    paused,\n    setPaused,\n    sceneJSON,\n    setSceneJSON,\n    ...events,\n    ...sceneUtils,\n  }), [\n    paused, setPaused,\n    sceneJSON, setSceneJSON,\n    events,\n    sceneUtils,\n  ]);\n\n  return (<AppContext.Provider value={appContextValue}>{children}</AppContext.Provider>);\n};\n\nAppManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default AppManager;\n","import { useContext } from 'react';\nimport { AppContext } from '../managers/AppManager';\n\nexport default function useAppContext() {\n  return useContext(AppContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  createContext, useCallback, useEffect, useMemo, useState,\n} from 'react';\n\nimport moment from 'moment';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const PeersContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let peersContextValue = {};\n\nconst PeersManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n\n  // Peer Connections\n  const [PeerRegistry] = useState(() => new Map());\n\n  const findPeer = useCallback((id) => PeerRegistry.get(id), [PeerRegistry]);\n\n  const registerPeer = useCallback((identifier, ref) => {\n    let oldRef = {};\n    if (oldRef !== undefined) {\n      oldRef = findPeer(identifier);\n      PeerRegistry.delete(identifier);\n    }\n\n    const newRef = {\n      ...oldRef,\n      ...ref,\n    };\n\n    // register by id\n    PeerRegistry.set(identifier, newRef);\n\n    publish('peer-modified', newRef);\n    publish('peers-list-changed', 'add');\n  }, [PeerRegistry, findPeer, publish]);\n\n  const unregisterPeer = useCallback((identifier) => {\n    // unregister by id\n    PeerRegistry.delete(identifier);\n    publish('peers-list-changed', 'remove');\n  }, [PeerRegistry, publish]);\n\n  const getPeersArray = useCallback(\n    () => Array.from(PeerRegistry.keys()).map((id) => PeerRegistry.get(id)),\n    [PeerRegistry],\n  );\n\n  // prune old connections\n  useEffect(() => {\n    Array.from(PeerRegistry).forEach((p) => {\n      const [id, ref] = p;\n      const freshness = moment().diff(ref.lastSeen, 'seconds');\n      if (freshness > 0) {\n        unregisterPeer(id, ref);\n      }\n    });\n  }, [PeerRegistry, unregisterPeer]);\n\n  const peerRegistryUtils = useMemo(\n    () => ({\n      findPeer,\n      registerPeer,\n      unregisterPeer,\n      getPeersArray,\n    }),\n    [\n      findPeer,\n      registerPeer,\n      unregisterPeer,\n      getPeersArray,\n    ],\n  );\n\n  peersContextValue = useMemo(() => ({\n    PeerRegistry,\n    ...peerRegistryUtils,\n  }), [\n    PeerRegistry,\n    peerRegistryUtils,\n  ]);\n\n  return (\n    <PeersContext.Provider value={peersContextValue}>\n      {children}\n    </PeersContext.Provider>\n  );\n};\n\nPeersManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default PeersManager;\n","import { useContext } from 'react';\nimport { PeersContext } from '../managers/PeersManager';\n\nexport default function useConnectionsContext() {\n  return useContext(PeersContext);\n}\n","import niceware from 'niceware';\n\nexport default function GenerateRoomId() {\n  return niceware.generatePassphrase(6).reduce((accumulator, currentValue) => `${accumulator}-${currentValue}`);\n}\n","/* eslint-disable no-undef */\n\n// Save data in local or session storage.\nconst persistData = (key, data) => {\n  const isHost = (window.location.hash.substr(1) === '');\n  if (isHost) {\n    // Hosts remember room details between sessions\n    localStorage.setItem(key, JSON.stringify(data));\n  } else {\n    // Peers will forget room details when a tab / window is closed\n    sessionStorage.setItem(key, JSON.stringify(data));\n  }\n};\n\nconst restoreData = (key) => {\n  const isHost = (window.location.hash.substr(1) === '');\n  if (isHost) {\n    return JSON.parse(localStorage.getItem(key));\n  }\n\n  return JSON.parse(sessionStorage.getItem(key));\n};\n\nexport {\n  persistData,\n  restoreData,\n};\n","/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable no-undef */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useRef, useEffect, createContext, useState, useMemo, useCallback,\n} from 'react';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { joinRoom, selfId } from 'trystero';\nimport useAppContext from '../contexts/useAppContext';\nimport usePeersContext from '../contexts/usePeersContext';\n\nimport generateRoomId from '../utils/generateRoomId';\nimport { restoreData, persistData } from '../PersistantStorage';\n\nimport EventsManager from './EventsManager';\n\nexport const ConnectionsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let connectionsContextValue = {};\n\nconst ConnectionsManager = ({ children }) => {\n  const { subscribe, publish, setSceneJSON } = useAppContext();\n\n  const { findPeer } = usePeersContext();\n\n  const [events] = useState(() => EventsManager());\n\n  const [connectionType] = useState(window.location.hash.substr(1) === '' ? 'host' : 'peer');\n\n  const [room, setRoom] = useState(null);\n  const [roomInfo, setRoomInfo] = useState(null);\n\n  // Pull from local storage\n  const me = restoreData('me');\n\n  const [ConnectionRegistry] = useState(() => new Map());\n\n  const isMounted = useRef(false);\n\n  const getMe = useCallback(\n    () => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)).filter((p) => p.isMe === true)[0],\n    [ConnectionRegistry],\n  );\n\n  const getHost = useCallback(\n    () => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)).filter((p) => p.isHost === true)[0],\n    [ConnectionRegistry],\n  );\n\n  const getByUUID = useCallback(\n    (uuid) => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)).filter((p) => p.uuid === uuid)[0],\n    [ConnectionRegistry],\n  );\n\n  const updateConnectionInfo = useCallback((uuid, ref) => {\n    let oldRefs = {};\n\n    if (ConnectionRegistry.has(ref.connectionId)) {\n      oldRefs = {\n        ...oldRefs,\n        ...ConnectionRegistry.get(ref.connectionId),\n      };\n      ConnectionRegistry.delete(ref.connectionId);\n    }\n\n    if (ConnectionRegistry.has(uuid)) {\n      oldRefs = {\n        ...oldRefs,\n        ...ConnectionRegistry.get(uuid),\n      };\n      ConnectionRegistry.delete(uuid);\n    }\n\n    const newRef = { ...oldRefs, ...ref };\n\n    ConnectionRegistry.set(uuid, newRef);\n    // addPeer(uuid, newRef);\n\n    if (newRef.isMe) {\n      persistData('me', newRef);\n      publish('me-modified', newRef);\n    }\n\n    if (newRef.isHost) {\n      publish('host-modified', newRef);\n    }\n\n    persistData('connections', Array.from(ConnectionRegistry));\n    publish('connection-modified', newRef);\n  }, [ConnectionRegistry, publish]);\n\n  const findConnection = useCallback((id) => ConnectionRegistry.get(id), [ConnectionRegistry]);\n\n  const registerConnection = useCallback((identifier, ref) => {\n    // register by id\n    ConnectionRegistry.set(identifier, ref);\n\n    if (ref.isMe) {\n      persistData('me', ref);\n      publish('me-modified', ref);\n    }\n\n    if (ref.isHost) {\n      publish('host-modified', ref);\n    }\n\n    persistData('connections', Array.from(ConnectionRegistry));\n\n    publish('connections-list-changed', 'add');\n    publish('connection-modified', ref);\n  }, [ConnectionRegistry, publish]);\n\n  const unregisterConnection = useCallback((identifier) => {\n    // unregister by id\n    ConnectionRegistry.delete(identifier);\n    publish('connections-list-changed', 'remove');\n  }, [ConnectionRegistry, publish]);\n\n  const getConnectionsArray = useCallback(\n    () => Array.from(ConnectionRegistry.keys())\n      .map((id) => ConnectionRegistry.get(id)),\n    [ConnectionRegistry],\n  );\n\n  const getRoomInfo = useCallback(() => roomInfo, [roomInfo]);\n\n  const connectionRegistryUtils = useMemo(\n    () => ({\n      updateConnectionInfo,\n      findConnection,\n      registerConnection,\n      unregisterConnection,\n      getConnectionsArray,\n      getRoomInfo,\n      getMe,\n      getHost,\n      getByUUID,\n    }),\n    [\n      updateConnectionInfo,\n      findConnection,\n      getConnectionsArray,\n      registerConnection,\n      unregisterConnection,\n      getRoomInfo,\n      getMe,\n      getHost,\n      getByUUID,\n    ],\n  );\n\n  // Store props for context provider\n  connectionsContextValue = useMemo(() => ({\n    ConnectionRegistry,\n    ...connectionRegistryUtils,\n    connectionType,\n    room,\n    setRoom,\n    roomInfo,\n    setRoomInfo,\n  }), [\n    ConnectionRegistry,\n    connectionRegistryUtils,\n    connectionType,\n    room, setRoom,\n    roomInfo, setRoomInfo,\n  ]);\n\n  // Find, create, and save details abount a room\n  useEffect(() => {\n    if (roomInfo === null) { // There is no roomInfo, create it\n      let info = restoreData('roomInfo');\n\n      if (info === null) { // There is no stored state, make it up\n        const isHost = (window.location.hash.substr(1) === '');\n        if (isHost) { // If there is no connection url, you're the host\n          info = {\n            id: generateRoomId(),\n          };\n        } else {\n          info = {\n            id: window.location.hash.substr(1),\n          };\n        }\n      }\n\n      // Save / pass down room info\n      persistData('roomInfo', info);\n      setRoomInfo(info);\n    }\n  }, [roomInfo, setRoomInfo]);\n\n  // Save roomInfo updates to localstorage\n  useEffect(() => {\n    if (roomInfo !== null) {\n      persistData('roomInfo', roomInfo);\n      publish('room-modified', roomInfo);\n    }\n  }, [roomInfo, publish]);\n\n  // Create peer to peer room\n  useEffect(() => {\n    if (room === null && roomInfo !== null) {\n      setRoom(joinRoom({ appId: `Reckless Technology room ${roomInfo.id}` }, roomInfo.id));\n    }\n  }, [setRoom, room, roomInfo]);\n\n  // Create ref to access me props\n  const meRef = useMemo(() => ({\n    status: 'connected',\n    connectionId: selfId,\n    uuid: me !== null ? me.uuid : uuidv4(),\n    name: me !== null ? me.name : `new ${connectionType}`,\n    isMe: true,\n    isHost: (connectionType === 'host'),\n    mode: 'view',\n    lastSeen: Date.now(),\n  }), [me, connectionType]);\n\n  const pingMe = useCallback(() => {\n    // if (room !== null) {\n    //   console.log(`took ${room.ping(meRef.connectionId)}ms`);\n    // }\n  }, []);\n\n  useEffect(() => {\n    if (room !== null) {\n      const [sendAnnounce, getAnnounce] = room.makeAction('announce');\n      const [sendData, getData] = room.makeAction('scene');\n\n      // If someone connects to host\n      const connectionJoin = (id) => {\n        // Create ref to access connection props\n        const connectionRef = {\n          status: 'connected',\n          connectionId: id,\n          name: 'new connection',\n          isMe: false,\n          isHost: false,\n          mode: 'view',\n          lastSeen: Date.now(),\n        };\n\n        // Add to connection registry\n        registerConnection(id, {\n          ...connectionRef,\n          getData,\n          sendData,\n          getAnnounce,\n          sendAnnounce,\n          ping: pingMe,\n        });\n\n        // Send your info to connected peers\n        sendAnnounce({\n          connectionId: meRef.connectionId,\n          uuid: meRef.uuid,\n          name: meRef.name,\n          isHost: meRef.isHost,\n        });\n      };\n\n      room.onPeerJoin((id) => connectionJoin(id));\n\n      // Add me to registry\n      registerConnection(meRef.uuid, {\n        ...meRef,\n        getData,\n        sendData,\n        getAnnounce,\n        sendAnnounce,\n        ping: pingMe,\n      });\n\n      // Remove connection from registry if they leave the room\n      room.onPeerLeave((id) => unregisterConnection(id));\n\n      // Listen for commands\n      getData((data) => {\n        const peer = findPeer(data.uuid);\n        switch (data.type) {\n          default:\n            if (peer !== undefined && typeof peer.setData === 'function') {\n              peer.setData(data.payload);\n            }\n            break;\n          case 'shareScene':\n            setSceneJSON(data.payload);\n            publish('scene-changed', data.payload);\n            break;\n        }\n      });\n\n      // Listen for info about connection\n      getAnnounce(({\n        connectionId, uuid, name, isHost,\n      }) => {\n        updateConnectionInfo(uuid, {\n          connectionId, isHost, uuid, name, lastSeen: Date.now(),\n        });\n      });\n    }\n  }, [\n    events.subscribe,\n    events.unsubscribe,\n    meRef,\n    pingMe,\n    publish,\n    registerConnection,\n    room,\n    setSceneJSON,\n    unregisterConnection,\n    findConnection,\n    updateConnectionInfo,\n    findPeer,\n  ]);\n\n  // send updates to connections\n  const announceMeChanges = useCallback((connection) => {\n    if (isMounted.current && connection !== undefined) {\n      if (connection.isMe) {\n        if (typeof connection.sendAnnounce === 'function') {\n          connection.sendAnnounce({\n            connectionId: connection.connectionId,\n            uuid: connection.uuid,\n            name: connection.name,\n            isHost: connection.isHost,\n          });\n        }\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    if (meRef !== undefined) {\n      isMounted.current = true;\n      subscribe('me-modified', announceMeChanges);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, announceMeChanges, meRef]);\n\n  return (\n    <ConnectionsContext.Provider value={connectionsContextValue}>\n      {children}\n    </ConnectionsContext.Provider>\n  );\n};\n\nConnectionsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default ConnectionsManager;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nexport const InspectorMenuContext = createContext(null);\n\nconst InspectorMenuManager = ({\n  children,\n}) => {\n  const [inspectorMenuWidth, setInspectorMenuWidth] = useState(375);\n  const [inspectorMenuOpen, setInspectorMenuOpen] = useState(true);\n  const [inspectorMenuTab, setInspectorMenuTab] = useState(1);\n\n  const inspectorMenuContextValue = useMemo(() => ({\n    inspectorMenuWidth,\n    setInspectorMenuWidth,\n    inspectorMenuOpen,\n    setInspectorMenuOpen,\n    inspectorMenuTab,\n    setInspectorMenuTab,\n  }), [\n    inspectorMenuWidth, setInspectorMenuWidth,\n    inspectorMenuOpen, setInspectorMenuOpen,\n    inspectorMenuTab, setInspectorMenuTab,\n  ]);\n\n  return (\n    <InspectorMenuContext.Provider value={inspectorMenuContextValue}>\n      {children}\n    </InspectorMenuContext.Provider>\n  );\n};\n\nInspectorMenuManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default InspectorMenuManager;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nexport const ToolsMenuContext = createContext(null);\n\nconst ToolsMenuManager = ({\n  children,\n}) => {\n  const [toolsMenuWidth, setToolsMenuWidth] = useState(500);\n  const [toolsMenuOpen, setToolsMenuOpen] = useState(false);\n  const [toolsMenuTab, setToolsMenuTab] = useState(0);\n\n  const toolsMenuContextValue = useMemo(() => ({\n    toolsMenuWidth,\n    setToolsMenuWidth,\n    toolsMenuOpen,\n    setToolsMenuOpen,\n    toolsMenuTab,\n    setToolsMenuTab,\n  }), [\n    toolsMenuWidth, setToolsMenuWidth,\n    toolsMenuOpen, setToolsMenuOpen,\n    toolsMenuTab, setToolsMenuTab,\n  ]);\n\n  return (\n    <ToolsMenuContext.Provider value={toolsMenuContextValue}>\n      {children}\n    </ToolsMenuContext.Provider>\n  );\n};\n\nToolsMenuManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default ToolsMenuManager;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nexport const EditorMenuContext = createContext(null);\n\nconst EditorMenuManager = ({\n  children,\n}) => {\n  const [editorMenuHeight, setEditorMenuHeight] = useState(500);\n  const [editorMenuOpen, setEditorMenuOpen] = useState(false);\n  const [editorMenuTab, setEditorMenuTab] = useState(0);\n\n  const editorMenuContextValue = useMemo(() => ({\n    editorMenuHeight,\n    setEditorMenuHeight,\n    editorMenuOpen,\n    setEditorMenuOpen,\n    editorMenuTab,\n    setEditorMenuTab,\n  }), [\n    editorMenuHeight, setEditorMenuHeight,\n    editorMenuOpen, setEditorMenuOpen,\n    editorMenuTab, setEditorMenuTab,\n  ]);\n\n  return (\n    <EditorMenuContext.Provider value={editorMenuContextValue}>\n      {children}\n    </EditorMenuContext.Provider>\n  );\n};\n\nEditorMenuManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default EditorMenuManager;\n","import { useContext } from 'react';\nimport { ToolsMenuContext } from '../managers/ToolsMenuManager';\n\nexport default function useToolsMenuContext() {\n  return useContext(ToolsMenuContext);\n}\n","import { useContext } from 'react';\nimport { EditorMenuContext } from '../managers/EditorMenuManager';\n\nexport default function useEditorMenuContext() {\n  return useContext(EditorMenuContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nimport {\n  Drawer, List, ListItem, ListItemIcon, ListItemText, Divider, IconButton,\n} from '@material-ui/core';\n\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport InboxIcon from '@material-ui/icons/Inbox';\nimport MailIcon from '@material-ui/icons/Mail';\n\nimport useToolsMenuContext from '../../../contexts/useToolsMenuContext';\nimport useEditorMenuContext from '../../../contexts/useEditorMenuContext';\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    transition: theme.transitions.create('height', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    height: (props) => (`calc(100% - ${(props.editorMenuOpen ? props.editorMenuHeight : 0)}px)`),\n    width: (props) => (props.toolsMenuWidth),\n    position: 'fixed',\n    left: 0,\n    top: 0,\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n}));\n\nconst ToolsDrawer = () => {\n  const { toolsMenuWidth, toolsMenuOpen, setToolsMenuOpen } = useToolsMenuContext();\n  const { editorMenuOpen, editorMenuHeight } = useEditorMenuContext();\n\n  const classes = useStyles({ toolsMenuWidth, editorMenuOpen, editorMenuHeight });\n  const theme = useTheme();\n\n  const handleDrawerClose = () => {\n    setToolsMenuOpen(false);\n  };\n\n  if (!toolsMenuOpen) return null;\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"persistent\"\n      anchor=\"left\"\n      open={toolsMenuOpen}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <div className={classes.drawerHeader}>\n        <IconButton onClick={handleDrawerClose}>\n          {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n        </IconButton>\n      </div>\n      <Divider />\n      <List>\n        {['Inbox', 'Starred', 'Send email', 'Drafts'].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n      <Divider />\n      <List>\n        {['All mail', 'Trash', 'Spam'].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n      <Divider />\n      <List>\n        {['Inbox', 'Starred', 'Send email', 'Drafts'].map((text, index) => (\n          <ListItem button key={text}>\n            <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n            <ListItemText primary={text} />\n          </ListItem>\n        ))}\n      </List>\n    </Drawer>\n  );\n};\n\nexport default ToolsDrawer;\n","import { useContext } from 'react';\nimport { InspectorMenuContext } from '../managers/InspectorMenuManager';\n\nexport default function useInspectorMenuContext() {\n  return useContext(InspectorMenuContext);\n}\n","import { useContext } from 'react';\nimport { ConnectionsContext } from '../managers/ConnectionsManager';\n\nexport default function useConnectionsContext() {\n  return useContext(ConnectionsContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Typography, Tooltip } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  roomName: {\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  },\n}));\n\nconst RoomNameView = ({\n  roomId,\n}) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Tooltip title=\"Room ID\" aria-label=\"Room ID\">\n      <Typography className={classes.roomName} variant=\"subtitle1\">{roomId}</Typography>\n    </Tooltip>\n  );\n};\n\nRoomNameView.whyDidYouRender = true;\n\nRoomNameView.propTypes = {\n  roomId: PropTypes.string.isRequired,\n};\n\nexport default memo(RoomNameView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomNameView from './view';\n\nconst RoomName = () => {\n  const { roomInfo } = useConnectionsContext();\n\n  if (roomInfo === null) { return null; }\n  return (\n    <RoomNameView {...{ roomId: roomInfo.id }} />\n  );\n};\n\nRoomName.whyDidYouRender = true;\n\nexport default RoomName;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport QRCode from 'react-qr-code';\n\nconst useStyles = makeStyles(() => ({\n  qrCode: {\n    width: '100%',\n    height: '100%',\n    display: 'block',\n    position: 'relative',\n\n  },\n}));\n\nconst QRView = ({\n  size,\n  url,\n}) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <QRCode size={size} className={classes.qrCode} value={url} />\n  );\n};\n\nQRView.whyDidYouRender = true;\n\nQRView.propTypes = {\n  size: PropTypes.number.isRequired,\n  url: PropTypes.string.isRequired,\n};\n\nexport default memo(QRView);\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  useEffect, useRef, useState, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItemIcon } from '@material-ui/core';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\nimport useAppContext from '../../contexts/useAppContext';\n\nimport RoomQRView from './view';\n\nconst useStyles = makeStyles(() => ({\n  qrContainer: {\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nconst RoomQR = () => {\n  const { subscribe } = useAppContext();\n  const { getRoomInfo } = useConnectionsContext();\n\n  const qrRef = useRef(null);\n  const [qrSize, setQrSize] = useState(0);\n\n  // Create local classes\n  const classes = useStyles();\n\n  useEffect(() => {\n    setQrSize(qrRef.current ? qrRef.current.offsetWidth : 0);\n  }, [qrRef]);\n\n  const [room, setRoom] = useState({});\n\n  const isMounted = useRef(false);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      const r = getRoomInfo();\n      if (r !== undefined) {\n        setRoom(r);\n      }\n    }\n  }, [setRoom, getRoomInfo]);\n\n  const updateRoom = useCallback(() => { // update data only when peer list is modified\n    if (isMounted.current) {\n      const r = getRoomInfo();\n      if (r !== undefined) {\n        setRoom(r);\n      }\n    }\n  }, [getRoomInfo, setRoom]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    subscribe('room-modified', updateRoom);\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, updateRoom]);\n\n  if (!room) { return null; }\n\n  return (\n    <ListItemIcon className={classes.qrContainer} ref={qrRef}>\n      <RoomQRView {...{\n        size: qrSize,\n        url: `${window.location.href}#${room.id}`,\n      }}\n      />\n    </ListItemIcon>\n  );\n};\n\nRoomQR.whyDidYouRender = true;\n\nexport default RoomQR;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { IconButton, Tooltip } from '@material-ui/core';\n\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nimport generateRoomId from '../../utils/generateRoomId';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    margin: '0px 27.66px',\n  },\n}));\n\nconst RoomRefreshIdButtonView = ({ setRoomInfo }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Tooltip title=\"Refresh Room ID\" aria-label=\"Refresh Room ID\">\n      <IconButton\n        className={classes.iconButton}\n        onClick={() => {\n          setRoomInfo({\n            id: generateRoomId(),\n          });\n        }}\n      >\n        <RefreshIcon />\n      </IconButton>\n    </Tooltip>\n  );\n};\n\nRoomRefreshIdButtonView.whyDidYouRender = true;\n\nRoomRefreshIdButtonView.propTypes = {\n  setRoomInfo: PropTypes.func.isRequired,\n};\n\nexport default memo(RoomRefreshIdButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomRefreshIdButtonView from './view';\n\nconst RoomRefreshIdButton = () => {\n  const { setRoomInfo } = useConnectionsContext();\n\n  return <RoomRefreshIdButtonView {...{ setRoomInfo }} />;\n};\n\nRoomRefreshIdButton.whyDidYouRender = true;\n\nexport default RoomRefreshIdButton;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { IconButton, Tooltip } from '@material-ui/core';\n\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    margin: '0px 27.66px',\n  },\n}));\n\nconst RoomCopyUrlButtonView = ({ url }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Tooltip title=\"Copy URL\">\n      <IconButton\n        className={classes.iconButton}\n        onClick={() => {\n          navigator.clipboard.writeText(url).then();\n        }}\n      >\n        <FileCopyIcon />\n      </IconButton>\n    </Tooltip>\n  );\n};\n\nRoomCopyUrlButtonView.whyDidYouRender = true;\n\nRoomCopyUrlButtonView.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\nexport default memo(RoomCopyUrlButtonView);\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomCopyUrlButtonView from './view';\n\nconst RoomCopyUrlButton = () => {\n  const { roomInfo } = useConnectionsContext();\n\n  if (roomInfo === null) { return null; }\n\n  return <RoomCopyUrlButtonView {...{ url: `${window.location.href}#${roomInfo.id}` }} />;\n};\n\nRoomCopyUrlButton.whyDidYouRender = true;\n\nexport default RoomCopyUrlButton;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Link, IconButton, Tooltip } from '@material-ui/core';\n\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    margin: '0px 27.66px',\n  },\n}));\n\nconst RoomOpenUrlButtonView = ({ url }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <Link href={url} target=\"_blank\" rel=\"noopener\">\n      <Tooltip title=\"Open URL\" aria-label=\"Open URL\">\n        <IconButton className={classes.iconButton}>\n          <OpenInNewIcon />\n        </IconButton>\n      </Tooltip>\n    </Link>\n  );\n};\n\nRoomOpenUrlButtonView.whyDidYouRender = true;\n\nRoomOpenUrlButtonView.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\nexport default memo(RoomOpenUrlButtonView);\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport RoomOpenUrlButtonView from './view';\n\nconst RoomOpenUrlButton = () => {\n  const { roomInfo } = useConnectionsContext();\n\n  if (roomInfo === null) { return null; }\n\n  return <RoomOpenUrlButtonView {...{ url: `${window.location.href}#${roomInfo.id}` }} />;\n};\n\nRoomOpenUrlButton.whyDidYouRender = true;\n\nexport default RoomOpenUrlButton;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport { memo } from 'react';\n\nimport React, {\n  ListSubheader, ListItem, List, Grid,\n} from '@material-ui/core';\n\nimport RoomName from '../RoomName';\nimport RoomQR from '../RoomQR';\nimport RoomRefreshIdButton from '../RoomRefreshIdButton';\nimport RoomCopyUrlButton from '../RoomCopyUrlButton';\nimport RoomOpenUrlButton from '../RoomOpenUrlButton';\n\nconst RoomInfo = () => (\n  <List>\n    <ListSubheader>Room</ListSubheader>\n    <ListItem>\n      <RoomQR />\n    </ListItem>\n    <ListItem>\n      <RoomName />\n    </ListItem>\n    <ListItem>\n      <Grid container>\n        <Grid item xs={4}>\n          {(window.location.hash.substr(1) === '') ? <RoomRefreshIdButton /> : null}\n        </Grid>\n        <Grid item xs={4}>\n          <RoomCopyUrlButton />\n        </Grid>\n        <Grid item xs={4}>\n          <RoomOpenUrlButton />\n        </Grid>\n      </Grid>\n    </ListItem>\n  </List>\n);\n\nRoomInfo.whyDidYouRender = true;\n\nexport default memo(RoomInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List, ListItem } from '@material-ui/core';\n\nimport RoomInfo from '../RoomInfo';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'block',\n    width: '100%',\n  },\n}));\n\nconst RoomMenu = () => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <ListItem\n      role=\"tabpanel\"\n      id={`full-width-tabpanel-${0}`}\n      aria-labelledby={`full-width-tab-${0}`}\n    >\n      <List className={classes.root}>\n        <RoomInfo />\n      </List>\n    </ListItem>\n  );\n};\n\nRoomMenu.whyDidYouRender = true;\n\nexport default memo(RoomMenu);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { ListItemAvatar, Avatar } from '@material-ui/core';\n\nconst PeerAvatar = ({ peerInfo }) => (\n  <ListItemAvatar>\n    <Avatar alt={peerInfo.isHost ? 'host' : 'Peer'} src=\"\" />\n  </ListItemAvatar>\n);\n\nPeerAvatar.whyDidYouRender = true;\n\nPeerAvatar.propTypes = {\n  peerInfo: PropTypes.shape({\n    isHost: PropTypes.bool.isRequired,\n  }).isRequired,\n};\n\nexport default memo(PeerAvatar);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { ListItemText } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  multiline: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n}));\n\nconst PeerNameView = ({ primary, secondary }) => {\n  const classes = useStyles();\n  return (\n    <ListItemText\n      classes={{\n        multiline: classes.multiline,\n      }}\n      primary={primary}\n      secondary={secondary}\n    />\n  );\n};\n\nPeerNameView.whyDidYouRender = true;\n\nPeerNameView.propTypes = {\n  primary: PropTypes.string.isRequired,\n  secondary: PropTypes.string.isRequired,\n};\n\nexport default memo(PeerNameView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { TextField } from '@material-ui/core';\n\nconst PeerNameView = ({ value, onNameUpdate }) => (\n  <TextField id=\"standard-basic\" label=\"Edit name\" value={value} onChange={onNameUpdate} />\n);\n\nPeerNameView.whyDidYouRender = true;\n\nPeerNameView.propTypes = {\n  value: PropTypes.string.isRequired,\n  onNameUpdate: PropTypes.func.isRequired,\n};\n\nexport default memo(PeerNameView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport PeerNameView from './view';\nimport PeerNameEdit from './edit';\n\nconst PeerName = ({ peerInfo, onNameUpdate }) => {\n  switch (peerInfo.mode) {\n    default:\n    case 'waiting':\n      return <PeerNameView {...{ primary: '...loading', secondary: '' }} />;\n    case 'view':\n      return <PeerNameView {...{ primary: `${peerInfo.name} (${peerInfo.uuid})`, secondary: `${(peerInfo.isMe) ? 'me' : 'peer'} (${peerInfo.connectionId})` }} />;\n    case 'edit':\n      return <PeerNameEdit {...{ value: peerInfo.name, onNameUpdate }} />;\n  }\n};\n\nPeerName.whyDidYouRender = true;\n\nexport default PeerName;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { ListItemSecondaryAction } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  toolbarButtons: {\n    padding: '15px 0 15px 15px',\n    right: 0,\n    background: `linear-gradient(to left, ${theme.palette.background.paper} 90%, rgba(0,0,0,0))`,\n  },\n}));\n\nconst PeerToolbar = ({ children }) => {\n  const classes = useStyles();\n  return (\n    <ListItemSecondaryAction className={classes.toolbarButtons}>\n      {children}\n    </ListItemSecondaryAction>\n  );\n};\n\nexport default PeerToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { IconButton, Tooltip } from '@material-ui/core';\n\nimport CreateIcon from '@material-ui/icons/Create';\nimport CheckIcon from '@material-ui/icons/Check';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    padding: '5px',\n    marginLeft: '5px',\n  },\n}));\n\nconst EditPeerNameButtonView = ({ peerInfo, updateConnectionInfo }) => {\n  // Create local classes\n  const classes = useStyles();\n\n  switch (peerInfo.mode) {\n    default:\n    case 'view':\n      return (\n        <Tooltip title=\"Edit Name\" aria-label=\"Edit Name\">\n          <IconButton\n            className={classes.iconButton}\n            onClick={() => {\n              updateConnectionInfo(peerInfo.uuid, 'cancel', { mode: 'edit' });\n            }}\n          >\n            <CreateIcon />\n          </IconButton>\n        </Tooltip>\n      );\n    case 'edit':\n      return (\n        <div>\n          <Tooltip title=\"Cancel Save\" aria-label=\"Cancel Save\">\n            <IconButton\n              className={classes.iconButton}\n              onClick={() => {\n                updateConnectionInfo(peerInfo.uuid, 'cancel', { mode: 'view' });\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Save Name\" aria-label=\"Save Name\">\n            <IconButton\n              className={classes.iconButton}\n              onClick={() => {\n                updateConnectionInfo(peerInfo.uuid, 'save', { mode: 'view' });\n              }}\n            >\n              <CheckIcon />\n            </IconButton>\n          </Tooltip>\n        </div>\n      );\n  }\n};\n\nEditPeerNameButtonView.whyDidYouRender = true;\n\nEditPeerNameButtonView.propTypes = {\n  peerInfo: PropTypes.shape({\n    mode: PropTypes.string.isRequired,\n    uuid: PropTypes.string.isRequired,\n  }).isRequired,\n  updateConnectionInfo: PropTypes.func.isRequired,\n};\n\nexport default memo(EditPeerNameButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport EditPeerNameButtonView from './view';\n\nconst EditPeerNameButton = ({ peerInfo, updateConnectionInfo }) => (\n  <EditPeerNameButtonView {...{ peerInfo, updateConnectionInfo }} />\n);\n\nEditPeerNameButton.whyDidYouRender = true;\n\nEditPeerNameButton.propTypes = {\n  peerInfo: PropTypes.shape({}).isRequired,\n  updateConnectionInfo: PropTypes.func.isRequired,\n};\n\nexport default EditPeerNameButton;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  ListItem, Grid, List, Divider, Typography,\n} from '@material-ui/core';\n\nimport PeerAvatar from '../PeerAvatar';\nimport PeerName from '../PeerName';\nimport PeerToolbar from '../PeerToolbar';\n\nimport EditPeerNameButton from '../EditPeerNameButton';\nimport useAppContext from '../../contexts/useAppContext';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n    overflow: 'hidden',\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst HostInfo = () => {\n  const classes = useStyles();\n\n  const { updateConnectionInfo, getHost } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const [hostName, setHostName] = useState(null);\n  const [host, setHost] = useState(null);\n\n  const isMounted = useRef(false);\n\n  useEffect(() => { // update data on load\n    const h = getHost();\n    if (h !== undefined) {\n      setHost(h);\n      setHostName(h.name);\n    }\n  }, [getHost, setHost]);\n\n  const updateHost = useCallback(() => { // update data again when peer list is modified\n    if (isMounted.current) {\n      const h = getHost();\n      if (h !== undefined) {\n        setHost(h);\n        setHostName(h.name);\n      }\n    }\n  }, [getHost, setHost]);\n\n  useEffect(() => {\n    if (getHost !== undefined) {\n      isMounted.current = true;\n      subscribe('host-modified', updateHost);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, getHost, updateHost]);\n\n  const updateName = useCallback((e) => {\n    setHostName(e.currentTarget.value);\n  }, [setHostName]);\n\n  const updateHostInfo = useCallback((id, type, val) => {\n    switch (type) {\n      default:\n      case 'cancel':\n        updateConnectionInfo(id, val);\n        break;\n      case 'save':\n        updateConnectionInfo(id, {\n          ...val,\n          name: hostName,\n        });\n        break;\n    }\n  }, [updateConnectionInfo, hostName]);\n\n  if (host === null || hostName === null) { return null; }\n\n  return (\n    <ListItem className={classes.listItem}>\n      <Grid container spacing={0}>\n        <Grid item xs={12}>\n          <Typography className={classes.sectionTitle}>Host</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <List className={classes.list}>\n            <ListItem className={classes.listItem} alignItems=\"flex-start\">\n              <PeerAvatar {...{ peerInfo: host }} />\n              <PeerName {...{ peerInfo: { ...host, name: hostName }, onNameUpdate: updateName }} />\n              {(!host.isMe) ? null : (\n                <PeerToolbar>\n                  <EditPeerNameButton {...{\n                    peerInfo: host, updateConnectionInfo: updateHostInfo,\n                  }}\n                  />\n                </PeerToolbar>\n              )}\n            </ListItem>\n          </List>\n        </Grid>\n        <Grid item xs={12}>\n          <Divider />\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nHostInfo.whyDidYouRender = true;\n\nexport default memo(HostInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  ListItem, Grid, List, Divider, Typography,\n} from '@material-ui/core';\n\nimport PeerAvatar from '../PeerAvatar';\nimport PeerName from '../PeerName';\nimport PeerToolbar from '../PeerToolbar';\n\nimport EditPeerNameButton from '../EditPeerNameButton';\nimport useAppContext from '../../contexts/useAppContext';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n    overflow: 'hidden',\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst MeInfo = () => {\n  const classes = useStyles();\n\n  const { updateConnectionInfo, getMe } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const [meName, setMeName] = useState(null);\n  const [me, setMe] = useState(null);\n\n  const isMounted = useRef(false);\n\n  useEffect(() => { // update data on load\n    const m = getMe();\n    if (m !== undefined) {\n      setMe(m);\n      setMeName(m.name);\n    }\n  }, [getMe, setMe]);\n\n  const updateMe = useCallback(() => { // update data again when peer list is modified\n    if (isMounted.current) {\n      const h = getMe();\n      if (h !== undefined) {\n        setMe(h);\n        setMeName(h.name);\n      }\n    }\n  }, [getMe, setMe]);\n\n  useEffect(() => {\n    if (getMe !== undefined) {\n      isMounted.current = true;\n      subscribe('me-modified', updateMe);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [getMe, subscribe, updateMe]);\n\n  const updateName = useCallback((e) => {\n    setMeName(e.currentTarget.value);\n  }, [setMeName]);\n\n  const updateMeInfo = useCallback((id, type, val) => {\n    switch (type) {\n      default:\n      case 'cancel':\n        updateConnectionInfo(id, val);\n        break;\n      case 'save':\n        updateConnectionInfo(id, {\n          ...val,\n          name: meName,\n        });\n        break;\n    }\n  }, [updateConnectionInfo, meName]);\n\n  if (me === null || meName === null || me.isHost) { return null; }\n\n  return (\n    <ListItem className={classes.listItem}>\n      <Grid container spacing={0}>\n        <Grid item xs={12}>\n          <Typography className={classes.sectionTitle}>Me</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <List className={classes.list}>\n            <ListItem className={classes.listItem} alignItems=\"flex-start\">\n              <PeerAvatar {...{ peerInfo: me }} />\n              <PeerName {...{ peerInfo: { ...me, name: meName }, onNameUpdate: updateName }} />\n              {(!me.isMe) ? null : (\n                <PeerToolbar>\n                  <EditPeerNameButton {...{ peerInfo: me, updateConnectionInfo: updateMeInfo }} />\n                </PeerToolbar>\n              )}\n            </ListItem>\n          </List>\n        </Grid>\n        <Grid item xs={12}>\n          <Divider />\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nMeInfo.whyDidYouRender = true;\n\nexport default memo(MeInfo);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useState, useRef, useEffect,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  IconButton, Tooltip, Menu, MenuItem,\n} from '@material-ui/core';\n\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\n\nimport testJSON from '../../sceneDefinitions/TestScene.json';\nimport posenetJSON from '../../sceneDefinitions/PosenetScene.json';\nimport useAppContext from '../../contexts/useAppContext';\n\nconst useStyles = makeStyles(() => ({\n  iconButton: {\n    padding: '5px',\n    marginLeft: '5px',\n    position: 'relative',\n  },\n  sceneMenu: {\n    left: 100,\n  },\n}));\n\nconst ShareScenePeerButtonView = ({ me, peerInfo }) => {\n  const { sceneJSON } = useAppContext();\n  const buttonRef = useRef(null);\n\n  // Create local classes\n  const classes = useStyles();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  useEffect(() => {\n    if (buttonRef.current !== undefined) {\n      setAnchorEl(buttonRef.current);\n    }\n  }, [buttonRef, setAnchorEl]);\n\n  const handleClick = () => {\n    setMenuOpen(true);\n  };\n\n  const handleClose = (e) => {\n    const { menuValue } = e.currentTarget.dataset;\n    let json = {};\n    switch (menuValue) {\n      default:\n      case 'my':\n        json = sceneJSON;\n        break;\n      case 'test':\n        json = testJSON;\n        break;\n      case 'posenet':\n        json = posenetJSON;\n        break;\n    }\n    if (typeof peerInfo.sendData === 'function') {\n      peerInfo.sendData({\n        type: 'shareScene', payload: json, uuid: me.uuid, from: me.connectionId, timestamp: Date.now,\n      }, peerInfo.connectionId);\n    }\n    setMenuOpen(false);\n  };\n  return (\n    <div style={{ display: 'block' }}>\n      <Tooltip title={peerInfo.isMe ? 'Share Scene With Everyone' : 'Share Scene'} aria-label=\"Share Scene\">\n        <IconButton ref={buttonRef} className={classes.iconButton} onClick={handleClick}>\n          <OpenInBrowserIcon />\n        </IconButton>\n      </Tooltip>\n      <Menu\n        className={classes.sceneMenu}\n        id=\"scene-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={menuOpen}\n        onClose={handleClose}\n      >\n        <MenuItem data-menu-value=\"mine\" onClick={handleClose}>My Scene</MenuItem>\n        <MenuItem data-menu-value=\"test\" onClick={handleClose}>Test Scene</MenuItem>\n        <MenuItem data-menu-value=\"posenet\" onClick={handleClose}>Posenet</MenuItem>\n      </Menu>\n    </div>\n  );\n};\n\nShareScenePeerButtonView.whyDidYouRender = true;\n\nexport default memo(ShareScenePeerButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nimport ShareScenePeerButtonView from './view';\n\nconst ShareScenePeerButton = ({ peerInfo }) => {\n  const { subscribe } = useAppContext();\n  const { getMe } = useConnectionsContext();\n\n  const [me, setMe] = useState({});\n\n  const isMounted = useRef(false);\n\n  useEffect(() => {\n    const m = getMe();\n    if (m !== undefined) {\n      setMe(m);\n    }\n  }, [setMe, getMe]);\n\n  const updateMe = useCallback(() => { // update data only when peer list is modified\n    if (isMounted.current) {\n      const m = getMe();\n      if (m !== undefined) {\n        setMe(m);\n      }\n    }\n  }, [getMe, setMe]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    subscribe('me-modified', updateMe);\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, updateMe]);\n\n  if (!me) { return null; }\n\n  return <ShareScenePeerButtonView {...{ me, peerInfo }} />;\n};\n\nShareScenePeerButton.whyDidYouRender = true;\n\nShareScenePeerButton.propTypes = {\n  peerInfo: PropTypes.shape({}).isRequired,\n};\n\nexport default ShareScenePeerButton;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useState, useCallback, useEffect,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PeerName from '../PeerName';\nimport PeerToolbar from '../PeerToolbar';\nimport ShareScenePeerButton from '../ShareScenePeerButton';\nimport PeerAvatar from '../PeerAvatar';\nimport EditPeerNameButton from '../EditPeerNameButton';\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n  },\n  buttons: {\n    right: 0,\n  },\n}));\n\nconst PeerInfo = ({ peerInfo }) => {\n  const classes = useStyles();\n\n  const { updateConnectionInfo } = useConnectionsContext();\n\n  const [peerName, setPeerName] = useState(null);\n\n  const updateName = useCallback((e) => {\n    setPeerName(e.currentTarget.value);\n  }, [setPeerName]);\n\n  const updateInfo = useCallback((id, type, val) => {\n    switch (type) {\n      default:\n      case 'cancel':\n        updateConnectionInfo(id, val);\n        break;\n      case 'save':\n        updateConnectionInfo(id, {\n          ...val,\n          name: peerName,\n        });\n        break;\n    }\n  }, [updateConnectionInfo, peerName]);\n\n  useEffect(() => {\n    if (peerInfo) {\n      setPeerName(peerInfo.name);\n    }\n  }, [peerInfo, setPeerName]);\n\n  if (!peerInfo || peerName === null) { return null; }\n\n  return (\n    <ListItem className={classes.listItem} alignItems=\"flex-start\">\n      <PeerAvatar {...{ peerInfo }} />\n      <PeerName {...{ peerInfo: { ...peerInfo, name: peerName }, onNameUpdate: updateName }} />\n      <PeerToolbar>\n        {(!peerInfo.isMe)\n          ? null : <EditPeerNameButton {...{ peerInfo, updateConnectionInfo: updateInfo }} />}\n        {(peerInfo.isHost) ? null : <ShareScenePeerButton {...{ peerInfo }} /> }\n      </PeerToolbar>\n    </ListItem>\n  );\n};\n\nPeerInfo.whyDidYouRender = true;\n\nexport default memo(PeerInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  List, ListItem, Grid, Typography,\n} from '@material-ui/core';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\nimport useAppContext from '../../contexts/useAppContext';\n\nimport PeerInfo from '../PeerInfo';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst PeersList = () => {\n  const { getConnectionsArray } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const classes = useStyles();\n\n  const [connections, setConnections] = useState([]);\n\n  const isMounted = useRef(false);\n\n  const updateConnections = useCallback(() => { // update data again when peer list is modified\n    if (isMounted.current) {\n      const peer = getConnectionsArray();\n      if (peer !== undefined && isMounted.current) {\n        setConnections(peer.filter((p) => (!p.isMe && !p.isHost)));\n      }\n    }\n  }, [getConnectionsArray, setConnections]);\n\n  useEffect(() => { // update data on load\n    const peer = getConnectionsArray();\n    if (peer !== undefined) {\n      isMounted.current = true;\n      setConnections(peer.filter((p) => (!p.isMe && !p.isHost)));\n      subscribe('connection-modified', updateConnections);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [setConnections, getConnectionsArray, subscribe, updateConnections]);\n\n  if (connections.length === 0) { return null; }\n\n  return (\n    <ListItem className={classes.listItem}>\n      <Grid container spacing={0}>\n        <Grid item xs={12}>\n          <Typography className={classes.sectionTitle}>Peers</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <List className={classes.list}>\n            {connections.map((peer) => <PeerInfo key={peer.connectionId} peerInfo={peer} />)}\n          </List>\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nPeersList.whyDidYouRender = true;\n\nexport default PeersList;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List, ListItem } from '@material-ui/core';\n\nimport HostInfo from '../HostInfo';\nimport MeInfo from '../MeInfo';\nimport PeersList from '../PeersList';\n\nconst useStyles = makeStyles(() => ({\n  list: {\n    width: '100%',\n  },\n  listItem: {\n    paddingTop: 0,\n  },\n}));\n\nconst PeersInfo = () => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n\n    <ListItem className={classes.listItem}>\n      <List className={classes.list}>\n        <MeInfo />\n        <HostInfo />\n        <PeersList />\n      </List>\n    </ListItem>\n  );\n};\n\nPeersInfo.whyDidYouRender = true;\n\nexport default memo(PeersInfo);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List, ListItem } from '@material-ui/core';\n\nimport PeersInfo from '../PeersInfo';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'block',\n    width: '100%',\n    padding: 0,\n  },\n  listItem: {\n    paddingTop: 0,\n  },\n}));\n\nconst PeersMenu = () => {\n  // Create local classes\n  const classes = useStyles();\n\n  return (\n    <ListItem\n      role=\"tabpanel\"\n      id={`full-width-tabpanel-${0}`}\n      aria-labelledby={`full-width-tab-${0}`}\n      className={classes.listItem}\n    >\n      <List className={classes.root}>\n        <PeersInfo />\n      </List>\n    </ListItem>\n  );\n};\n\nPeersMenu.whyDidYouRender = true;\n\nexport default memo(PeersMenu);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { IconButton } from '@material-ui/core';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst InspectorCloseButtonView = ({ inspectorMenuOpen, setInspectorMenuOpen }) => (\n  <IconButton onClick={() => {\n    setInspectorMenuOpen(!inspectorMenuOpen);\n  }}\n  >\n    <CloseIcon />\n  </IconButton>\n);\n\nInspectorCloseButtonView.whyDidYouRender = true;\n\nInspectorCloseButtonView.propTypes = {\n  inspectorMenuOpen: PropTypes.bool.isRequired,\n  setInspectorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default memo(InspectorCloseButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport InspectorCloseButtonView from './view';\n\nimport useInspectorMenuContext from '../../contexts/useInspectorMenuContext';\n\nconst InspectorCloseButton = () => {\n  const { inspectorMenuOpen, setInspectorMenuOpen } = useInspectorMenuContext();\n\n  return <InspectorCloseButtonView {...{ inspectorMenuOpen, setInspectorMenuOpen }} />;\n};\n\nInspectorCloseButton.whyDidYouRender = true;\n\nexport default InspectorCloseButton;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport InspectorCloseButton from '../InspectorCloseButton';\n\nconst useStyles = makeStyles((theme) => ({\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-start',\n  },\n}));\n\nconst InspectorToolbarView = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.drawerHeader}>\n      <InspectorCloseButton />\n      <Typography variant=\"h6\" className={classes.title}>\n        Inspector\n      </Typography>\n    </div>\n  );\n};\n\nInspectorToolbarView.whyDidYouRender = true;\n\nexport default InspectorToolbarView;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport InspectorToolbarView from './view';\n\nconst InspectorToolbar = () => <InspectorToolbarView />;\n\nInspectorToolbar.whyDidYouRender = true;\n\nexport default InspectorToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  Drawer, Divider, Tabs, Tab,\n} from '@material-ui/core';\n\nimport RoomMenu from '../../RoomMenu';\nimport PeersMenu from '../../PeersMenu';\nimport InspectorToolbar from '../../InspectorToolbar';\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    transition: theme.transitions.create('height', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    height: (props) => (`calc(100% - ${(props.editorMenuOpen ? props.editorMenuHeight : 0)}px)`),\n    width: (props) => (props.inspectorMenuWidth),\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1300,\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n}));\n\nconst InspectorView = ({\n  editorMenuOpen,\n  editorMenuHeight,\n  inspectorMenuWidth,\n  inspectorMenuOpen,\n  inspectorMenuTab,\n  setInspectorMenuTab,\n}) => {\n  const classes = useStyles({\n    editorMenuOpen,\n    editorMenuHeight,\n    inspectorMenuWidth,\n  });\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"persistent\"\n      anchor=\"right\"\n      open={inspectorMenuOpen}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <InspectorToolbar />\n      <Divider />\n      <Tabs\n        value={inspectorMenuTab}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        onChange={(event, newValue) => setInspectorMenuTab(newValue)}\n        aria-label=\"disabled tabs example\"\n        variant=\"fullWidth\"\n      >\n        <Tab label=\"Room\" />\n        <Tab label=\"Peers\" />\n      </Tabs>\n      {inspectorMenuTab === 0 ? <RoomMenu /> : null}\n      {inspectorMenuTab === 1 ? <PeersMenu /> : null}\n    </Drawer>\n  );\n};\n\nInspectorView.whyDidYouRender = true;\n\nInspectorView.propTypes = {\n  editorMenuOpen: PropTypes.bool.isRequired,\n  editorMenuHeight: PropTypes.number.isRequired,\n  inspectorMenuWidth: PropTypes.number.isRequired,\n  inspectorMenuOpen: PropTypes.bool.isRequired,\n  inspectorMenuTab: PropTypes.number.isRequired,\n  setInspectorMenuTab: PropTypes.func.isRequired,\n};\n\nexport default memo(InspectorView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useEditorMenuContext from '../../../contexts/useEditorMenuContext';\nimport useInspectorMenuContext from '../../../contexts/useInspectorMenuContext';\n\nimport InspectorView from './view';\n\nconst Inspector = () => {\n  const { editorMenuOpen, editorMenuHeight } = useEditorMenuContext();\n  const {\n    inspectorMenuWidth,\n    inspectorMenuOpen,\n    setInspectorMenuOpen,\n    inspectorMenuTab,\n    setInspectorMenuTab,\n  } = useInspectorMenuContext();\n\n  return (\n    <InspectorView {...{\n      editorMenuOpen,\n      editorMenuHeight,\n      inspectorMenuWidth,\n      inspectorMenuOpen,\n      setInspectorMenuOpen,\n      inspectorMenuTab,\n      setInspectorMenuTab,\n    }}\n    />\n  );\n};\n\nInspector.whyDidYouRender = true;\n\nexport default Inspector;\n","/* eslint-disable import/prefer-default-export */\n\n// Take threejs JSON Object Scene format:\n// https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4\n// and converts it for use in React Flow\n// https://reactflow.dev/docs/\n\n// Default size of patches\nconst width = 150;\nconst height = 245;\n\n// Limit depth of parent / child render\nconst limit = 2;\n\nfunction dimensionsLookup(type) {\n  switch (type) {\n    default:\n      return [width, height];\n    case 'Orbit':\n    case 'Sinewave':\n      return [width, 100];\n  }\n}\n\nfunction typeLookup(props) {\n  switch (props.type) {\n    default:\n      return 'threeObj';\n    case 'Scene':\n      return props.type;\n    case 'Orbit':\n    case 'Sinewave':\n      return 'generator';\n    case 'peer':\n      return 'peer';\n  }\n}\n\n// Build object for React Flow\nfunction makeFlowProps(props, parents, hidden, hideChildren, type) {\n  return ({\n    type,\n    id: `${props.uuid}`,\n    data: {\n      ...props,\n      parents,\n      width: dimensionsLookup(type)[0],\n      height: dimensionsLookup(type)[1],\n      label: props.name,\n      isChildHidden: hideChildren,\n    },\n    isHidden: hidden,\n    parents,\n    children: [],\n  });\n}\n\n// Recursive. Traverses 3d scene and makes a patch for each object.\nfunction sceneGraphToFlow(children, parents, level) {\n  const nextLevel = level + 1;\n  if (children === undefined || children.length === 0) {\n    return [];\n  }\n  return children.map((c) => ([\n    {\n      ...makeFlowProps(c, parents, (level > limit), (level + 1 > limit), typeLookup(c)),\n      children: sceneGraphToFlow(c.children, c.uuid, nextLevel),\n    },\n    ...sceneGraphToFlow(c.children, [...parents, c.uuid], nextLevel),\n  ])).flat();\n}\n\nfunction sceneConnectionsToFlow(children) {\n  return children.filter((c) => (!c.isHidden && c.parents.length > 0)).map((c) => ({\n    id: `${c.id}-parent-${c.parents[c.parents.length - 1]}-set-children`,\n    type: 'customLineage',\n\n    data: {\n      ...c,\n      label: c.uuid,\n    },\n\n    source: `${c.id}`,\n    sourceHandle: `${c.id}-parent`,\n\n    target: `${c.parents[c.parents.length - 1]}`,\n    targetHandle: `${c.parents[c.parents.length - 1]}-set-children`,\n\n    animated: false,\n  }));\n}\n\nfunction connectionsToFlow(rtScene) {\n  return rtScene.connections.map((c) => ({\n    id: `${c.uuid}_connection`,\n    type: 'custom',\n\n    source: `${c.from}`,\n    sourceHandle: `${c.from}-${c.fromProp}`,\n\n    target: `${c.to}`,\n    targetHandle: `${c.to}-set-${c.toProp}`,\n\n    animated: true,\n  }));\n}\n\nfunction generatorsToFlow(rtScene) {\n  return rtScene.generators.map((props) => makeFlowProps(props, 'Scene', false, false, 'generator'));\n}\n\nfunction peersToFlow(rtScene) {\n  return rtScene.peers.map((props) => makeFlowProps(props, 'Scene', false, false, 'peer'));\n}\n\nfunction devicesToFlow(rtScene) {\n  return rtScene.devices.map((props) => makeFlowProps(props, 'Scene', false, false, 'device'));\n}\n\nfunction transformsToFlow(rtScene) {\n  return rtScene.transforms.map((props) => makeFlowProps(props, 'Scene', false, false, 'transform'));\n}\n\nfunction rtSceneToFlow(rtScene) {\n  return [\n    ...peersToFlow(rtScene),\n    ...devicesToFlow(rtScene),\n\n    ...generatorsToFlow(rtScene),\n    ...transformsToFlow(rtScene),\n\n    ...connectionsToFlow(rtScene),\n\n    // regular three.js scene graph\n    ...sceneGraphToFlow([rtScene.object], [], 1),\n    ...sceneConnectionsToFlow(sceneGraphToFlow([rtScene.object], [], 1)),\n\n  ];\n}\n\nexport {\n  rtSceneToFlow,\n};\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport {\n  ListItem, ListItemText, ListItemIcon, Tooltip,\n} from '@material-ui/core';\n\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport MouseIcon from '@material-ui/icons/Mouse';\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\nimport SpeakerIcon from '@material-ui/icons/Speaker';\nimport GraphicEqIcon from '@material-ui/icons/GraphicEq';\nimport FilterTiltShiftIcon from '@material-ui/icons/FilterTiltShift';\nimport PersonIcon from '@material-ui/icons/Person';\nimport EmojiObjectsIcon from '@material-ui/icons/EmojiObjects';\nimport ImageIcon from '@material-ui/icons/Image';\nimport FunctionsIcon from '@material-ui/icons/Functions';\nimport GridOnIcon from '@material-ui/icons/GridOn';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px 10px 10px',\n  },\n  propIcon: {\n    minWidth: '30px',\n  },\n}));\n\nconst typeIcon = (type) => {\n  if (type.toLowerCase().includes('light')) {\n    return <EmojiObjectsIcon />;\n  }\n  switch (type.toLowerCase()) {\n    default:\n      return <FilterTiltShiftIcon />;\n    case 'group':\n      return <FilterNoneIcon />;\n    case 'generator':\n      return <GraphicEqIcon />;\n    case 'peer':\n      return <PersonIcon />;\n    case 'device':\n      return <SpeakerIcon />;\n    case 'mesh':\n      return <GridOnIcon />;\n    case 'scene':\n      return <ImageIcon />;\n    case 'transform':\n      return <FunctionsIcon />;\n    case 'mouse':\n      return <MouseIcon />;\n    case 'keyboard':\n      return <KeyboardIcon />;\n  }\n};\n\nconst PatchDetails = ({ name, type, uuid }) => {\n  const classes = useStyles();\n\n  return (\n    <ListItem className={classes.propItem}>\n      <ListItemIcon className={classes.propIcon}>\n        <Tooltip title={type} aria-label={type}>{typeIcon(type)}</Tooltip>\n      </ListItemIcon>\n      <Tooltip title={uuid} aria-label={uuid}>\n        <ListItemText\n          primary={name}\n        />\n      </Tooltip>\n    </ListItem>\n  );\n};\n\nPatchDetails.propTypes = {\n  name: PropTypes.string.isRequired,\n  uuid: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nexport default memo(PatchDetails);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { Handle } from 'react-flow-renderer';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Tooltip } from '@material-ui/core';\n\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles(() => ({\n  handle: {\n    width: '10px',\n    height: '10px',\n    position: 'relative',\n    margin: 0,\n    padding: 0,\n  },\n  handleLeft: {\n    float: 'left',\n    left: '-10px',\n    borderLeft: 'none',\n    background: '#333',\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n  },\n  handleRight: {\n    float: 'right',\n    right: '-10px',\n    borderRight: 'none',\n    background: '#333',\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n}));\n\nconst OutputHandle = ({ uuid, propName }) => {\n  const classes = useStyles();\n\n  return (\n    <Tooltip title={`${uuid}-${propName}`} aria-label={propName}>\n      <div>\n        <Handle\n          type=\"source\"\n          position=\"right\"\n          id={`${uuid}-${propName}`}\n      // isValidConnection={(connection) => { console.log(connection); return true}}\n      // onConnect={(params) => { console.log('handle onConnect', params); }}\n          className={clsx(classes.handle, classes.handleRight)}\n        />\n      </div>\n    </Tooltip>\n  );\n};\n\nOutputHandle.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default OutputHandle;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { Handle } from 'react-flow-renderer';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Tooltip } from '@material-ui/core';\n\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles(() => ({\n  handle: {\n    width: '10px',\n    height: '10px',\n    position: 'relative',\n    margin: 0,\n    padding: 0,\n  },\n  handleLeft: {\n    float: 'left',\n    left: '-10px',\n    borderLeft: 'none',\n    background: '#333',\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n  },\n  handleRight: {\n    float: 'right',\n    right: '-10px',\n    borderRight: 'none',\n    background: '#333',\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n}));\n\nconst InputHandle = ({ uuid, propName }) => {\n  const classes = useStyles();\n\n  return (\n    <Tooltip title={`${uuid}-set-${propName}`} aria-label={`set ${propName}`}>\n      <div>\n        <Handle\n          type=\"target\"\n          position=\"left\"\n          id={`${uuid}-set-${propName}`}\n      // isValidConnection={(connection) => { console.log(connection); return true}}\n      // onConnect={(params) => { console.log('handle onConnect', params); }}\n          className={clsx(classes.handle, classes.handleLeft)}\n        />\n      </div>\n    </Tooltip>\n  );\n};\n\nInputHandle.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default InputHandle;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Typography, Grid } from '@material-ui/core';\n\nimport OutputHandle from '../OutputHandle';\nimport InputHandle from '../InputHandle';\n\nconst useStyles = makeStyles(() => ({\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n}));\n\nconst ParentChildProp = ({\n  // eslint-disable-next-line no-unused-vars\n  type, uuid, children, isChildHidden,\n}) => {\n  const classes = useStyles();\n  return (\n    <Grid container className={classes.propGrid}>\n      <Grid item xs={12}>\n        <Typography className={classes.propText}>{`Children (${children ? children.length : 0}) ${type !== 'Scene' ? '| Parent' : ''}`}</Typography>\n      </Grid>\n      <Grid item xs={1}>\n        <InputHandle {...{ uuid, propName: 'children' }} />\n      </Grid>\n      <Grid item xs={10}>\n        <Typography className={classes.propText}>&nbsp;</Typography>\n      </Grid>\n      <Grid item xs={1}>\n        {type !== 'Scene' ? <OutputHandle {...{ uuid, propName: 'parent' }} /> : null}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ParentChildProp;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { List } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: (props) => (props.width),\n    backgroundColor: '#555',\n    border: '1px solid white',\n    borderRadius: '10px',\n    paddingBottom: 32,\n    boxShadow: '5px 5px 5px rgba(0,0,0,0.8)',\n  },\n}));\n\nconst PatchRoot = ({ children, width }) => {\n  const classes = useStyles({ width });\n\n  return (\n    <List className={classes.root}>\n      {children}\n    </List>\n  );\n};\n\nexport default PatchRoot;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PatchDetails from '../shared/PatchDetails/index';\n\nimport ParentChildProp from '../shared/ParentChildPro/index';\nimport PatchRoot from '../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n}));\n\nconst ScenePatch = ({ data }) => {\n  const {\n    uuid, label, type, width, children, isChildHidden,\n  } = data;\n  const classes = useStyles();\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type: 'Scene' }} />\n      <ListItem className={classes.propItem}>\n        <ParentChildProp {...{\n          isChildHidden, type, uuid, children,\n        }}\n        />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default ScenePatch;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Typography, Grid, ListItem } from '@material-ui/core';\n\nimport InputHandle from '../InputHandle';\nimport OutputHandle from '../OutputHandle';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n    oveflow: 'hidden',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n    textTransform: 'capitalize',\n  },\n}));\n\nconst PropListItemView = ({\n  children, uuid, propName, disableInput, disableOutput,\n}) => {\n  const classes = useStyles();\n  return (\n    <ListItem className={classes.propItem}>\n      <Grid container className={classes.propGrid}>\n        <Grid item xs={12}>\n          <Typography className={classes.propText}>{propName}</Typography>\n        </Grid>\n        <Grid item xs={1}>\n          {disableInput === false ? <InputHandle {...{ uuid, propName }} /> : null}\n        </Grid>\n        <Grid item xs={10}>\n          {children}\n        </Grid>\n        <Grid item xs={1}>\n          {disableOutput === false ? <OutputHandle {...{ uuid, propName }} /> : null}\n        </Grid>\n      </Grid>\n    </ListItem>\n  );\n};\n\nPropListItemView.whyDidYouRender = false;\n\nexport default memo(PropListItemView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport PropListItemView from './view';\n\nconst PropListItem = ({\n  children, uuid, propName, disableInput, disableOutput,\n}) => (\n  <PropListItemView {...{\n    uuid, propName, disableInput, disableOutput,\n  }}\n  >\n    {children}\n  </PropListItemView>\n);\n\nPropListItem.whyDidYouRender = false;\n\nexport default PropListItem;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useEffect, createContext, useMemo, useState, useCallback,\n} from 'react';\nimport useAppContext from '../contexts/useAppContext';\n\nexport const ThreeObjectsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let threeObjectsContextValue = {};\n\nconst ThreeObjectsManager = ({\n  children,\n}) => {\n  const { subscribe, publish } = useAppContext();\n  const [ThreeObjectRegistry] = useState(() => new Map());\n  const [ThreeObjectRegistryByName] = useState(() => new Map());\n  const [ThreeObjectRegistryByPos] = useState(() => new Map());\n  const [ThreeObjectRegistryByType] = useState(() => new Map());\n\n  const exitScene = useCallback(() => {\n    if (ThreeObjectRegistry !== undefined) { ThreeObjectRegistry.clear(); }\n    if (ThreeObjectRegistryByName !== undefined) { ThreeObjectRegistryByName.clear(); }\n    if (ThreeObjectRegistryByPos !== undefined) { ThreeObjectRegistryByPos.clear(); }\n    if (ThreeObjectRegistryByType !== undefined) { ThreeObjectRegistryByType.clear(); }\n  }, [\n    ThreeObjectRegistry,\n    ThreeObjectRegistryByType,\n    ThreeObjectRegistryByName,\n    ThreeObjectRegistryByPos,\n  ]);\n  useEffect(() => subscribe('scene-exit', exitScene), [subscribe, exitScene]);\n\n  const threeObjectsRegistryUtils = useMemo(\n    () => ({\n      registerThreeObject(identifier, ref) {\n      // register by id\n        ThreeObjectRegistry.set(identifier, ref);\n        // register by name\n        ThreeObjectRegistryByName.set(ref.name, ref);\n        // register by position\n        const { position } = ref;\n        const pos = `${position.x},${position.y},${position.z}`;\n        const posList = ThreeObjectRegistryByPos.get(pos) || [];\n        posList.push(ref);\n        ThreeObjectRegistryByPos.set(pos, posList);\n\n        publish('threeObjects-list-changed', 'add');\n      },\n      unregisterThreeObject(identifier, ref) {\n      // unregister by id\n        ThreeObjectRegistry.delete(identifier);\n        // unregister by name\n        ThreeObjectRegistryByName.delete(ref.name);\n        // unregister by position\n        const { position } = ref;\n        const pos = `${position.x},${position.y},${position.z}`;\n        const posList = ThreeObjectRegistryByPos.get(pos);\n        posList.splice(posList.indexOf(ref), 1);\n\n        publish('threeObjects-list-changed', 'remove');\n      },\n      findThreeObject(id) {\n        return ThreeObjectRegistry.get(id);\n      },\n      findThreeObjectByName(name) {\n        return ThreeObjectRegistryByName.get(name);\n      },\n      findThreeObjectsByPos(x, y) {\n        return ThreeObjectRegistryByPos.get(`${x},${y}`).filter((obj) => !obj.disabled) || [];\n      },\n      findThreeObjectsByLayer(type) {\n        return ThreeObjectRegistryByType.get(type).filter((obj) => !obj.disabled) || [];\n      },\n      threeObjectNamesArray() {\n        return Array.from(ThreeObjectRegistryByName.keys());\n      },\n    }),\n    [\n      ThreeObjectRegistry,\n      ThreeObjectRegistryByType,\n      ThreeObjectRegistryByName,\n      ThreeObjectRegistryByPos,\n      publish,\n    ],\n  );\n\n  threeObjectsContextValue = useMemo(() => ({\n    ThreeObjectRegistryByName,\n    ...threeObjectsRegistryUtils,\n  }), [\n    ThreeObjectRegistryByName,\n    threeObjectsRegistryUtils]);\n\n  return (\n    <ThreeObjectsContext.Provider value={threeObjectsContextValue}>\n      {children}\n    </ThreeObjectsContext.Provider>\n  );\n};\n\nThreeObjectsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default ThreeObjectsManager;\n","import { useContext } from 'react';\nimport { ThreeObjectsContext } from '../managers/ThreeObjectsManager';\n\nexport default function useThreeObjectsContext() {\n  return useContext(ThreeObjectsContext);\n}\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(() => ({\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n}));\n\nconst PatchValueView = ({ value }) => {\n  const classes = useStyles();\n  if (typeof value === 'object') {\n    return <Typography className={classes.propText}>{(value.map((v, idx) => (`${v.toFixed(3)}${value.length - 1 !== idx ? ', ' : ''} `)))}</Typography>;\n  }\n  return <Typography className={classes.propText}>{`${value}`}</Typography>;\n};\n\nexport default memo(PatchValueView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useThreeObjectsContext from '../../../../contexts/useThreeObjectsContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findThreeObject } = useThreeObjectsContext();\n  const threeObj = findThreeObject(uuid);\n\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (threeObj !== undefined) {\n      isMounted.current = true;\n      threeObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [threeObj, propName, updateProp, uuid]);\n\n  if (threeObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  propName: PropTypes.string.isRequired,\n  uuid: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  AppBar, Toolbar, ButtonGroup, Button, Tooltip,\n} from '@material-ui/core';\n\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    flexGrow: 1,\n    // necessary for content to be below app bar\n    borderBottomLeftRadius: '10px',\n    borderBottomRightRadius: '10px',\n    overflow: 'hidden',\n    minHeight: '32px',\n  },\n  toolbar: {\n    padding: 0,\n    minHeight: '32px',\n  },\n  appbar: {\n    background: 'none',\n  },\n  group: {\n    width: '100%',\n\n  },\n  button: {\n    padding: '5px 16px',\n    minWidth: '48px',\n    borderRight: '1px solid rgba(255,255,255,0.05)',\n  },\n}));\n\n// eslint-disable-next-line no-unused-vars\nconst PatchToolbarView = ({ parents, uuid, removeObj }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\" className={classes.appbar}>\n        <Toolbar className={classes.toolbar}>\n          <ButtonGroup variant=\"text\" aria-label=\"text primary button group\" className={classes.group}>\n            <Button className={classes.button} />\n            <Button className={classes.button} />\n            <Button\n              className={classes.button}\n              onClick={() => {\n                removeObj(uuid);\n              }}\n            >\n              <Tooltip title=\"Delete\" aria-label=\"delete\">\n                <DeleteOutlineIcon fontSize=\"small\" />\n              </Tooltip>\n            </Button>\n          </ButtonGroup>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default memo(PatchToolbarView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removeThreeObj } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removeThreeObj }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PropListItem from '../shared/PropListItem/index';\nimport PatchValue from './PatchValue/index';\nimport PatchDetails from '../shared/PatchDetails/index';\nimport ParentChildProp from '../shared/ParentChildPro/index';\nimport PatchToolbar from './PatchToolbar/index';\nimport PatchRoot from '../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst ThreeObjectPatch = ({ data }) => {\n  const {\n    uuid, label, type, width, children, isChildHidden, parents,\n  } = data;\n\n  const classes = useStyles();\n\n  const props = [\n    {\n      uuid, propName: 'position', disableInput: false, disableOutput: true,\n    },\n    {\n      uuid, propName: 'rotation', disableInput: false, disableOutput: true,\n    },\n    {\n      uuid, propName: 'scale', disableInput: false, disableOutput: true,\n    },\n  ];\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type }} />\n      <ListItem className={classes.propItem}>\n        <ParentChildProp {...{\n          isChildHidden, type, uuid, children,\n        }}\n        />\n      </ListItem>\n      {\n        props.map((p) => (\n          <PropListItem key={`${p.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: p.uuid, propName: p.propName }} /></PropListItem>\n        ))\n      }\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={parents} uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default ThreeObjectPatch;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removeDevice } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removeDevice }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const DevicesContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let devicesContextValue = {};\n\nconst DevicesManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n  // Device Connections\n  const [DeviceRegistry] = useState(() => new Map());\n\n  const deviceRegistryUtils = useMemo(\n    () => ({\n      findDevice(id) {\n        return DeviceRegistry.get(id);\n      },\n      registerDevice(identifier, ref) {\n        // register by id\n        DeviceRegistry.set(identifier, ref);\n        publish('devices-list-changed', 'add');\n      },\n      unregisterDevice(identifier) {\n        // unregister by id\n        DeviceRegistry.delete(identifier);\n        publish('devices-list-changed', 'remove');\n      },\n      getDevicesArray() {\n        return Array.from(DeviceRegistry.keys()).map((id) => DeviceRegistry.get(id));\n      },\n    }),\n    [DeviceRegistry, publish],\n  );\n\n  devicesContextValue = useMemo(() => ({\n    DeviceRegistry,\n    ...deviceRegistryUtils,\n  }), [\n    DeviceRegistry,\n    deviceRegistryUtils,\n  ]);\n\n  return (\n    <DevicesContext.Provider value={devicesContextValue}>\n      {children}\n    </DevicesContext.Provider>\n  );\n};\n\nDevicesManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default DevicesManager;\n","import { useContext } from 'react';\nimport { DevicesContext } from '../managers/DevicesManager';\n\nexport default function useDevicesContext() {\n  return useContext(DevicesContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useDevicesContext from '../../../../contexts/useDevicesContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findDevice } = useDevicesContext();\n  const deviceObj = findDevice(uuid);\n\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (deviceObj !== undefined) {\n      isMounted.current = true;\n      deviceObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [deviceObj, propName, updateProp, uuid]);\n\n  if (deviceObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { ListItem, makeStyles } from '@material-ui/core';\n\nimport PatchToolbar from '../PatchToolbar/index';\nimport PatchValue from '../PatchValue/index';\n\nimport PropListItem from '../../shared/PropListItem/index';\nimport PatchDetails from '../../shared/PatchDetails/index';\nimport PatchRoot from '../../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst MousePatch = ({ data }) => {\n  const {\n    uuid, width, label, type,\n  } = data;\n\n  const props = [\n    {\n      uuid, propName: 'position', disableInput: true, disableOutput: false,\n    },\n  ];\n\n  const classes = useStyles();\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: label, type }} />\n      {props.map((p) => (<PropListItem key={`${p.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: p.uuid, propName: p.propName }} /></PropListItem>))}\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={[]} uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nMousePatch.propTypes = {\n  data: PropTypes.shape({\n    uuid: PropTypes.string.isRequired,\n    width: PropTypes.number.isRequired,\n    label: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default MousePatch;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport MousePatch from './Mouse';\n\nconst DevicePatch = ({ data }) => {\n  const { type } = data;\n\n  switch (type) {\n    default:\n      return (<MousePatch {...{ data }} />);\n  }\n};\n\nDevicePatch.propTypes = {\n  data: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default DevicePatch;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  createContext, useMemo, useState, useCallback,\n} from 'react';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const TransformsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let transformsContextValue = {};\n\nconst TransformsManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n  // Transform Connections\n  const [TransformRegistry] = useState(() => new Map());\n\n  const findTransform = useCallback((id) => TransformRegistry.get(id), [TransformRegistry]);\n\n  const transformRegistryUtils = useMemo(\n    () => ({\n      findTransform,\n      registerTransform(identifier, ref) {\n        // register by id\n        TransformRegistry.set(identifier, ref);\n        publish('transforms-list-changed', 'add');\n      },\n      unregisterTransform(identifier) {\n        // unregister by id\n        TransformRegistry.delete(identifier);\n        publish('transforms-list-changed', 'remove');\n      },\n      getTransformsArray() {\n        return Array.from(TransformRegistry.keys()).map((id) => TransformRegistry.get(id));\n      },\n    }),\n    [TransformRegistry, publish, findTransform],\n  );\n\n  transformsContextValue = useMemo(() => ({\n    TransformRegistry,\n    ...transformRegistryUtils,\n  }), [\n    TransformRegistry,\n    transformRegistryUtils,\n  ]);\n\n  return (\n    <TransformsContext.Provider value={transformsContextValue}>\n      {children}\n    </TransformsContext.Provider>\n  );\n};\n\nTransformsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default TransformsManager;\n","import { useContext } from 'react';\nimport { TransformsContext } from '../managers/TransformsManager';\n\nexport default function useTransformsContext() {\n  return useContext(TransformsContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useTransformsContext from '../../../../contexts/useTransformsContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findTransform } = useTransformsContext();\n  const transformObj = findTransform(uuid);\n\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (transformObj !== undefined) {\n      isMounted.current = true;\n      transformObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [transformObj, propName, updateProp, uuid]);\n\n  if (transformObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  propName: PropTypes.string.isRequired,\n  uuid: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removeTransform } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removeTransform }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem, Typography } from '@material-ui/core';\n\nimport PatchValue from './PatchValue/index';\nimport PatchToolbar from './PatchToolbar/index';\n\nimport PatchDetails from '../shared/PatchDetails/index';\nimport PropListItem from '../shared/PropListItem/index';\nimport useTransformsContext from '../../../contexts/useTransformsContext';\nimport PatchRoot from '../shared/PatchRoot';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n    width: '100%',\n  },\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst TransformPatch = ({ data }) => {\n  const { findTransform } = useTransformsContext();\n  const [transform, setTransform] = useState({ amount: 1 });\n  const { uuid, width, label } = data;\n  const classes = useStyles({ width });\n\n  const props = [\n    {\n      uuid, propName: 'value', disableInput: false, disableOutput: false,\n    },\n  ];\n\n  useEffect(() => {\n    const p = findTransform(uuid);\n    if (p !== undefined) {\n      setTransform(p);\n    }\n  }, [uuid, findTransform, setTransform]);\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type: 'Transform' }} />\n      <ListItem className={classes.propItem}>\n        <Typography className={classes.propText}>{`x${transform.amount}`}</Typography>\n      </ListItem>\n      {props.map((p) => (<PropListItem key={`${p.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: p.uuid, propName: p.propName }} /></PropListItem>))}\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={[]} uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default TransformPatch;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nimport useAppContext from '../contexts/useAppContext';\n\nexport const GeneratorsContext = createContext(null);\n// eslint-disable-next-line import/no-mutable-exports\nexport let generatorsContextValue = {};\n\nconst GeneratorsManager = ({\n  children,\n}) => {\n  const { publish } = useAppContext();\n  // Generator Connections\n  const [GeneratorRegistry] = useState(() => new Map());\n\n  const generatorRegistryUtils = useMemo(\n    () => ({\n      findGenerator(id) {\n        return GeneratorRegistry.get(id);\n      },\n      registerGenerator(identifier, ref) {\n        // register by id\n        GeneratorRegistry.set(identifier, ref);\n        publish('generators-list-changed', 'add');\n      },\n      unregisterGenerator(identifier) {\n        // unregister by id\n        GeneratorRegistry.delete(identifier);\n        publish('generators-list-changed', 'remove');\n      },\n      getGeneratorsArray() {\n        return Array.from(GeneratorRegistry.keys()).map((id) => GeneratorRegistry.get(id));\n      },\n    }),\n    [GeneratorRegistry, publish],\n  );\n\n  generatorsContextValue = useMemo(() => ({\n    GeneratorRegistry,\n    ...generatorRegistryUtils,\n  }), [\n    GeneratorRegistry,\n    generatorRegistryUtils,\n  ]);\n\n  return (\n    <GeneratorsContext.Provider value={generatorsContextValue}>\n      {children}\n    </GeneratorsContext.Provider>\n  );\n};\n\nGeneratorsManager.whyDidYouRender = false;\n\nGeneratorsManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default GeneratorsManager;\n","import { useContext } from 'react';\nimport { GeneratorsContext } from '../managers/GeneratorsManager';\n\nexport default function useGeneratorsContext() {\n  return useContext(GeneratorsContext);\n}\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport useGeneratorsContext from '../../../../contexts/useGeneratorsContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findGenerator } = useGeneratorsContext();\n  const generatorObj = findGenerator(uuid);\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (generatorObj !== undefined) {\n      isMounted.current = true;\n      generatorObj.subscribe(`${uuid}-${propName.toLowerCase()}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [generatorObj, propName, updateProp, uuid]);\n\n  if (generatorObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","export default function DrawSine(resolution) {\n  const scale = 1; // Min Max range. X range: [-scale, scale] Y range: [-scale, scale]\n  const points = [];\n  for (let i = 0; i <= 360; i += (360 / resolution)) {\n    points.push([\n      (scale / 360) * (i * 2) - scale,\n      Math.sin(i * (Math.PI / 180)) * scale,\n    ]);\n  }\n  return points;\n}\n","export default function DrawCircle(resolution) {\n  const diameter = 1;\n  const points = [];\n  for (let i = 0; i <= 360; i += (360 / resolution)) {\n    points.push([\n      Math.sin(i * (Math.PI / 180)) * diameter,\n      Math.cos(i * (Math.PI / 180)) * diameter,\n    ]);\n  }\n  return points;\n}\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useRef, useEffect, useState,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(() => ({\n  canvasContainer: {\n    width: (props) => (props.parentSize[0]),\n    height: (props) => (props.parentSize[1]),\n    position: 'absolute',\n    zIndex: 1,\n  },\n}));\n\nconst ShapePreviewBackground = ({ shape, parentSize }) => {\n  const [shapeDimensions, setShapeDimensions] = useState([[-1, 1], [-1, 1]]);\n  const [context, setContext] = useState(null);\n  const canvasRef = useRef(null);\n  const [finalShape, setFinalShape] = useState([[0, 0], [1, 1]]);\n\n  useEffect(() => {\n    // Save size of shape\n    if (canvasRef.current !== undefined) {\n      setShapeDimensions([\n        [Math.min(...shape.map((p) => p[0])), Math.max(...shape.map((p) => p[0]))],\n        [Math.min(...shape.map((p) => p[1])), Math.max(...shape.map((p) => p[1]))],\n      ]);\n\n      // Save canvas context\n      setContext(canvasRef.current.getContext('2d'));\n    }\n  }, [canvasRef, shape, setShapeDimensions]);\n\n  useEffect(() => {\n    if (context !== null) {\n      // adjust noralized generator values to size of dom container\n      setFinalShape(shape.map((s) => [\n        (s[0] + shapeDimensions[0][1]) * ((parentSize[0] * 0.9) / 2) + (parentSize[0] * 0.05),\n        (-s[1] + shapeDimensions[1][1]) * ((parentSize[1] * 0.9) / 2) + (parentSize[1] * 0.05),\n      ]));\n    }\n  }, [context, shape, shapeDimensions, parentSize]);\n\n  useEffect(() => {\n    if (context !== null) {\n      // Draw shape on canvas\n      const draw = (ctx) => {\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = '#222222';\n        ctx.moveTo(finalShape[0][0], finalShape[0][1]);\n        finalShape.forEach((s) => {\n          ctx.lineTo(\n            s[0],\n            s[1],\n          );\n        });\n        ctx.stroke();\n      };\n\n      draw(context);\n    }\n  }, [context, finalShape]);\n\n  // Create local classes\n  const classes = useStyles({ parentSize });\n  return (\n    <canvas\n      width={parentSize[0]}\n      height={parentSize[1]}\n      className={classes.canvasContainer}\n      ref={canvasRef}\n    />\n  );\n};\n\nShapePreviewBackground.whyDidYouRender = true;\n\nexport default memo(ShapePreviewBackground);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  memo, useEffect, useState, useRef, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\nimport useGeneratorsContext from '../../../../contexts/useGeneratorsContext';\n\nconst useStyles = makeStyles(() => ({\n  canvasContainer: {\n    width: (props) => (props.parentSize[0]),\n    height: (props) => (props.parentSize[1]),\n    position: 'absolute',\n    zIndex: 2,\n  },\n  ind: {\n    background: '#FFFFFF',\n    borderRadius: '50%',\n    border: '1px solid #222',\n    width: 7,\n    height: 7,\n    position: 'absolute',\n    left: (props) => (props.finalVal[0]),\n    top: (props) => (props.finalVal[1]),\n\n  },\n}));\n\nconst ShapePreviewIndicator = ({\n  shape, propName, parentSize, uuid,\n}) => {\n  const { findGenerator } = useGeneratorsContext();\n  const generatorObj = findGenerator(uuid);\n\n  const [propVal, setPropVal] = useState(0);\n  const [shapeDimensions, setShapeDimensions] = useState([-1, 1], [-1, 1]);\n  const [finalVal, setFinalVal] = useState([1, 1]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (generatorObj !== undefined) {\n      isMounted.current = true;\n      setPropVal(generatorObj[propName]);\n      generatorObj.subscribe(`${uuid}-${propName}-updated`, updateProp);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [generatorObj, propName, updateProp, uuid]);\n\n  useEffect(() => {\n    setShapeDimensions([\n      [Math.min(...shape.map((p) => p[0])), Math.max(...shape.map((p) => p[0]))],\n      [Math.min(...shape.map((p) => p[1])), Math.max(...shape.map((p) => p[1]))],\n    ]);\n  }, [shape, setShapeDimensions]);\n\n  useEffect(() => {\n    setFinalVal([\n      (propVal[0] + shapeDimensions[0][1])\n      * ((parentSize[0] * 0.9) / 2) + (parentSize[0] * 0.05) - 2.5,\n      (-propVal[1] + shapeDimensions[1][1])\n      * ((parentSize[1] * 0.9) / 2) + (parentSize[1] * 0.05) - 2, 5,\n    ]);\n  }, [propVal, shapeDimensions, parentSize]);\n\n  // Create local classes\n  const classes = useStyles({ parentSize, finalVal });\n  return <div className={classes.canvasContainer}><div className={classes.ind} /></div>;\n};\n\nexport default memo(ShapePreviewIndicator);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport useGeneratorsContext from '../../../../contexts/useGeneratorsContext';\n\nimport DrawSine from '../../../../shapes/drawSine';\nimport DrawCircle from '../../../../shapes/drawCircle';\n\nimport ShapePreviewBackground from './background';\nimport ShapePreviewIndicator from './indicator';\n\nconst useStyles = makeStyles(() => ({\n  shapeContainer: {\n    width: '100%',\n    height: 100,\n    padding: '0 10%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n}));\n\nconst ShapePreview = ({ uuid, propName }) => {\n  const { findGenerator, getGeneratorsArray } = useGeneratorsContext();\n\n  const [generator, setGenerator] = useState(null);\n\n  const isMounted = useRef(false);\n\n  const updateGenerator = useCallback((val) => {\n    if (isMounted.current) {\n      setGenerator(val);\n    }\n  }, [isMounted, setGenerator]);\n\n  useEffect(() => {\n    const generatorObj = findGenerator(uuid);\n    if (generatorObj !== undefined) {\n      isMounted.current = true;\n      setGenerator(generatorObj);\n      generatorObj.subscribe('generators-list-changed', updateGenerator);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [updateGenerator, findGenerator, uuid, getGeneratorsArray]);\n\n  const [shape, setShape] = useState([[-1, -1], [1, 1], [1, -1], [-1, 1]]);\n\n  const shapeRef = useRef(null);\n  const [containerSize, setContainerSize] = useState([1, 1]);\n\n  // Create local classes\n  const classes = useStyles();\n\n  useEffect(() => {\n    setContainerSize(\n      shapeRef.current\n        ? [shapeRef.current.offsetWidth * 0.8, shapeRef.current.offsetHeight] : [1, 1],\n    );\n  }, [shapeRef, setContainerSize]);\n\n  useEffect(() => {\n    if (generator) {\n      switch (generator.type) {\n        default:\n        case 'Sinewave':\n          setShape(DrawSine(generator.resolution));\n          break;\n        case 'Orbit':\n          setShape(DrawCircle(generator.resolution));\n          break;\n      }\n    }\n  }, [setShape, generator]);\n\n  if (generator === null) {\n    return (\n      <div className={classes.shapeContainer} ref={shapeRef}>\n        <ShapePreviewBackground {...{ shape, parentSize: containerSize }} />\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes.shapeContainer} ref={shapeRef}>\n      <ShapePreviewIndicator {...{\n        shape, propName, parentSize: containerSize, uuid,\n      }}\n      />\n      <ShapePreviewBackground {...{ shape, parentSize: containerSize }} />\n    </div>\n  );\n};\n\nShapePreview.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default ShapePreview;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ uuid }) => {\n  const { removeGenerator } = useAppContext();\n  return <PatchToolbarView {...{ parents: [], uuid, removeObj: removeGenerator }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Grid, ListItem, Typography } from '@material-ui/core';\n\nimport PatchDetails from '../shared/PatchDetails/index';\nimport PatchValue from './PatchValue/index';\nimport ShapePreview from './ShapePreview/index';\nimport PatchToolbar from './PatchToolbar/index';\nimport PatchRoot from '../shared/PatchRoot';\nimport OutputHandle from '../shared/OutputHandle';\n\nconst useStyles = makeStyles(() => ({\n  propItem: {\n    margin: 0,\n    padding: '0 10px',\n  },\n  propGrid: {\n    width: '100%',\n    height: '100%',\n    borderBottom: '1px solid rgba(255,255,255,0.05)',\n  },\n  propText: {\n    fontSize: '12px',\n    whiteSpace: 'nowrap',\n    textAlign: 'center',\n  },\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst Generator = ({ data }) => {\n  const { uuid, label, width } = data;\n\n  const classes = useStyles();\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${label}`, uuid: `${uuid}`, type: 'Generator' }} />\n      <ListItem className={classes.propItem}>\n        <Grid container className={classes.propGrid}>\n          <Grid item xs={12}>\n            <Typography className={classes.propText}>Position</Typography>\n          </Grid>\n          <Grid item xs={1} />\n          <Grid item xs={10} style={{ borderBottom: '1px solid rgba(255,255,255,0.05)' }}>\n            <PatchValue {...{ uuid, propName: 'position' }} />\n          </Grid>\n          <Grid item xs={1}>\n            <OutputHandle {...{ uuid, propName: 'position' }} />\n          </Grid>\n        </Grid>\n      </ListItem>\n      <ListItem className={classes.propItem}>\n        <ShapePreview {...{ uuid, propName: 'position' }} />\n      </ListItem>\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar uuid={uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nGenerator.whyDidYouRender = true;\n\nGenerator.propTypes = {\n  data: PropTypes.shape({\n    uuid: PropTypes.string.isRequired,\n    label: PropTypes.string.isRequired,\n    width: PropTypes.number.isRequired,\n  }).isRequired,\n};\n\nexport default memo(Generator);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useState, useEffect, useRef, useCallback,\n} from 'react';\n\nimport usePeersContext from '../../../../contexts/usePeersContext';\n\nimport PatchValueView from '../../shared/PatchValue/view';\n\nconst PatchValue = ({ uuid, propName }) => {\n  const { findPeer } = usePeersContext();\n  const peerObj = findPeer(uuid);\n  const [propVal, setPropVal] = useState([0, 0, 0]);\n\n  const isMounted = useRef(false);\n\n  const updateProp = useCallback((val) => {\n    if (isMounted.current) {\n      setPropVal(val);\n    }\n  }, [isMounted, setPropVal]);\n\n  useEffect(() => {\n    if (peerObj !== undefined) {\n      isMounted.current = true;\n      if (typeof peerObj.subscribe === 'function') {\n        peerObj.subscribe(`${uuid}-${propName.toLowerCase()}-updated`, updateProp);\n      }\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [peerObj, propName, updateProp, uuid]);\n\n  if (peerObj === undefined) { return <PatchValueView {...{ value: [0, 0, 0] }} />; }\n\n  return <PatchValueView {...{ value: propVal }} />;\n};\n\nPatchValue.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  propName: PropTypes.string.isRequired,\n};\n\nexport default PatchValue;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../../../contexts/useAppContext';\nimport PatchToolbarView from '../../shared/PatchToolbar/view';\n\nconst PatchToolbar = ({ parents, uuid }) => {\n  const { removePeer } = useAppContext();\n  return <PatchToolbarView {...{ parents, uuid, removeObj: removePeer }} />;\n};\n\nPatchToolbar.whyDidYouRender = true;\n\nexport default PatchToolbar;\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { ListItem } from '@material-ui/core';\n\nimport PropListItem from '../shared/PropListItem/index';\nimport PatchValue from './PatchValue/index';\nimport PatchDetails from '../shared/PatchDetails/index';\nimport useConnectionsContext from '../../../contexts/useConnectionsContext';\nimport PatchRoot from '../shared/PatchRoot';\n\nimport PatchToolbar from './PatchToolbar/index';\n\nconst useStyles = makeStyles(() => ({\n  toolbar: {\n    padding: 0,\n    position: 'fixed',\n    bottom: 0,\n  },\n}));\n\nconst PeerPatch = ({ data }) => {\n  const { findConnection } = useConnectionsContext();\n  const [peer, setPeer] = useState(null);\n  const { uuid, width } = data;\n\n  const [props, setProps] = useState([]);\n\n  useEffect(() => {\n    if (peer !== null) {\n      setProps([\n        {\n          uuid: peer.uuid, propName: 'data', disableInput: false, disableOutput: false,\n        },\n      ]);\n    }\n  }, [peer]);\n\n  const classes = useStyles();\n  useEffect(() => {\n    const p = findConnection(uuid);\n    if (p !== undefined) {\n      setPeer(p);\n    }\n  }, [uuid, findConnection, setPeer]);\n\n  if (peer === null) { return null; }\n\n  return (\n    <PatchRoot {...{ width }}>\n      <PatchDetails {...{ name: `${peer.name}`, uuid: `${peer.uuid}`, type: 'Peer' }} />\n      {props.map((p) => (<PropListItem key={`${peer.uuid}-${p.propName}-prop`} {...p}><PatchValue {...{ uuid: peer.uuid, propName: p.propName }} /></PropListItem>))}\n      <ListItem className={classes.toolbar}>\n        <PatchToolbar parents={[]} uuid={peer.uuid} />\n      </ListItem>\n    </PatchRoot>\n  );\n};\n\nexport default PeerPatch;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { getSmoothStepPath } from 'react-flow-renderer';\n\nconst CustomEdge = ({\n  sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition, id, style,\n}) => {\n  const edgePath = getSmoothStepPath({\n    sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition,\n  });\n\n  return (\n    <g>\n      <defs>\n        <marker\n          id=\"markerEnd\"\n          markerWidth=\"35\"\n          markerHeight=\"35\"\n          viewBox=\"-10 -10 20 20\"\n          orient=\"auto\"\n          refX=\"-3\"\n          refY=\"0\"\n        >\n          <polyline\n            stroke=\"#222\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"1\"\n            fill=\"#fff\"\n            points=\"-5,-3 0,0 -5,3 -5,-3\"\n          />\n        </marker>\n      </defs>\n      <circle cx={sourceX} cy={sourceY} fill=\"#fff\" r={4} stroke=\"#222\" strokeWidth={1.5} />\n      <path id={id} style={style} className=\"react-flow__edge-path\" d={edgePath} markerEnd=\"url(#markerEnd)\" />\n    </g>\n  );\n};\n\nexport default CustomEdge;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport { getBezierPath } from 'react-flow-renderer';\n\nconst CustomLineageEdge = ({\n  sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition, id, style,\n}) => {\n  const edgePath = getBezierPath({\n    sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition,\n  });\n\n  return (\n    <g>\n      <defs>\n        <marker\n          id=\"markerEndLineage\"\n          markerWidth=\"35\"\n          markerHeight=\"35\"\n          viewBox=\"-10 -10 20 20\"\n          orient=\"auto\"\n          refX=\"-3\"\n          refY=\"0\"\n        >\n          <polyline\n            stroke=\"#222\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"1\"\n            fill=\"#fff\"\n            points=\"-5,-3 0,0 -5,3 -5,-3\"\n          />\n        </marker>\n      </defs>\n      <circle cx={sourceX} cy={sourceY} fill=\"#fff\" r={4} stroke=\"#222\" strokeWidth={1.5} />\n      <path id={id} style={style} className=\"react-flow__edge-path\" d={edgePath} markerEnd=\"url(#markerEndLineage)\" />\n    </g>\n  );\n};\n\nexport default CustomLineageEdge;\n","/* eslint-disable react/prop-types */\n/* eslint-disable no-param-reassign */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\nimport ReactFlow, { Controls, isNode } from 'react-flow-renderer';\nimport dagre from 'dagre';\n\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nconst onLoad = () => {\n  // reactFlowInstance.fitView();\n};\n\nconst nodeWidth = 150;\nconst nodeHeight = 200;\n\nconst NodeEditorView = ({\n  elements, nodeTypes, edgeTypes, updateConnection, addConnection,\n}) => {\n  const dagreGraph = new dagre.graphlib.Graph();\n  dagreGraph.setDefaultEdgeLabel(() => ({}));\n\n  const getLayoutedElements = (elems) => {\n    dagreGraph.setGraph({\n      rankdir: 'LR',\n      align: 'DL',\n      // ranker: 'tight-tree',\n      // acyclicer: 'greedy',\n      nodesep: 50,\n      edgesep: 0,\n      ranksep: 50,\n      marginx: 20,\n      marginy: 20,\n    });\n\n    elems.forEach((el) => {\n      if (isNode(el)) {\n        dagreGraph.setNode(el.id, { width: nodeWidth, height: nodeHeight });\n      } else {\n        dagreGraph.setEdge(el.source, el.target);\n      }\n    });\n\n    dagre.layout(dagreGraph);\n\n    return elems.filter((el) => !el.isHidden).map((el) => {\n      if (isNode(el)) {\n        const nodeWithPosition = dagreGraph.node(el.id);\n        el.targetPosition = 'right';\n        el.sourcePosition = 'left';\n\n        // unfortunately we need this little hack to pass a slightly different position\n        // to notify react flow about the change. Moreover we are shifting the dagre node position\n        // (anchor=center center) to the top left\n        // so it matches the react flow node anchor point (top left).\n        el.position = {\n          x: nodeWithPosition.x - nodeWidth / 2 + Math.random() / 1000,\n          y: nodeWithPosition.y - nodeHeight / 2,\n        };\n      }\n\n      return el;\n    });\n  };\n\n  const layoutedElements = getLayoutedElements(elements.filter((el) => !el.isHidden));\n\n  // Local CSS classes\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <ReactFlow\n        elements={layoutedElements}\n        nodeTypes={nodeTypes}\n        edgeTypes={edgeTypes}\n        onLoad={onLoad}\n        snapToGrid\n        // nodesDraggable={false}\n        // onElementClick={()=>{console.log('node click');}}\n        onEdgeUpdate={updateConnection}\n        onConnect={addConnection}\n        onElementsRemove={() => {}}\n        // onDrop={()=>{console.log('drop');}}\n        // onDragOver={()=>{console.log(' dragOver');}}\n        // onNodeDragStart={()=>{console.log('node drag');}}\n        // onNodeDragStop={()=>{console.log('node drop');}}\n      >\n        <Controls />\n      </ReactFlow>\n    </div>\n  );\n};\n\nNodeEditorView.whyDidYouRender = true;\n\nexport default memo(NodeEditorView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useState, useMemo } from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\nimport { rtSceneToFlow } from '../../utils/toFlow';\n\nimport Scene from '../@patches/Scene';\nimport ThreeObject from '../@patches/ThreeObject';\n\nimport Device from '../@patches/Device';\nimport Transform from '../@patches/Transform';\nimport Generator from '../@patches/Generator';\nimport Peer from '../@patches/Peer';\n\nimport CustomEdge from '../@patches/edges/CustomEdge';\nimport CustomLineageEdge from '../@patches/edges/CustomLineageEdge';\n\nimport NodeEditorView from './view';\n\nconst NodeEditor = () => {\n  const [elements, setElements] = useState([]);\n  const { sceneJSON, updateConnection, addConnection } = useAppContext();\n\n  useMemo(() => { setElements(rtSceneToFlow(sceneJSON)); }, [sceneJSON]);\n\n  const nodeTypes = {\n    Scene,\n    threeObj: ThreeObject,\n    device: Device,\n    transform: Transform,\n    generator: Generator,\n    peer: Peer,\n  };\n\n  const edgeTypes = {\n    custom: CustomEdge,\n    customLineage: CustomLineageEdge,\n  };\n\n  return (\n    <NodeEditorView {...{\n      elements, nodeTypes, edgeTypes, updateConnection, addConnection,\n    }}\n    />\n  );\n};\n\nNodeEditor.whyDidYouRender = true;\n\nexport default NodeEditor;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { IconButton } from '@material-ui/core';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst EditorCloseButtonView = ({ editorMenuOpen, setEditorMenuOpen }) => {\n  const classes = useStyles();\n  return (\n    <IconButton\n      edge=\"start\"\n      className={classes.menuButton}\n      color=\"inherit\"\n      aria-label=\"menu\"\n      onClick={() => {\n        setEditorMenuOpen(!editorMenuOpen);\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\nEditorCloseButtonView.whyDidYouRender = true;\n\nEditorCloseButtonView.propTypes = {\n  editorMenuOpen: PropTypes.bool.isRequired,\n  setEditorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default memo(EditorCloseButtonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport EditorCloseButtonView from './view';\n\nimport useEditorMenuContext from '../../contexts/useEditorMenuContext';\n\nconst EditorCloseButton = () => {\n  const { editorMenuOpen, setEditorMenuOpen } = useEditorMenuContext();\n\n  return (\n    <EditorCloseButtonView {...{ editorMenuOpen, setEditorMenuOpen }} />);\n};\n\nEditorCloseButton.whyDidYouRender = true;\n\nexport default EditorCloseButton;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { IconButton } from '@material-ui/core';\n\nimport GetAppIcon from '@material-ui/icons/GetApp';\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst SceneDownloadButttonView = ({ sceneJSON }) => {\n  const classes = useStyles();\n  return (\n    <IconButton\n      edge=\"start\"\n      className={classes.menuButton}\n      color=\"inherit\"\n      aria-label=\"menu\"\n      onClick={() => {\n        const link = document.createElement('a');\n        link.download = 'RT_Scene.json';\n        link.href = `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(sceneJSON))}`;\n        link.click();\n      }}\n    >\n      <GetAppIcon />\n    </IconButton>\n  );\n};\n\nSceneDownloadButttonView.whyDidYouRender = true;\n\nSceneDownloadButttonView.propTypes = {\n  sceneJSON: PropTypes.shape({}).isRequired,\n};\n\nexport default memo(SceneDownloadButttonView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\nimport SceneDownloadButttonView from './view';\n\nconst SceneDownloadButtton = () => {\n  const { sceneJSON } = useAppContext();\n  return <SceneDownloadButttonView {...{ sceneJSON }} />;\n};\n\nSceneDownloadButtton.whyDidYouRender = true;\n\nexport default SceneDownloadButtton;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { IconButton } from '@material-ui/core';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst AddToEditorCloseButtonView = ({ handleClose }) => {\n  const classes = useStyles();\n  return (\n    <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={handleClose}>\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\nAddToEditorCloseButtonView.whyDidYouRender = true;\n\nexport default memo(AddToEditorCloseButtonView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport AddToEditorCloseButtonView from './view';\n\nconst AddToEditorCloseButton = ({ handleClose }) => (\n  <AddToEditorCloseButtonView handleClose={handleClose} />\n);\n\nAddToEditorCloseButton.whyDidYouRender = true;\n\nexport default AddToEditorCloseButton;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo, forwardRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { AppBar, Toolbar, Typography } from '@material-ui/core';\n\nimport AddToEditorCloseButton from '../AddToEditorCloseButton/index';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n}));\n\nconst AddToEditorToolbarView = (props, ref) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <AddToEditorCloseButton handleClose={props.handleClose} />\n          <Typography>Add Component</Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default memo(forwardRef(AddToEditorToolbarView));\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { forwardRef } from 'react';\n\nimport AddToEditorToolbarView from './view';\n\nconst AddToEditorToolbar = (props, ref) => (\n  <AddToEditorToolbarView {...{ ref }} />\n);\n\nAddToEditorToolbar.whyDidYouRender = true;\n\nexport default forwardRef(AddToEditorToolbar);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\n\nimport { makeStyles } from '@material-ui/styles';\n\nimport { MenuItem } from '@material-ui/core';\n\nimport useConnectionsContext from '../../contexts/useConnectionsContext';\nimport useAppContext from '../../contexts/useAppContext';\n\nconst useStyles = makeStyles(() => ({\n  listItem: {\n    padding: 0,\n  },\n  list: {\n    width: '100%',\n  },\n  sectionTitle: {\n    marginTop: 10,\n  },\n}));\n\nconst AddPeersToScene = ({ closeMenu }) => {\n  const { addPeer, sceneJSON } = useAppContext();\n  const { getConnectionsArray } = useConnectionsContext();\n  const { subscribe } = useAppContext();\n\n  const classes = useStyles();\n\n  const [connections, setConnections] = useState([]);\n\n  useEffect(() => { // update data on load\n    const peer = getConnectionsArray();\n    if (peer !== undefined) {\n      setConnections(peer.filter((p) => (!p.isMe)));\n    }\n  }, [setConnections, getConnectionsArray]);\n\n  const isMounted = useRef(false);\n\n  const updateConnections = useCallback(() => {\n    if (isMounted.current) {\n      const peer = getConnectionsArray();\n      if (peer !== undefined) {\n        setConnections(peer.filter((p) => (!p.isMe)));\n      }\n    }\n  }, [getConnectionsArray]);\n\n  useEffect(() => {\n    if (updateConnections !== undefined) {\n      isMounted.current = true;\n      subscribe('connection-modified', updateConnections);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [subscribe, updateConnections]);\n\n  if (connections.length === 0) { return null; }\n\n  return (\n    <ul className={classes.listItem}>\n\n      {connections.map((connection) => <MenuItem disabled={(sceneJSON.peers.filter((p) => p.uuid === connection.uuid).length > 0)} key={`add_peer_menu_${connection.uuid}_${connection.connectionId}`} onClick={() => { addPeer(connection.uuid); closeMenu(); }}>{`${connection.name} (${connection.uuid})`}</MenuItem>)}\n    </ul>\n  );\n};\n\nAddPeersToScene.whyDidYouRender = true;\n\nAddPeersToScene.propTypes = {\n  closeMenu: PropTypes.func.isRequired,\n};\n\nexport default AddPeersToScene;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  IconButton, MenuItem, Menu, Tooltip, Accordion, AccordionSummary, AccordionDetails, Typography,\n} from '@material-ui/core';\n\nimport AddIcon from '@material-ui/icons/Add';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AddToEditorToolbar from '../AddToEditorToolbar';\nimport useAppContext from '../../contexts/useAppContext';\nimport AddPeersToScene from '../AddPeersToScene';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    height: '100%',\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  paper: {\n    width: '375px',\n    height: '485px',\n  },\n  list: {\n    width: '100%',\n    paddingTop: 0,\n  },\n  itemList: {\n    width: '100%',\n  },\n}));\n\nconst AddToEditorMenu = () => {\n  const classes = useStyles();\n\n  const {\n    addThreeObj, addGenerator, addDevice, addTransform,\n  } = useAppContext();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const openMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const closeMenu = () => {\n    setAnchorEl(null);\n  };\n\n  const addObject = (type) => {\n    addThreeObj(type);\n    closeMenu();\n  };\n\n  return (\n    <div>\n      <Tooltip title=\"Component\" aria-label=\"Component\">\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"menu-appbar\"\n          aria-haspopup=\"true\"\n          onClick={openMenu}\n          color=\"inherit\"\n        >\n          <AddIcon />\n        </IconButton>\n      </Tooltip>\n      <Menu\n        className={classes.root}\n        id=\"menu-appbar\"\n        anchorEl={anchorEl}\n        keepMounted\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        open={open}\n        onClose={closeMenu}\n        classes={{\n          paper: classes.paper,\n          list: classes.list,\n        }}\n      >\n        <AddToEditorToolbar closeMenu={closeMenu} />\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"3d-objects-content\"\n            id=\"3d-objects-header\"\n          >\n            <Typography className={classes.heading}>3d Objects</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <ul className={classes.itemList}>\n              <MenuItem onClick={() => { addObject('Box'); closeMenu(); }}>Cube</MenuItem>\n              <MenuItem onClick={() => { addObject('Sphere'); closeMenu(); }}>Sphere</MenuItem>\n              <MenuItem onClick={() => { addObject('Plane'); closeMenu(); }}>Plane</MenuItem>\n            </ul>\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"peers-content\"\n            id=\"peers-header\"\n          >\n            <Typography className={classes.heading}>Peers</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <AddPeersToScene closeMenu={closeMenu} />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"generators-content\"\n            id=\"generators-header\"\n          >\n            <Typography className={classes.heading}>Generators</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <ul className={classes.itemList}>\n              <MenuItem onClick={() => { addGenerator('Sinewave'); closeMenu(); }}>Sinewave</MenuItem>\n              <MenuItem onClick={() => { addGenerator('Orbit'); closeMenu(); }}>Orbit</MenuItem>\n            </ul>\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"devices-content\"\n            id=\"devices-header\"\n          >\n            <Typography className={classes.heading}>Devices</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <MenuItem onClick={() => { addDevice('Mouse'); closeMenu(); }}>Mouse</MenuItem>\n            <MenuItem onClick={() => { addDevice('Keyboard'); closeMenu(); }}>Keyboard</MenuItem>\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"transforms-content\"\n            id=\"transforms-header\"\n          >\n            <Typography className={classes.heading}>Transforms</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <MenuItem onClick={() => { addTransform('Multiply'); closeMenu(); }}>Multiply</MenuItem>\n          </AccordionDetails>\n        </Accordion>\n      </Menu>\n    </div>\n  );\n};\n\nexport default AddToEditorMenu;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { AppBar, Toolbar, Typography } from '@material-ui/core';\n\nimport EditorCloseButton from '../EditorCloseButton/index';\nimport SceneDownloadButtton from '../SceneDownloadButton';\nimport AddToEditorMenu from '../AddToEditorMenu';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    marginRight: theme.spacing(2),\n  },\n  spacer: {\n    flexGrow: 1,\n  },\n}));\n\nconst EditorToolbarView = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <EditorCloseButton />\n          <Typography variant=\"h6\" className={classes.title}>\n            Scene Editor\n          </Typography>\n          <SceneDownloadButtton />\n          <div className={classes.spacer} />\n          <AddToEditorMenu />\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default memo(EditorToolbarView);\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useAppContext from '../../contexts/useAppContext';\n\nimport EditorToolbarView from './view';\n\nconst EditorToolbar = () => {\n  const { sceneJSON } = useAppContext();\n  return <EditorToolbarView {...{ sceneJSON }} />;\n};\n\nEditorToolbar.whyDidYouRender = true;\n\nexport default EditorToolbar;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Drawer, Divider } from '@material-ui/core';\n\nimport NodeEditor from '../../NodeEditor/index';\nimport EditorToolbar from '../../EditorToolbar/index';\n\nconst useStyles = makeStyles(() => ({\n  drawer: {\n    width: '100%',\n    height: (props) => props.editorMenuHeight,\n    position: 'fixed',\n  },\n  drawerPaper: {\n    width: '100%',\n    height: (props) => props.editorMenuHeight,\n  },\n}));\n\nconst EditorView = ({ editorMenuOpen, editorMenuHeight, setEditorMenuOpen }) => {\n  const classes = useStyles({ editorMenuOpen, editorMenuHeight, setEditorMenuOpen });\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"persistent\"\n      anchor=\"bottom\"\n      open={editorMenuOpen}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <EditorToolbar />\n      <Divider />\n      <NodeEditor />\n    </Drawer>\n  );\n};\n\nEditorView.whyDidYouRender = true;\n\nEditorView.propTypes = {\n  editorMenuOpen: PropTypes.bool.isRequired,\n  editorMenuHeight: PropTypes.number.isRequired,\n  setEditorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default EditorView;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react';\n\nimport useEditorMenuContext from '../../../contexts/useEditorMenuContext';\nimport EditorView from './view';\n\nconst Editor = () => {\n  const { editorMenuOpen, editorMenuHeight, setEditorMenuOpen } = useEditorMenuContext();\n\n  return (\n    <EditorView {...{\n      editorMenuOpen,\n      editorMenuHeight,\n      setEditorMenuOpen,\n    }}\n    />\n  );\n};\n\nEditor.whyDidYouRender = true;\n\nexport default Editor;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport { PropTypes } from 'prop-types';\n\nimport React, { createContext, memo } from 'react';\n\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { AppBar, Toolbar, IconButton } from '@material-ui/core';\n\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport Tools from './@RecklessCore/components/@menus/Tools/index';\nimport Inspector from './@RecklessCore/components/@menus/Inspector/index';\nimport Editor from './@RecklessCore/components/@menus/Editor/index';\n\nexport const ToolsMenuContext = createContext(null);\nexport const EditorMenuContext = createContext(null);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    height: '100%',\n    overflow: 'scroll',\n  },\n  rootShiftBottom: {\n    height: (props) => (`calc(100% - ${props.editorMenuOpen ? props.editorMenuHeight : 0}px)`),\n    transition: theme.transitions.create('height', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  appBar: {\n    width: (props) => (`calc(100% - ${(props.toolsMenuOpen ? props.toolsMenuWidth : 0) + (props.inspectorMenuOpen ? props.inspectorMenuWidth : 0)}px)`),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    background: 'none',\n    boxShadow: 'none',\n  },\n  appBarShiftLeft: {\n    marginLeft: (props) => (props.toolsMenuWidth),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  appBarShiftRight: {\n    marginRight: (props) => (props.inspectorMenuWidth),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  renderArea: {\n    flexGrow: 1,\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: 0,\n    marginRight: 0,\n    height: '100%',\n  },\n  renderAreaShiftLeft: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: (props) => (props.toolsMenuWidth),\n  },\n  renderAreaShiftRight: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginRight: (props) => (props.inspectorMenuWidth),\n  },\n  bottomAppBar: {\n    width: (props) => (`calc(100% - ${(props.toolsMenuOpen ? props.toolsMenuWidth : 0) + (props.inspectorMenuOpen ? props.inspectorMenuWidth : 0)}px)`),\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    top: 'auto',\n    bottom: (props) => (props.editorMenuOpen ? props.editorMenuHeight : 0),\n    background: 'none',\n    boxShadow: 'none',\n  },\n  bottomToolbar: {\n    width: '100%',\n  },\n  inspectorButton: {\n    marginLeft: 'auto',\n  },\n}));\n\nconst AppView = ({\n  children,\n  editorMenuOpen,\n  editorMenuHeight,\n  setEditorMenuOpen,\n  toolsMenuOpen,\n  toolsMenuWidth,\n  inspectorMenuOpen,\n  inspectorMenuWidth,\n  setInspectorMenuOpen,\n}) => {\n  // Local CSS classes\n  const classes = useStyles({\n    editorMenuOpen,\n    editorMenuHeight,\n    toolsMenuOpen,\n    toolsMenuWidth,\n    inspectorMenuOpen,\n    inspectorMenuWidth,\n  });\n\n  return (\n    <div\n      className={clsx(classes.root, {\n        [classes.rootShiftBottom]: editorMenuOpen,\n      })}\n    >\n      {toolsMenuOpen === true ? <Tools /> : null}\n      <main\n        className={clsx(classes.renderArea, {\n          [classes.renderAreaShiftLeft]: toolsMenuOpen,\n          [classes.renderAreaShiftRight]: inspectorMenuOpen,\n        })}\n      >\n        {children}\n        <AppBar\n          position=\"fixed\"\n          color=\"primary\"\n          className={clsx(classes.bottomAppBar, {\n            [classes.appBarShiftLeft]: toolsMenuOpen,\n            [classes.appBarShiftRight]: inspectorMenuOpen,\n          })}\n        >\n          <Toolbar className={classes.bottomToolbar}>\n            {editorMenuOpen !== true ? (\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                onClick={() => { setEditorMenuOpen(!editorMenuOpen); }}\n                edge=\"end\"\n                className={classes.menuButton}\n              >\n                <CreateIcon />\n              </IconButton>\n            ) : null}\n            {inspectorMenuOpen !== true ? (\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open add element\"\n                onClick={() => { setInspectorMenuOpen(!inspectorMenuOpen); }}\n                edge=\"end\"\n                className={classes.inspectorButton}\n              >\n                <InfoOutlinedIcon />\n              </IconButton>\n            ) : null}\n          </Toolbar>\n        </AppBar>\n      </main>\n      {inspectorMenuOpen === true ? <Inspector /> : null}\n      {editorMenuOpen === true ? <Editor /> : null}\n    </div>\n  );\n};\n\nAppView.whyDidYouRender = true;\n\nAppView.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  editorMenuOpen: PropTypes.bool.isRequired,\n  editorMenuHeight: PropTypes.number.isRequired,\n  setEditorMenuOpen: PropTypes.func.isRequired,\n  toolsMenuOpen: PropTypes.bool.isRequired,\n  toolsMenuWidth: PropTypes.number.isRequired,\n  inspectorMenuOpen: PropTypes.bool.isRequired,\n  inspectorMenuWidth: PropTypes.number.isRequired,\n  setInspectorMenuOpen: PropTypes.func.isRequired,\n};\n\nexport default memo(AppView);\n","import { useMemo } from 'react';\nimport * as THREE from 'three';\n\n// Finds the values needed for @react-three/fiber's props\nconst ThreeUsedProps = (props) => {\n  const propKeys = useMemo(\n    () => Object.keys(props).filter((prop) => new THREE[props.type]()[prop] !== undefined),\n    [props],\n  );\n  const filteredProps = useMemo(() => propKeys\n    .filter((key) => propKeys.includes(key))\n    .reduce((obj, key) => {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = props[key];\n      return obj;\n    }, {}), [propKeys, props]);\n  return filteredProps;\n};\n\n// Finds the values needed for @react-three/fiber's args array\nconst ThreeParamsToArgs = (props) => {\n  const filteredProps = ThreeUsedProps(props);\n\n  const params = useMemo(\n    () => (new THREE[props.type]().parameters !== undefined\n      ? new THREE[props.type]().parameters : filteredProps),\n    [props, filteredProps],\n  );\n  const args = useMemo(() => (params === undefined ? [] : Object.keys(params).map((param) => {\n    if (param === 'color') return `#${new THREE.Color(props[param]).getHexString()}`;\n    return props[param];\n  })), [props, params]);\n\n  return args;\n};\n\nexport {\n  ThreeUsedProps,\n  ThreeParamsToArgs,\n};\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { createContext } from 'react';\n\nimport { AppContext, appContextValue } from './AppManager';\nimport { ThreeObjectsContext, threeObjectsContextValue } from './ThreeObjectsManager';\nimport { PeersContext, peersContextValue } from './PeersManager';\nimport { ConnectionsContext, connectionsContextValue } from './ConnectionsManager';\nimport { GeneratorsContext, generatorsContextValue } from './GeneratorsManager';\nimport { DevicesContext, devicesContextValue } from './DevicesManager';\nimport { TransformsContext, transformsContextValue } from './TransformsManager';\n\nexport const WorldContext = createContext(null);\nexport const worldContextValue = {};\n\nconst WorldManager = ({\n  children,\n}) => (\n  <AppContext.Provider value={appContextValue}>\n    <ThreeObjectsContext.Provider value={threeObjectsContextValue}>\n      <PeersContext.Provider value={peersContextValue}>\n        <ConnectionsContext.Provider value={connectionsContextValue}>\n          <GeneratorsContext.Provider value={generatorsContextValue}>\n            <DevicesContext.Provider value={devicesContextValue}>\n              <TransformsContext.Provider value={transformsContextValue}>\n                <WorldContext.Provider value={worldContextValue}>\n                  {children}\n                </WorldContext.Provider>\n              </TransformsContext.Provider>\n            </DevicesContext.Provider>\n          </GeneratorsContext.Provider>\n        </ConnectionsContext.Provider>\n      </PeersContext.Provider>\n    </ThreeObjectsContext.Provider>\n  </AppContext.Provider>\n);\n\nexport default WorldManager;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport { useState, useEffect } from 'react';\n\nconst useUserMedia = (requestedMedia) => {\n  const [mediaStream, setMediaStream] = useState(null);\n\n  useEffect(() => {\n    async function enableStream() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(requestedMedia);\n        setMediaStream(stream);\n      } catch (err) {\n        // Removed for brevity\n      }\n    }\n\n    if (!mediaStream) {\n      enableStream();\n    } else {\n      return function cleanup() {\n        mediaStream.getTracks().forEach((track) => {\n          track.stop();\n        });\n      };\n    }\n    return mediaStream;\n  }, [mediaStream, requestedMedia]);\n\n  return mediaStream;\n};\n\nuseUserMedia.propTypes = {\n  requestedMedia: PropTypes.string.isRequired,\n};\n\nexport default useUserMedia;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useRef } from 'react';\nimport useUserMedia from '../../../contexts/useUserMedia';\n\nconst CAPTURE_OPTIONS = {\n  audio: false,\n  video: { facingMode: 'environment' },\n};\n\nconst CameraView = () => {\n  const videoRef = useRef();\n  const mediaStream = useUserMedia(CAPTURE_OPTIONS);\n\n  if (mediaStream && videoRef.current && !videoRef.current.srcObject) {\n    videoRef.current.srcObject = mediaStream;\n  }\n\n  function handleCanPlay() {\n    videoRef.current.play();\n  }\n\n  return (\n    <video width=\"100%\" height=\"100%\" ref={videoRef} onCanPlay={handleCanPlay} autoPlay playsInline muted />\n  );\n};\n\nexport default CameraView;\n","import { useCallback, useState } from 'react';\n\nexport default function useForceUpdate() {\n  const [, setState] = useState({});\n  return useCallback(() => setState({}), []);\n}\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\n\nexport const GeneratorContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst GeneratorManager = ({\n  children,\n  ...props\n}) => {\n  const identifier = useRef(Symbol('Generator'));\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [type, setType] = useState(props.type || '');\n  const [resolution, setResolution] = useState(props.resolution || 1);\n  const [rpm, setRpm] = useState(props.rpm || 1000);\n  const [loop, setLoop] = useState(props.loop || true);\n  const [paused, setPaused] = useState(props.paused || false);\n\n  const [position, setPosition] = useState([0, 0, 0]);\n\n  useEffect(() => { events.publish(`${uuid}-position-updated`, position); }, [uuid, position, events]);\n\n  const { registerGenerator, unregisterGenerator } = useGeneratorsContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const generatorRef = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n\n    name,\n\n    type,\n    setType,\n    resolution,\n    setResolution,\n    rpm,\n    setRpm,\n    loop,\n    setLoop,\n    paused,\n    setPaused,\n    position,\n    setPosition,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name,\n\n    type, setType,\n    resolution, setResolution,\n    rpm, setRpm,\n    loop, setLoop,\n    paused, setPaused,\n    position, setPosition,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => generatorRef, [generatorRef]);\n\n  // // On load, register object with app context\n  useEffect(() => {\n    registerGenerator(uuid, generatorRef);\n    return () => unregisterGenerator(uuid, generatorRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    resolution,\n    setResolution,\n    rpm,\n    setRpm,\n    loop,\n    setLoop,\n    paused,\n    setPaused,\n    position,\n    setPosition,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n\n    type, setType,\n    resolution, setResolution,\n    rpm, setRpm,\n    loop, setLoop,\n    paused, setPaused,\n    position, setPosition,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <GeneratorContext.Provider value={contextValue}>\n      {children}\n    </GeneratorContext.Provider>\n  );\n};\n\nGeneratorManager.whyDidYouRender = false;\n\nGeneratorManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  uuid: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  resolution: PropTypes.number.isRequired,\n  rpm: PropTypes.number.isRequired,\n  loop: PropTypes.bool.isRequired,\n  paused: PropTypes.bool.isRequired,\n};\n\nexport default GeneratorManager;\n","import { useContext } from 'react';\nimport { GeneratorContext } from '../managers/GeneratorManager';\n\nexport default function useGeneratorContext() {\n  return useContext(GeneratorContext);\n}\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable react/jsx-filename-extension */\n\nimport {\n  useState, useMemo, useCallback, useEffect,\n} from 'react';\n\nimport { useSpring } from '@react-spring/core';\nimport useGeneratorContext from '../../../contexts/useGeneratorContext';\n\nimport DrawCircle from '../../../shapes/drawCircle';\n\nconst OrbitGenerator = ({ toProp }) => {\n  const {\n    type, resolution, rpm, loop, paused, setPosition: setGenPosition,\n  } = useGeneratorContext();\n\n  const [animMili] = useState(((60 * 1000) / rpm) / (360 / resolution));\n\n  const points = useMemo(() => {\n    switch (type) {\n      default:\n      case 'sine':\n        return DrawCircle(resolution);\n    }\n  }, [type, resolution]);\n\n  const toPoints = useMemo(() => [\n    ...points.map((pos) => ({ [toProp]: [pos[0], pos[1], 0] })),\n  ], [points, toProp]);\n\n  const handleChange = useCallback((result) => {\n    if (result.value !== undefined) {\n      setGenPosition(result.value[toProp]);\n    }\n  }, [toProp, setGenPosition]);\n\n  const config = useMemo(() => ({\n    pause: paused,\n    loop,\n    to: toPoints,\n    config: {\n      duration: animMili,\n      friction: 5,\n    },\n    onChange: handleChange,\n  }), [toPoints, animMili, paused, loop, handleChange]);\n\n  const [, api] = useSpring(() => (config));\n  useEffect(() => {\n    api.stop();\n    api.start(config);\n  }, [api, config]);\n\n  return null;\n};\n\nOrbitGenerator.whyDidYouRender = false;\n\nexport default OrbitGenerator;\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport {\n  useState, useMemo, useCallback, useEffect,\n} from 'react';\n\nimport { useSpring } from '@react-spring/core';\nimport useGeneratorContext from '../../../contexts/useGeneratorContext';\n\nimport DrawSine from '../../../shapes/drawSine';\n\nconst SinewaveGenerator = ({ toProp }) => {\n  const {\n    type, resolution, rpm, loop, paused, setPosition: setGenPosition,\n  } = useGeneratorContext();\n  const [animMili] = useState(((60 * 1000) / rpm) / (360 / resolution));\n\n  const points = useMemo(() => {\n    switch (type) {\n      default:\n      case 'sine':\n        return DrawSine(resolution);\n    }\n  }, [type, resolution]);\n\n  const toPoints = useMemo(() => [\n    ...points.map((pos) => ({ [toProp]: [pos[0], pos[1], 0] })),\n  ], [points, toProp]);\n\n  const handleChange = useCallback((result) => {\n    if (result.value !== undefined) {\n      setGenPosition(result.value[toProp]);\n    }\n  }, [toProp, setGenPosition]);\n\n  const config = useMemo(() => ({\n    pause: paused,\n    loop,\n    to: toPoints,\n    config: {\n      duration: animMili,\n      friction: 5,\n    },\n    onChange: handleChange,\n  }), [toPoints, animMili, paused, loop, handleChange]);\n\n  const [, api] = useSpring(() => (config));\n  useEffect(() => {\n    api.stop();\n    api.start(config);\n  }, [api, config]);\n\n  return null;\n};\n\nSinewaveGenerator.whyDidYouRender = false;\n\nSinewaveGenerator.propTypes = {\n  toProp: PropTypes.string.isRequired,\n};\n\nexport default SinewaveGenerator;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport OrbitGenerator from './Orbit/index';\nimport SinewaveGenerator from './Sinewave/index';\nimport GeneratorManager, { DefaultProps } from '../../managers/GeneratorManager';\n\nconst GeneratorsView = ({ ...props }) => {\n  switch (props.type.toLowerCase()) {\n    default:\n    case 'orbit':\n      return (\n        <GeneratorManager {...DefaultProps} type={props.type} {...props}>\n          <OrbitGenerator />\n        </GeneratorManager>\n      );\n    case 'sinewave':\n      return (\n        <GeneratorManager {...DefaultProps} type={props.type} {...props}>\n          <SinewaveGenerator toProp=\"value\" />\n        </GeneratorManager>\n      );\n  }\n};\n\nGeneratorsView.whyDidYouRender = true;\n\nexport default memo(GeneratorsView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport GeneratorsView from './view';\n\nconst Generators = ({ generators }) => generators.map((gen) => (<GeneratorsView key={`rt_${gen.type}_generator_${gen.uuid}`} {...gen} />));\n\nGenerators.whyDidYouRender = false;\n\nexport default memo(Generators);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable react/destructuring-assignment */\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useConnectionsContext from '../contexts/useConnectionsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useAppContext from '../contexts/useAppContext';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport useDevicesContext from '../contexts/useDevicesContext';\nimport useTransformsContext from '../contexts/useTransformsContext';\nimport useThreeObjectsContext from '../contexts/useThreeObjectsContext';\n\nexport const PeerContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst PeerManager = ({\n  children,\n  ...props\n}) => {\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { registerPeer, unregisterPeer } = usePeersContext();\n  const { getMe, findConnection } = useConnectionsContext();\n  const forceUpdate = useForceUpdate();\n\n  const { findThreeObject } = useThreeObjectsContext();\n  const { findGenerator } = useGeneratorsContext();\n  const { findDevice } = useDevicesContext();\n  const { findTransform } = useTransformsContext();\n\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [type, setType] = useState(props.type);\n\n  const [data, setData] = useState(props.data || [0, 0, 0]);\n\n  const [connection, setConnection] = useState();\n\n  useEffect(() => {\n    setConnection(findConnection(uuid));\n  }, [findConnection, uuid]);\n\n  // Inputs\n  const updateFromInput = useCallback((prop, from, val) => {\n    const me = getMe();\n    // findConnection();\n    switch (prop) {\n      default:\n        break;\n      case 'data':\n        if (connection !== undefined) {\n          if (typeof connection.sendData === 'function') {\n            connection.sendData({\n              type: from, payload: val, uuid: me.uuid, from: me.connectionId, timestamp: Date.now,\n            });\n            setData(val);\n          }\n        }\n        break;\n    }\n  }, [connection, getMe]);\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const obj = findThreeObject(c.from);\n      if (obj) { obj.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n\n      const transform = findTransform(c.from);\n      if (transform) { transform.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), c.fromProp.toLowerCase(), val); }); }\n    });\n  }, [\n    connections,\n    uuid,\n    findGenerator,\n    findDevice,\n    findTransform,\n    findThreeObject,\n    updateFromInput,\n  ]);\n\n  useEffect(() => { events.publish(`${uuid}-data-updated`, data); }, [uuid, data, events]);\n\n  // Reference to object properties\n  const peerRef = useMemo(() => ({\n    uuid,\n    name,\n\n    data,\n    setData,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name,\n\n    data, setData,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => peerRef, [peerRef]);\n\n  // On load, register object with app context\n  useEffect(() => {\n    registerPeer(uuid, peerRef);\n    return () => unregisterPeer(uuid, peerRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    name,\n\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    data,\n    setData,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    name,\n\n    node,\n    getRef,\n\n    type, setType,\n    data, setData,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <PeerContext.Provider value={contextValue}>\n      {children}\n    </PeerContext.Provider>\n  );\n};\n\nPeerManager.whyDidYouRender = false;\n\nexport default PeerManager;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport PeerManager, { DefaultProps } from '../../managers/PeerManager';\n\nconst PeerView = ({ ...props }) => (\n  <PeerManager {...DefaultProps} type={props.type} {...props} />\n);\n\nPeerView.whyDidYouRender = true;\n\nexport default memo(PeerView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport PeerView from './view';\n\nconst Peers = ({ peers }) => peers.map((peer) => (<PeerView key={`rt_${peer.type}_peer_${peer.uuid}`} {...peer} />));\n\nPeers.whyDidYouRender = false;\n\nexport default memo(Peers);\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\n\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useDevicesContext from '../contexts/useDevicesContext';\nimport useAppContext from '../contexts/useAppContext';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useTransformsContext from '../contexts/useTransformsContext';\nimport useThreeObjectsContext from '../contexts/useThreeObjectsContext';\n\nexport const DeviceContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst DeviceManager = ({\n  children,\n  ...props\n}) => {\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { findThreeObject } = useThreeObjectsContext();\n  const { findGenerator } = useGeneratorsContext();\n  const { findPeer } = usePeersContext();\n  const { findTransform } = useTransformsContext();\n\n  const identifier = useRef(Symbol('Device'));\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [displayName] = useState(props.displayName);\n  const [type, setType] = useState(props.type || '');\n\n  const [position, setPosition] = useState(props.position || [0, 0, 0]);\n\n  // Inputs\n  const updateFromInput = (prop, val) => {\n    switch (prop) {\n      default:\n        break;\n      case 'position':\n        setPosition(val);\n        break;\n    }\n  };\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const peer = findPeer(c.from);\n      if (peer) { peer.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const obj = findThreeObject(c.from);\n      if (obj) { obj.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const transform = findTransform(c.from);\n      if (transform) { transform.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findPeer, findTransform, findThreeObject]);\n\n  // Outputs\n  useEffect(() => { events.publish(`${uuid}-position-updated`, position); }, [uuid, position, events]);\n\n  const { registerDevice, unregisterDevice } = useDevicesContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const deviceRef = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n\n    name,\n    displayName,\n\n    type,\n    setType,\n\n    position,\n    setPosition,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name, displayName,\n\n    type, setType,\n\n    position, setPosition,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => deviceRef, [deviceRef]);\n\n  // On load, register object with app context\n\n  useEffect(() => {\n    registerDevice(uuid, deviceRef);\n    return () => unregisterDevice(uuid, deviceRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    position,\n    setPosition,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n\n    type, setType,\n    position, setPosition,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <DeviceContext.Provider value={contextValue}>\n      {children}\n    </DeviceContext.Provider>\n  );\n};\n\nDeviceManager.whyDidYouRender = false;\n\nDeviceManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  uuid: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  position: PropTypes.shape([]).isRequired,\n};\n\nexport default DeviceManager;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport { useCallback, useEffect } from 'react';\n\nimport useDeviceContext from '../../../contexts/useDeviceContext';\n\nconst MouseDevice = () => {\n  const { setPosition } = useDeviceContext();\n\n  const updateMousePosition = useCallback((ev) => {\n    setPosition([ev.clientX, ev.clientY, 0]);\n  }, [setPosition]);\n\n  useEffect(() => {\n    window.addEventListener('mousemove', updateMousePosition);\n\n    return () => window.removeEventListener('mousemove', updateMousePosition);\n  }, [updateMousePosition]);\n\n  return null;\n};\n\nMouseDevice.whyDidYouRender = false;\n\nexport default MouseDevice;\n","import { useContext } from 'react';\nimport { DeviceContext } from '../managers/DeviceManager';\n\nexport default function useDeviceContext() {\n  return useContext(DeviceContext);\n}\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport {\n  useState, useMemo, useCallback, useEffect,\n} from 'react';\n\nimport { useSpring } from '@react-spring/core';\nimport useGeneratorContext from '../../../contexts/useGeneratorContext';\n\nimport DrawSine from '../../../shapes/drawSine';\n\nconst KeyboardDevice = ({ toProp }) => {\n  const {\n    type, resolution, rpm, loop, paused, setPosition: setGenPosition,\n  } = useGeneratorContext();\n  const [animMili] = useState(((60 * 1000) / rpm) / (360 / resolution));\n\n  const points = useMemo(() => {\n    switch (type) {\n      default:\n      case 'sine':\n        return DrawSine(resolution);\n    }\n  }, [type, resolution]);\n\n  const toPoints = useMemo(() => [\n    ...points.map((pos) => ({ [toProp]: [pos[0], pos[1], 0] })),\n  ], [points, toProp]);\n\n  const handleChange = useCallback((result) => {\n    if (result.value !== undefined) {\n      setGenPosition(result.value[toProp]);\n    }\n  }, [toProp, setGenPosition]);\n\n  const config = useMemo(() => ({\n    pause: paused,\n    loop,\n    to: toPoints,\n    config: {\n      duration: animMili,\n      friction: 5,\n    },\n    onChange: handleChange,\n  }), [toPoints, animMili, paused, loop, handleChange]);\n\n  const [, api] = useSpring(() => (config));\n  useEffect(() => {\n    api.stop();\n    api.start(config);\n  }, [api, config]);\n\n  return null;\n};\n\nKeyboardDevice.whyDidYouRender = false;\n\nKeyboardDevice.propTypes = {\n  toProp: PropTypes.string.isRequired,\n};\n\nexport default KeyboardDevice;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport MouseDevice from './Mouse/index';\nimport KeyboardDevice from './Keyboard/index';\nimport DeviceManager, { DefaultProps } from '../../managers/DeviceManager';\n\nconst DevicesView = ({ ...props }) => {\n  switch (props.type.toLowerCase()) {\n    default:\n    case 'mouse':\n      return (\n        <DeviceManager {...DefaultProps} type={props.type} {...props}>\n          <MouseDevice />\n        </DeviceManager>\n      );\n    case 'keyboard':\n      return (\n        <DeviceManager {...DefaultProps} type={props.type} {...props}>\n          <KeyboardDevice />\n        </DeviceManager>\n      );\n  }\n};\n\nDevicesView.whyDidYouRender = true;\n\nexport default memo(DevicesView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport DevicesView from './view';\n\nconst Devices = ({ devices }) => devices.map((dev) => (<DevicesView key={`rt_${dev.type}_device_${dev.uuid}`} {...dev} />));\n\nDevices.whyDidYouRender = false;\n\nexport default memo(Devices);\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useAppContext from '../contexts/useAppContext';\nimport useTransformsContext from '../contexts/useTransformsContext';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useDevicesConext from '../contexts/useDevicesContext';\n\nexport const TransformContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst TransformManager = ({\n  children,\n  ...props\n}) => {\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { findGenerator } = useGeneratorsContext();\n  const { findPeer } = usePeersContext();\n  const { findDevice } = useDevicesConext();\n\n  const identifier = useRef(Symbol('Transform'));\n  const node = useRef(null);\n\n  const [events] = useState(() => EventsManager());\n\n  const [uuid] = useState(props.uuid);\n  const [name] = useState(props.name);\n  const [displayName] = useState(props.displayName);\n  const [type, setType] = useState(props.type || '');\n\n  const [amount, setAmount] = useState(props.amount || 1);\n  const [value, setValue] = useState(props.value || [0, 0, 0]);\n\n  // Inputs\n  const updateFromInput = (prop, val) => {\n    setValue(val);\n  };\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const peer = findPeer(c.from);\n      if (peer) { peer.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findPeer, findDevice]);\n\n  useEffect(() => { events.publish(`${uuid}-value-updated`, value); }, [value, events, uuid]);\n\n  const { registerTransform, unregisterTransform } = useTransformsContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const peerRef = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n\n    name,\n    displayName,\n\n    type,\n    setType,\n\n    value,\n    setValue,\n    amount,\n    setAmount,\n\n    subscribe: events.subscribe,\n    unsubscribe: events.unsubscribe,\n  }), [\n    uuid,\n    name, displayName,\n\n    type, setType,\n\n    value, setValue,\n    amount, setAmount,\n\n    events,\n  ]);\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => peerRef, [peerRef]);\n\n  // On load, register object with app context\n  useEffect(() => {\n    // const id = identifier.current;\n    registerTransform(uuid, peerRef);\n    return () => unregisterTransform(uuid, peerRef);\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    type,\n    setType,\n    value,\n    setValue,\n    amount,\n    setAmount,\n\n    forceUpdate,\n\n    ...events,\n  }),\n  [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n\n    type, setType,\n    value, setValue,\n    amount, setAmount,\n\n    forceUpdate,\n    events,\n  ]);\n\n  return (\n    <TransformContext.Provider value={contextValue}>\n      {children}\n    </TransformContext.Provider>\n  );\n};\n\nTransformManager.whyDidYouRender = false;\n\nTransformManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default TransformManager;\n","import { useEffect } from 'react';\n\nimport useAppContext from '../../../contexts/useAppContext';\nimport useDevicesContext from '../../../contexts/useDevicesContext';\nimport useGeneratorsContext from '../../../contexts/useGeneratorsContext';\nimport useTransformContext from '../../../contexts/useTransformContext';\n\nconst MultiplyTransform = ({ ...props }) => {\n  const { uuid, setValue: setTransValue } = useTransformContext();\n  const { sceneJSON } = useAppContext();\n\n  const { connections } = sceneJSON;\n\n  const { findGenerator } = useGeneratorsContext();\n  const { findDevice } = useDevicesContext();\n\n  // Inputs\n  useEffect(() => {\n    const updateFromInput = (prop, val) => {\n      switch (prop) {\n        default:\n          break;\n        case 'value':\n          setTransValue(val.map((v) => (v * props.amount)));\n          break;\n      }\n    };\n\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findDevice, props, setTransValue]);\n\n  return null;\n};\n\nMultiplyTransform.whyDidYouRender = false;\n\nexport default MultiplyTransform;\n","import { useContext } from 'react';\nimport { TransformContext } from '../managers/TransformManager';\n\nexport default function useTransformContext() {\n  return useContext(TransformContext);\n}\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport TransformManager, { DefaultProps } from '../../managers/TransformManager';\n\nimport MultiplyTransform from './Multiply/index';\n\nconst TransformsView = ({ ...props }) => {\n  switch (props.type) {\n    default:\n    case 'Orbit':\n      return (\n        <TransformManager {...DefaultProps} type={props.type} {...props}>\n          <MultiplyTransform {...props} />\n        </TransformManager>\n      );\n  }\n};\n\nTransformsView.whyDidYouRender = true;\n\nexport default memo(TransformsView);\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport TransformsView from './view';\n\nconst Transforms = ({ transforms }) => transforms.map((transform) => (<TransformsView key={`rt_${transform.type}_transform_${transform.uuid}`} {...transform} />));\n\nTransforms.whyDidYouRender = false;\n\nexport default memo(Transforms);\n","/* eslint-disable object-shorthand */\n/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, { createElement, memo } from 'react';\n\nimport { Canvas } from '@react-three/fiber';\nimport { makeStyles } from '@material-ui/core';\nimport { OrbitControls } from '@react-three/drei';\n\nimport { ThreeParamsToArgs } from '../utils/threeParams';\n\nimport useAppContext from '../contexts/useAppContext';\n\nimport WorldManager from '../managers/WorldManager';\nimport CameraView from '../components/@views/CameraView';\n\nimport Generators from '../inputs/generators/index';\nimport Peers from '../inputs/peers/index';\nimport Devices from '../inputs/devices/index';\nimport Transforms from '../inputs/transforms/index';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    position: 'relative',\n    userSelect: 'none',\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nconst World = ({\n  children,\n}) => {\n  const { sceneJSON } = useAppContext();\n  const {\n    object, camera, generators, peers, devices, transforms,\n  } = sceneJSON;\n\n  const { fog } = object;\n  const classes = useStyles();\n\n  switch (object.type) {\n    case 'Camera':\n      return (\n        <div className={classes.root}>\n          <WorldManager>\n            <CameraView />\n          </WorldManager>\n        </div>\n      );\n    default:\n    case 'Scene':\n      return (\n        <div className={classes.root}>\n          <Canvas\n            shadows\n            camera={camera}\n            dpr={window.devicePixelRatio}\n          >\n            <WorldManager>\n              <Generators {...{ generators: generators }} />\n              <Peers {...{ peers: peers }} />\n              <Devices {...{ devices: devices }} />\n              <Transforms {...{ transforms: transforms }} />\n              {/* FOG */}\n              {fog !== undefined ? createElement(fog.type, { type: fog.type, attach: 'fog', args: ThreeParamsToArgs(fog) }, []) : null}\n              {children}\n              <OrbitControls enablePan enableZoom enableRotate />\n            </WorldManager>\n          </Canvas>\n        </div>\n      );\n  }\n};\n\nWorld.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default memo(World);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nconst RenderThreeChildrenView = ({\n  name,\n  node,\n  position,\n  rotation,\n  scale,\n  children,\n}) => (\n  <group name={name} ref={node} position={position} rotation={rotation} scale={scale}>\n    {children}\n  </group>\n);\n\nexport default memo(RenderThreeChildrenView);\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n} from 'react';\nimport useForceUpdate from '../useForceUpdate';\nimport EventsManager from './EventsManager';\n\nimport useThreeObjectsContext from '../contexts/useThreeObjectsContext';\nimport useAppContext from '../contexts/useAppContext';\n\nimport RenderThreeChildrenView from '../components/@objects/RenderThreeChildren/view';\nimport useGeneratorsContext from '../contexts/useGeneratorsContext';\nimport usePeersContext from '../contexts/usePeersContext';\nimport useDevicesConext from '../contexts/useDevicesContext';\nimport useTransformsConext from '../contexts/useTransformsContext';\n\nexport const ThreeObjectContext = createContext(null);\nexport const ThreeObjectPositionContext = createContext(null);\nexport const ThreeObjectRotationContext = createContext(null);\nexport const ThreeObjectScaleContext = createContext(null);\n\nexport const DefaultProps = {\n  name: 'unnamed',\n  position: [0, 0, 0],\n};\n\nconst ThreeObjectManager = ({\n  name,\n  displayName,\n  type,\n  children,\n  ...props\n}) => {\n  const isMounted = useRef(false);\n\n  const { sceneJSON } = useAppContext();\n  const { connections } = sceneJSON;\n\n  const { findGenerator } = useGeneratorsContext();\n  const { findPeer } = usePeersContext();\n  const { findDevice } = useDevicesConext();\n  const { findTransform } = useTransformsConext();\n\n  const identifier = useRef(Symbol('ThreeObject'));\n  const node = useRef(null);\n\n  const [uuid] = useState(props.uuid);\n  const [events] = useState(() => EventsManager());\n\n  const [disabled, setDisabled] = useState(props.disabled || false);\n  const [debug, setDebug] = useState(props.debug || false);\n\n  const [position, setPosition] = useState(props.position || [0, 0, 0]);\n  const [rotation, setRotation] = useState(props.rotation || [0, 0, 0]);\n  const [scale, setScale] = useState(props.scale || 1);\n\n  // Inputs\n  const updateFromInput = (prop, val) => {\n    switch (prop) {\n      default:\n        break;\n      case 'position':\n        setPosition(val);\n        break;\n      case 'rotation':\n        setRotation(val);\n        break;\n      case 'scale':\n        setScale(val);\n        break;\n    }\n  };\n\n  useEffect(() => {\n    connections.filter((c) => (c.to === uuid)).forEach((c) => {\n      const peer = findPeer(c.from);\n      if (peer) { peer.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const gen = findGenerator(c.from);\n      if (gen) { gen.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const device = findDevice(c.from);\n      if (device) { device.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n\n      const transform = findTransform(c.from);\n      if (transform) { transform.subscribe(`${c.from}-${c.fromProp.toLowerCase()}-updated`, (val) => { updateFromInput(c.toProp.toLowerCase(), val); }); }\n    });\n  }, [connections, uuid, findGenerator, findPeer, findDevice, findTransform]);\n\n  // Outputs\n\n  // Limit publish events to once every...\n  // const broadcastThrottle = 1000/60;\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-disabled-updated`, disabled);\n      }\n    }\n  }, [disabled, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-debug-updated`, debug);\n      }\n    }\n  }, [debug, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-position-updated`, position);\n      }\n    }\n  }, [position, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-rotation-updated`, rotation);\n      }\n    }\n  }, [rotation, events, uuid]);\n\n  useEffect(() => {\n    if (isMounted.current) {\n      if (events !== undefined) {\n        events.publish(`${uuid}-scale-updated`, scale);\n      }\n    }\n  }, [scale, events, uuid]);\n\n  const { registerThreeObject, unregisterThreeObject } = useThreeObjectsContext();\n  const forceUpdate = useForceUpdate();\n\n  // Reference to object properties\n  const threeObjectRef = useMemo(\n    () => ({\n      uuid,\n      id: identifier.current,\n\n      name,\n      displayName,\n      type,\n\n      disabled,\n      setDisabled,\n      debug,\n      setDebug,\n\n      position,\n      setPosition,\n      rotation,\n      setRotation,\n      scale,\n      setScale,\n\n      subscribe: events.subscribe,\n      unsubscribe: events.unsubscribe,\n    }),\n    [\n      uuid,\n      name, displayName, type,\n\n      disabled, setDisabled,\n      debug, setDebug,\n\n      position, setPosition,\n      rotation, setRotation,\n      scale, setScale,\n\n      events,\n    ],\n  );\n\n  // Callback to fetch properties of object\n  const getRef = useCallback(() => threeObjectRef, [threeObjectRef]);\n\n  // On load, register object with app context\n  useEffect(() => {\n    isMounted.current = true;\n    registerThreeObject(uuid, threeObjectRef);\n    return () => {\n      isMounted.current = false;\n      unregisterThreeObject(uuid, threeObjectRef);\n    };\n  }, []); /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  // Final context for provider\n  const contextValue = useMemo(() => ({\n    uuid,\n    id: identifier.current,\n    name,\n    nodeRef: node,\n    getRef,\n\n    disabled,\n    setDisabled,\n    debug,\n    setDebug,\n\n    setPosition,\n    setRotation,\n    setScale,\n\n    forceUpdate,\n\n    ...events,\n  }), [\n    uuid,\n    identifier,\n    name,\n    node,\n    getRef,\n    disabled, setDisabled,\n    debug, setDebug,\n    setPosition,\n    setRotation,\n    setScale,\n    forceUpdate,\n    events,\n  ]);\n\n  const positionContextValue = useMemo(() => ({ position }), [position]);\n  const rotationContextValue = useMemo(() => ({ rotation }), [rotation]);\n  const scaleContextValue = useMemo(() => ({ scale }), [scale]);\n\n  return (\n    <ThreeObjectContext.Provider value={contextValue}>\n      <ThreeObjectPositionContext.Provider value={positionContextValue}>\n        <ThreeObjectRotationContext.Provider value={rotationContextValue}>\n          <ThreeObjectScaleContext.Provider value={scaleContextValue}>\n            <RenderThreeChildrenView {...{\n              name,\n              node,\n              position,\n              rotation,\n              scale,\n            }}\n            >\n              {!disabled ? children : []}\n            </RenderThreeChildrenView>\n          </ThreeObjectScaleContext.Provider>\n        </ThreeObjectRotationContext.Provider>\n      </ThreeObjectPositionContext.Provider>\n    </ThreeObjectContext.Provider>\n  );\n};\n\nThreeObjectManager.whyDidYouRender = false;\n\nexport default ThreeObjectManager;\n","/* eslint-disable import/no-cycle */\n\nimport { useContext } from 'react';\n\nimport { SceneManagerContext } from '../managers/SceneManager';\n\nexport default function useSceneManager() {\n  return useContext(SceneManagerContext);\n}\n","export default function waitForMs(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n","/* eslint-disable import/no-cycle */\n/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback, useContext, useRef, createContext,\n} from 'react';\n\nimport useAppContext from './contexts/useAppContext';\nimport useAppEvent from './contexts/useAppEvent';\nimport useThreeObjectContext from './contexts/useThreeObjectContext';\nimport useSceneManager from './contexts/useSceneManagerContext';\nimport waitForMs from './utils/waitForMs';\n\nexport const StoreContext = createContext(null);\n\nexport default function useThreeObjectStore(\n  key,\n  write,\n  read,\n) {\n  const { name, forceUpdate } = useThreeObjectContext();\n  const { getState, setState } = useContext(StoreContext);\n\n  const writeCallback = useRef(null);\n  writeCallback.current = write;\n\n  const readCallback = useRef(null);\n  readCallback.current = read;\n\n  useAppEvent(\n    'scene-init',\n    () => {\n      if (!readCallback.current) {\n        return;\n      }\n      if (!name) {\n        // eslint-disable-next-line no-console\n        console.error('Attempting to use ThreeObject store without a name.');\n        return;\n      }\n\n      const stored = getState(`${name}.${key}`);\n      if (stored != null) {\n        readCallback.current(stored);\n        waitForMs(0).then(forceUpdate);\n      }\n    },\n    [key, name],\n  );\n\n  const save = useCallback(async () => {\n    if (!name) return;\n    setState(`${name}.${key}`, writeCallback.current());\n  }, [key, name, setState]);\n\n  useAppEvent('scene-exit', save, [save]);\n  useAppEvent('save-game', save, [save]);\n\n  return getState(`${name}.${key}`);\n}\n\nexport function useThreeObjectStoreValue(key) {\n  const { name } = useThreeObjectContext();\n  const { getState } = useContext(StoreContext);\n\n  if (!name) {\n    // eslint-disable-next-line no-console\n    console.error('Attempting to use ThreeObject store without a name.');\n    return undefined;\n  }\n\n  const stored = getState(`${name}.${key}`);\n  return stored;\n}\n\nexport const GameStoreProvider = ({ children }) => {\n  const { getGameState, setGameState } = useAppContext();\n\n  const contextValue = {\n    getState: getGameState,\n    setState: setGameState,\n  };\n\n  return <StoreContext.Provider value={contextValue}>{children}</StoreContext.Provider>;\n};\n\nGameStoreProvider.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport const SceneStoreProvider = ({ children }) => {\n  const { getSceneState, setSceneState } = useSceneManager();\n\n  const contextValue = {\n    getState: getSceneState,\n    setState: setSceneState,\n  };\n\n  return <StoreContext.Provider value={contextValue}>{children}</StoreContext.Provider>;\n};\n\nSceneStoreProvider.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n};\n","/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable import/no-cycle */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useMemo, useRef, useState, createContext,\n} from 'react';\nimport useAppContext from '../contexts/useAppContext';\n\nimport { SceneStoreProvider } from '../useThreeObjectStore';\n\nimport waitForMs from '../utils/waitForMs';\n\nexport const SceneManagerContext = createContext(null);\n\nexport const sceneContextValue = {};\n\nconst SceneManager = ({ defaultScene, children }) => {\n  const { publish } = useAppContext();\n  // support scene string format: 'sceneId:level'\n  const [initialScene, initialLevel = 0] = defaultScene.split(':');\n  const [currentScene, setScene] = useState(initialScene);\n  const prevLevel = useRef(-1);\n  const currentLevel = useRef(Number(initialLevel));\n  const sceneStore = useRef(new Map());\n  const api = useMemo(\n    () => ({\n      currentScene,\n      prevLevel: prevLevel.current,\n      currentLevel: currentLevel.current,\n      async setScene(nextScene) {\n        // eslint-disable-next-line prefer-const\n        let [targetScene, targetLevel = 0] = nextScene.split(':');\n        targetLevel = Number(targetLevel);\n\n        if (currentScene !== targetScene) {\n          // switch scene\n          if (currentScene !== '') {\n            await publish('scene-pre-exit', currentScene);\n            await publish('scene-exit', currentScene);\n            // always go to empty scene first and then to the target scene\n            // (this should help clearing cached react components)\n            setScene('');\n            await waitForMs(100);\n          }\n          prevLevel.current = -1;\n          currentLevel.current = targetLevel;\n          setScene(targetScene);\n        } else if (currentLevel.current !== targetLevel) {\n          // switch level\n          api.setLevel(targetLevel);\n        }\n      },\n      async setLevel(level) {\n        if (level !== currentLevel.current) {\n          prevLevel.current = currentLevel.current;\n          currentLevel.current = level;\n          await api.resetScene();\n        }\n      },\n      async resetScene() {\n        const prevScene = currentScene;\n        const formerCurrentLevel = currentLevel.current;\n        const formerPrevLevel = prevLevel.current;\n        // switch to empty scene\n        await api.setScene('');\n        await waitForMs(100);\n        // restore prev scene + level\n        prevLevel.current = formerPrevLevel;\n        currentLevel.current = formerCurrentLevel;\n        setScene(prevScene);\n      },\n      setSceneState(key, value) {\n        sceneStore.current.set(`${currentScene}.${key}`, value);\n      },\n      getSceneState(key) {\n        return sceneStore.current.get(`${currentScene}.${key}`);\n      },\n    }),\n    [currentScene, currentLevel, publish],\n  );\n\n  return (\n    <SceneManagerContext.Provider value={api}>\n      <SceneStoreProvider>\n        {children}\n      </SceneStoreProvider>\n    </SceneManagerContext.Provider>\n  );\n};\n\nSceneManager.propTypes = {\n  children: PropTypes.shape([]).isRequired,\n  defaultScene: PropTypes.string.isRequired,\n};\n\nexport default SceneManager;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport PropTypes from 'prop-types';\n\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n  createContext,\n} from 'react';\nimport { createPortal } from '@react-three/fiber';\nimport useSceneManager from './contexts/useSceneManagerContext';\n\nconst SceneContext = createContext(null);\n\nexport function useScene() {\n  return useContext(SceneContext);\n}\n\nexport const LevelContext = createContext(null);\n\nexport function useLevel() {\n  return useContext(LevelContext);\n}\n\nconst Scene = ({ id, sceneJSON, children }) => {\n  const {\n    currentScene,\n    currentLevel,\n    prevLevel,\n    resetScene,\n    setLevel,\n  } = useSceneManager();\n  const { object } = sceneJSON;\n  const [instances, setInstances] = useState([]);\n  // const idleCallback = useRef();\n\n  const initEvents = useCallback(async () => {\n\n    // await publish('scene-init', id);\n    // // ensure everything is ready on next idle callback\n    // idleCallback.current = window.requestIdleCallback(\n    //     () => {\n    //         // console.log('scene-ready', id);\n    //         publish('scene-ready', id);\n    //     },\n    //     { timeout: sceneReadyTimeout }\n    // );\n  }, [/* publish, id */]);\n\n  const contextValue = useMemo(\n    () => ({\n      instantiate(newElement, portalNode) {\n        const key = newElement.key == null ? Math.random() : newElement.key;\n        const instance = portalNode\n          ? createPortal(newElement, portalNode, null, key)\n          : React.cloneElement(newElement, { key });\n        setInstances((current) => [...current, instance]);\n        return () => {\n          setInstances((current) => current.filter((elem) => elem !== instance));\n        };\n      },\n      // pass through from scene manager\n      currentScene,\n      currentLevel,\n      prevLevel,\n      resetScene,\n      setLevel,\n      ...object,\n    }),\n    [currentScene, currentLevel, prevLevel, resetScene, setLevel, object],\n  );\n\n  const levelContextValue = useMemo(\n    () => ({\n      level: currentLevel,\n      transition: prevLevel < currentLevel ? -1 : 1,\n      enterPrevLevel() {\n        setLevel(currentLevel - 1);\n      },\n      enterNextLevel() {\n        setLevel(currentLevel + 1);\n      },\n    }),\n    [currentLevel, prevLevel, setLevel],\n  );\n\n  useEffect(() => {\n    // const cur = idleCallback.current;\n    if (currentScene === id) {\n      // entering scene\n      initEvents();\n    } else {\n      // leaving scene\n      setInstances([]);\n    }\n    // return () => window.cancelIdleCallback(cur);\n  }, [currentScene, id, initEvents]);\n\n  // skip rendering scene content\n  if (!currentScene.startsWith(id)) return null;\n\n  return (\n    <SceneContext.Provider value={contextValue}>\n      <LevelContext.Provider value={levelContextValue}>\n        <group>\n          {/* just to ensure node.parent in a GO still remains within the scene */}\n          <group>\n            <>{children}</>\n            <>{instances}</>\n          </group>\n        </group>\n      </LevelContext.Provider>\n    </SceneContext.Provider>\n  );\n};\n\nScene.propTypes = {\n  id: PropTypes.string.isRequired,\n  sceneJSON: PropTypes.shape({\n    object: PropTypes.shape({}),\n  }).isRequired,\n  children: PropTypes.shape([]).isRequired,\n};\n\nexport default Scene;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-filename-extension */\n\nimport React, { useRef, createElement, useMemo } from 'react';\n\nimport { useFrame } from '@react-three/fiber';\n\nimport * as THREE from 'three';\n\nimport ThreeObjectManager, { DefaultProps } from '../../../managers/ThreeObjectManager';\n\n// Recursive function to convert THREE.js Object Scene to @react-three/fiber objects\n// https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4\nconst RenderThreeChildren = ({\n  props,\n  geometries,\n  materials,\n  devices,\n  generators,\n  connections,\n}) => {\n  const childRef = useRef();\n\n  const objProps = useMemo(() => {\n    const threeObj = new THREE[props.type]();\n    const propKeys = Object.keys(props).filter((prop) => threeObj[prop] !== undefined);\n    const filteredProps = propKeys\n      .filter((key) => propKeys.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = props[key];\n        return obj;\n      }, {});\n    const {\n      layers,\n      geometry, material,\n      children,\n      shadow,\n      ...usedProps\n    } = filteredProps;\n\n    const params = threeObj.parameters;\n    const args = params === undefined ? [] : Object.keys(params).map((param) => props[param]);\n\n    return {\n      ...usedProps,\n      key: props.uuid,\n      args,\n      childRef,\n      matrixAutoUpdate: false,\n    };\n  }, [props]);\n\n  const geo = useMemo(() => geometries.filter((g) => g.uuid === props.geometry)[0],\n    [props, geometries]);\n\n  const geoProps = useMemo(() => {\n    if (geo === undefined) return {};\n    const threeObj = new THREE[geo.type]();\n\n    const propKeys = Object.keys(geo).filter((prop) => threeObj[prop] !== undefined);\n    const filteredProps = propKeys\n      .filter((key) => propKeys.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = geo[key];\n        return obj;\n      }, {});\n    const {\n      uuid, type,\n      geometry, material,\n      children,\n      matrix,\n      ...usedProps\n    } = filteredProps;\n\n    const params = threeObj.parameters;\n    const args = params === undefined ? [] : Object.keys(params).map((param) => geo[param]);\n\n    args.push(usedProps);\n\n    return {\n      key: geo.uuid,\n      args,\n    };\n  }, [geo]);\n\n  const mat = useMemo(() => materials.filter((m) => m.uuid === props.material)[0],\n    [props, materials]);\n  const matProps = useMemo(() => {\n    if (mat === undefined) return {};\n    const threeObj = new THREE[mat.type]();\n\n    const propKeys = Object.keys(mat).filter((prop) => threeObj[prop] !== undefined);\n    const filteredProps = propKeys\n      .filter((key) => propKeys.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = mat[key];\n        return obj;\n      }, {});\n    const {\n      uuid, type,\n      geometry, material,\n      children,\n      matrix,\n      ...usedProps\n    } = filteredProps;\n\n    const params = threeObj.parameters;\n    const args = params === undefined ? [] : Object.keys(params).map((param) => mat[param]);\n\n    args.push(usedProps);\n\n    return {\n      key: mat.uuid,\n      args,\n    };\n  }, [mat]);\n\n  // Only need material and geometry for objects\n  const matGeoChildren = (props.geometry !== undefined && props.material !== undefined) ? [\n    createElement(geo.type, geoProps, []),\n    createElement(mat.type, matProps, []),\n  ] : [];\n\n  // TODO: More robust way to handle uniform values\n  useFrame((state) => {\n    if (childRef.current) {\n      if (childRef.current.material) {\n        if (childRef.current.material.uniforms) {\n          if (childRef.current.material.uniforms.time) {\n            childRef.current.material.uniforms.time.value = state.clock.elapsedTime;\n          }\n        }\n      }\n    }\n  });\n\n  return (\n    <ThreeObjectManager key={`rt_${props.uuid}`} {...DefaultProps} type={props.type} {...props}>\n      {createElement(\n        props.type,\n        objProps,\n        [\n          ...matGeoChildren,\n          props.children && props.children.length > 0\n            ? props.children.map((childProps) => RenderThreeChildren(\n              {\n                props: childProps,\n                geometries,\n                materials,\n                devices,\n                generators,\n                connections,\n              },\n            )) : null,\n        ],\n      )}\n    </ThreeObjectManager>\n  );\n};\n\nexport default RenderThreeChildren;\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React, { memo } from 'react';\n\nimport RenderThreeChildren from '../../components/@objects/RenderThreeChildren';\n\nconst DynamicScene = ({ sceneJSON }) => (sceneJSON.object.children.map((childProps) => (\n  <RenderThreeChildren\n    key={childProps.uuid}\n    props={childProps}\n    geometries={sceneJSON.geometries}\n    materials={sceneJSON.materials}\n    devices={sceneJSON.devices}\n    generators={sceneJSON.generators}\n    connections={sceneJSON.connections}\n  />\n)));\n\nDynamicScene.whyDidYouRender = true;\n\nexport default memo(DynamicScene);\n","/* eslint-disable react/jsx-filename-extension */\nimport React, { useCallback, useEffect, useRef } from 'react';\n\nimport AppView from './AppView';\nimport World from './@RecklessCore/world';\nimport SceneManager from './@RecklessCore/managers/SceneManager';\nimport Scene from './@RecklessCore/Scene';\nimport DynamicScene from './@RecklessCore/scenes/Dynamic/index';\n\nimport useAppContext from './@RecklessCore/contexts/useAppContext';\nimport useEditorMenuContext from './@RecklessCore/contexts/useEditorMenuContext';\nimport useToolsMenuContext from './@RecklessCore/contexts/useToolsMenuContext';\nimport useInspectorMenuContext from './@RecklessCore/contexts/useInspectorMenuContext';\n\n// import Outputs from './@RecklessCore/outputs/index';\n\nconst App = () => {\n  const {\n    publish, subscribe, sceneJSON, setSceneJSON,\n  } = useAppContext();\n  const { editorMenuHeight, editorMenuOpen, setEditorMenuOpen } = useEditorMenuContext();\n  const { toolsMenuWidth, toolsMenuOpen, setToolsMenuOpen } = useToolsMenuContext();\n  const { inspectorMenuWidth, inspectorMenuOpen, setInspectorMenuOpen } = useInspectorMenuContext();\n\n  const isMounted = useRef(false);\n\n  const updateScene = useCallback((data) => { // update data only when peer list is modified\n    if (isMounted.current) {\n      setSceneJSON(data);\n    }\n  }, [setSceneJSON]);\n\n  useEffect(() => {\n    if (sceneJSON !== undefined) {\n      isMounted.current = true;\n      subscribe('scene-changed', updateScene);\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [isMounted, updateScene, subscribe, sceneJSON]);\n\n  return (\n    <AppView {...{\n      editorMenuOpen,\n      editorMenuHeight,\n      setEditorMenuOpen,\n      toolsMenuOpen,\n      toolsMenuWidth,\n      setToolsMenuOpen,\n      inspectorMenuOpen,\n      inspectorMenuWidth,\n      setInspectorMenuOpen,\n    }}\n    >\n      <World {...{ sceneJSON }}>\n        <SceneManager {...{ defaultScene: 'dynamic', publish }}>\n          <Scene {...{ id: 'dynamic', sceneJSON }}>\n            <DynamicScene {...{ sceneJSON }} />\n          </Scene>\n        </SceneManager>\n      </World>\n    </AppView>\n  );\n};\n\nApp.whyDidYouRender = true;\n\nexport default App;\n","/* eslint-disable no-undef */\n/* eslint-disable react/jsx-filename-extension */\nimport './wdyr';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { ThemeProvider } from '@material-ui/styles';\nimport { CssBaseline, unstable_createMuiStrictModeTheme as createMuiTheme } from '@material-ui/core';\nimport { Palette } from '@material-ui/core/styles/createPalette';\n\nimport AppManager from './@RecklessCore/managers/AppManager';\nimport ConnectionsManager from './@RecklessCore/managers/ConnectionsManager';\nimport InspectorMenuManager from './@RecklessCore/managers/InspectorMenuManager';\nimport ToolsMenuManager from './@RecklessCore/managers/ToolsMenuManager';\nimport EditorMenuManager from './@RecklessCore/managers/EditorMenuManager';\n\nimport App from './App';\nimport PeersManager from './@RecklessCore/managers/PeersManager';\nimport ThreeObjectsManager from './@RecklessCore/managers/ThreeObjectsManager';\nimport GeneratorsManager from './@RecklessCore/managers/GeneratorsManager';\nimport DevicesManager from './@RecklessCore/managers/DevicesManager';\nimport TransformsManager from './@RecklessCore/managers/TransformsManager';\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    background: {\n      default: '#303030',\n    },\n    ...Palette,\n  },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AppManager>\n        <ThreeObjectsManager>\n          <PeersManager>\n            <ConnectionsManager>\n              <DevicesManager>\n                <GeneratorsManager>\n                  <TransformsManager>\n                    <EditorMenuManager>\n                      <ToolsMenuManager>\n                        <InspectorMenuManager>\n                          <App />\n                        </InspectorMenuManager>\n                      </ToolsMenuManager>\n                    </EditorMenuManager>\n                  </TransformsManager>\n                </GeneratorsManager>\n              </DevicesManager>\n            </ConnectionsManager>\n          </PeersManager>\n        </ThreeObjectsManager>\n      </AppManager>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}