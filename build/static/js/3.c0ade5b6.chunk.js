(this["webpackJsonp@recklesstechnology/create-reckless-tech-app"]=this["webpackJsonp@recklesstechnology/create-reckless-tech-app"]||[]).push([[3],{589:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(17),i=r(27),a=r(21),u=r(4),o=r(57),s=r(18),d=r(6),b=r(63),l=r(197),f=r(14),j=r(1),O=function(e){var t=e.name,r=e.node,n=e.position,c=e.rotation,i=e.scale,a=e.children;return Object(j.jsx)("group",{name:t,ref:r,position:n,rotation:c,scale:i,children:a})},m=Object(n.memo)(O),p=["name","displayName","type","children"],y=Object(n.createContext)(null),h=Object(n.createContext)(null),v=Object(n.createContext)(null),g=Object(n.createContext)(null),k={uuid:"xxx",name:"unnamed",type:"three-object",displayName:"unnamed",disabled:!1,debug:!1,position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]},x=function(e){var t=e.name,r=e.displayName,c=e.type,a=e.children,u=Object(i.a)(e,p),o=Object(n.useRef)(!1),s=Object(f.a)(),O=s.sceneJSON,k=s.subscribe,x=s.unsubscribe,w=s.publish,E=O.connections,R=Object(n.useRef)(Symbol("ThreeObject")),P=Object(n.useRef)(null),S=Object(n.useState)(u.uuid),C=Object(d.a)(S,1)[0],M=Object(n.useState)(u.disabled||!1),D=Object(d.a)(M,2),N=D[0],L=D[1],J=Object(n.useState)(u.debug||!1),T=Object(d.a)(J,2),Y=T[0],U=T[1],A=Object(n.useState)(u.position||[0,0,0]),H=Object(d.a)(A,2),_=H[0],q=H[1],z=Object(n.useState)(u.rotation||[0,0,0]),B=Object(d.a)(z,2),F=B[0],G=B[1],I=Object(n.useState)(u.scale||[1,1,1]),K=Object(d.a)(I,2),Q=K[0],V=K[1],W=function(e,t){switch(e.toLowerCase()){default:break;case"position":q(t);break;case"rotation":G(t);break;case"scale":V(t)}};Object(n.useEffect)((function(){return E.filter((function(e){return e.to===C})).forEach((function(e){k("".concat(e.from,"-").concat(e.fromProp.toLowerCase(),"-updated"),(function(t){W(e.toProp.toLowerCase(),t)}))})),function(){E.filter((function(e){return e.to===C})).forEach((function(e){x("".concat(e.from,"-").concat(e.fromProp.toLowerCase(),"-updated"),(function(t){W(e.toProp.toLowerCase(),t)}))}))}}),[E,C,k,x]),Object(n.useEffect)((function(){o.current&&w("".concat(C,"-disabled-updated"),N)}),[N,w,C]),Object(n.useEffect)((function(){o.current&&w("".concat(C,"-debug-updated"),Y)}),[Y,w,C]),Object(n.useEffect)((function(){o.current&&w("".concat(C,"-position-updated"),_)}),[_,w,C]),Object(n.useEffect)((function(){o.current&&w("".concat(C,"-rotation-updated"),F)}),[F,w,C]),Object(n.useEffect)((function(){o.current&&w("".concat(C,"-scale-updated"),Q)}),[Q,w,C]);var X=Object(l.a)(),Z=X.registerThreeObject,$=X.unregisterThreeObject,ee=Object(b.a)(),te=Object(n.useMemo)((function(){return{uuid:C,id:R.current,name:t,displayName:r,type:c,disabled:N,setDisabled:L,debug:Y,setDebug:U,position:_,setPosition:q,rotation:F,setRotation:G,scale:Q,setScale:V}}),[C,t,r,c,N,L,Y,U,_,q,F,G,Q,V]),re=Object(n.useCallback)((function(){return te}),[te]);Object(n.useEffect)((function(){return o.current=!0,Z(C,te),function(){o.current=!1,$(C,te)}}),[]);var ne=Object(n.useMemo)((function(){return{uuid:C,id:R.current,name:t,nodeRef:P,getRef:re,disabled:N,setDisabled:L,debug:Y,setDebug:U,setPosition:q,setRotation:G,setScale:V,forceUpdate:ee}}),[C,R,t,P,re,N,L,Y,U,q,G,V,ee]),ce=Object(n.useMemo)((function(){return{position:_}}),[_]),ie=Object(n.useMemo)((function(){return{rotation:F}}),[F]),ae=Object(n.useMemo)((function(){return{scale:Q}}),[Q]);return Object(j.jsx)(y.Provider,{value:ne,children:Object(j.jsx)(h.Provider,{value:ce,children:Object(j.jsx)(v.Provider,{value:ie,children:Object(j.jsx)(g.Provider,{value:ae,children:Object(j.jsx)(m,{name:t,node:P,position:_,rotation:F,scale:Q,children:N?[]:a})})})})})};x.whyDidYouRender=!1;var w=x,E=["layers","geometry","material","children","shadow"],R=["uuid","type","geometry","material","children","matrix"],P=["uuid","type","geometry","material","children","matrix"],S=function e(t){var r=t.props,d=t.geometries,b=t.materials,l=t.devices,f=t.generators,O=t.connections,m=Object(n.useRef)(),p=Object(n.useMemo)((function(){var e=new s[r.type],t=Object.keys(r).filter((function(t){return void 0!==e[t]})),n=t.filter((function(e){return t.includes(e)})).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(a.a)({},t,r[t]))}),{}),c=(n.layers,n.geometry,n.material,n.children,n.shadow,Object(i.a)(n,E)),o=e.parameters,d=void 0===o?[]:Object.keys(o).map((function(e){return r[e]}));return Object(u.a)(Object(u.a)({userData:{isPatchHidden:!1}},c),{},{key:r.uuid,args:d,childRef:m,matrixAutoUpdate:!1})}),[r]),y=Object(n.useMemo)((function(){return d.filter((function(e){return e.uuid===r.geometry}))[0]}),[r,d]),h=Object(n.useMemo)((function(){if(void 0===y)return{};var e=new s[y.type],t=Object.keys(y).filter((function(t){return void 0!==e[t]})),r=t.filter((function(e){return t.includes(e)})).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(a.a)({},t,y[t]))}),{}),n=(r.uuid,r.type,r.geometry,r.material,r.children,r.matrix,Object(i.a)(r,R)),c=e.parameters,o=void 0===c?[]:Object.keys(c).map((function(e){return y[e]}));return o.push(n),{key:y.uuid,args:o}}),[y]),v=Object(n.useMemo)((function(){return b.filter((function(e){return e.uuid===r.material}))[0]}),[r,b]),g=Object(n.useMemo)((function(){if(void 0===v)return{};var e=new s[v.type],t=Object.keys(v).filter((function(t){return void 0!==e[t]})),r=t.filter((function(e){return t.includes(e)})).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(a.a)({},t,v[t]))}),{}),n=(r.uuid,r.type,r.geometry,r.material,r.children,r.matrix,Object(i.a)(r,P)),c=e.parameters,o=void 0===c?[]:Object.keys(c).map((function(e){return v[e]}));return o.push(n),{key:v.uuid,args:o}}),[v]),x=void 0!==r.geometry&&void 0!==r.material?[Object(n.createElement)(y.type,h,[]),Object(n.createElement)(v.type,g,[])]:[];Object(o.c)((function(e){m.current&&m.current.material&&m.current.material.uniforms&&m.current.material.uniforms.time&&(m.current.material.uniforms.time.value=e.clock.elapsedTime)}));var S=[];return r.children&&r.children.length>0&&(S=r.children.map((function(t){return Object(j.jsx)(e,{key:t.uuid,props:t,geometries:d,materials:b,devices:l,generators:f,connections:O})}))),Object(j.jsx)(w,Object(u.a)(Object(u.a)(Object(u.a)({},k),{},{type:r.type},r),{},{children:Object(n.createElement)(r.type,p,[].concat(x,Object(c.a)(S)))}),"rt_".concat(r.uuid))};S.whyDidYouRender=!1;var C=S,M=function(e){var t=e.sceneJSON,r=t.object,n=t.geometries,c=t.materials,i=t.devices,a=t.generators,u=t.connections;return r.children.map((function(e){return Object(j.jsx)(C,{props:e,geometries:n,materials:c,devices:i,generators:a,connections:u},e.uuid)}))};M.whyDidYouRender=!1;t.default=Object(n.memo)(M)}}]);
//# sourceMappingURL=3.c0ade5b6.chunk.js.map